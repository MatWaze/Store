var q=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function NP(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Zg={exports:{}},tc={},em={exports:{}},U={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var To=Symbol.for("react.element"),zP=Symbol.for("react.portal"),LP=Symbol.for("react.fragment"),jP=Symbol.for("react.strict_mode"),xP=Symbol.for("react.profiler"),BP=Symbol.for("react.provider"),FP=Symbol.for("react.context"),qP=Symbol.for("react.forward_ref"),UP=Symbol.for("react.suspense"),$P=Symbol.for("react.memo"),VP=Symbol.for("react.lazy"),eh=Symbol.iterator;function WP(t){return t===null||typeof t!="object"?null:(t=eh&&t[eh]||t["@@iterator"],typeof t=="function"?t:null)}var tm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rm=Object.assign,nm={};function qn(t,e,r){this.props=t,this.context=e,this.refs=nm,this.updater=r||tm}qn.prototype.isReactComponent={};qn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function im(){}im.prototype=qn.prototype;function kp(t,e,r){this.props=t,this.context=e,this.refs=nm,this.updater=r||tm}var Op=kp.prototype=new im;Op.constructor=kp;rm(Op,qn.prototype);Op.isPureReactComponent=!0;var th=Array.isArray,sm=Object.prototype.hasOwnProperty,Mp={current:null},om={key:!0,ref:!0,__self:!0,__source:!0};function am(t,e,r){var n,i={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)sm.call(e,n)&&!om.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:To,type:t,key:s,ref:a,props:i,_owner:Mp.current}}function HP(t,e){return{$$typeof:To,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function bp(t){return typeof t=="object"&&t!==null&&t.$$typeof===To}function KP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var rh=/\/+/g;function Du(t,e){return typeof t=="object"&&t!==null&&t.key!=null?KP(""+t.key):e.toString(36)}function la(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case To:case zP:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+Du(a,0):n,th(i)?(r="",t!=null&&(r=t.replace(rh,"$&/")+"/"),la(i,e,r,"",function(u){return u})):i!=null&&(bp(i)&&(i=HP(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(rh,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",th(t))for(var o=0;o<t.length;o++){s=t[o];var c=n+Du(s,o);a+=la(s,e,r,c,i)}else if(c=WP(t),typeof c=="function")for(t=c.call(t),o=0;!(s=t.next()).done;)s=s.value,c=n+Du(s,o++),a+=la(s,e,r,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function $o(t,e,r){if(t==null)return t;var n=[],i=0;return la(t,n,"","",function(s){return e.call(r,s,i++)}),n}function JP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var je={current:null},pa={transition:null},GP={ReactCurrentDispatcher:je,ReactCurrentBatchConfig:pa,ReactCurrentOwner:Mp};function cm(){throw Error("act(...) is not supported in production builds of React.")}U.Children={map:$o,forEach:function(t,e,r){$o(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return $o(t,function(){e++}),e},toArray:function(t){return $o(t,function(e){return e})||[]},only:function(t){if(!bp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};U.Component=qn;U.Fragment=LP;U.Profiler=xP;U.PureComponent=kp;U.StrictMode=jP;U.Suspense=UP;U.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GP;U.act=cm;U.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=rm({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Mp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)sm.call(e,c)&&!om.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:To,type:t.type,key:i,ref:s,props:n,_owner:a}};U.createContext=function(t){return t={$$typeof:FP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:BP,_context:t},t.Consumer=t};U.createElement=am;U.createFactory=function(t){var e=am.bind(null,t);return e.type=t,e};U.createRef=function(){return{current:null}};U.forwardRef=function(t){return{$$typeof:qP,render:t}};U.isValidElement=bp;U.lazy=function(t){return{$$typeof:VP,_payload:{_status:-1,_result:t},_init:JP}};U.memo=function(t,e){return{$$typeof:$P,type:t,compare:e===void 0?null:e}};U.startTransition=function(t){var e=pa.transition;pa.transition={};try{t()}finally{pa.transition=e}};U.unstable_act=cm;U.useCallback=function(t,e){return je.current.useCallback(t,e)};U.useContext=function(t){return je.current.useContext(t)};U.useDebugValue=function(){};U.useDeferredValue=function(t){return je.current.useDeferredValue(t)};U.useEffect=function(t,e){return je.current.useEffect(t,e)};U.useId=function(){return je.current.useId()};U.useImperativeHandle=function(t,e,r){return je.current.useImperativeHandle(t,e,r)};U.useInsertionEffect=function(t,e){return je.current.useInsertionEffect(t,e)};U.useLayoutEffect=function(t,e){return je.current.useLayoutEffect(t,e)};U.useMemo=function(t,e){return je.current.useMemo(t,e)};U.useReducer=function(t,e,r){return je.current.useReducer(t,e,r)};U.useRef=function(t){return je.current.useRef(t)};U.useState=function(t){return je.current.useState(t)};U.useSyncExternalStore=function(t,e,r){return je.current.useSyncExternalStore(t,e,r)};U.useTransition=function(){return je.current.useTransition()};U.version="18.3.1";em.exports=U;var Ue=em.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QP=Ue,YP=Symbol.for("react.element"),XP=Symbol.for("react.fragment"),ZP=Object.prototype.hasOwnProperty,eR=QP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tR={key:!0,ref:!0,__self:!0,__source:!0};function um(t,e,r){var n,i={},s=null,a=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)ZP.call(e,n)&&!tR.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:YP,type:t,key:s,ref:a,props:i,_owner:eR.current}}tc.Fragment=XP;tc.jsx=um;tc.jsxs=um;Zg.exports=tc;var jt=Zg.exports,lm={exports:{}},Xe={},pm={exports:{}},dm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(_,b){var L=_.length;_.push(b);e:for(;0<L;){var K=L-1>>>1,oe=_[K];if(0<i(oe,b))_[K]=b,_[L]=oe,L=K;else break e}}function r(_){return _.length===0?null:_[0]}function n(_){if(_.length===0)return null;var b=_[0],L=_.pop();if(L!==b){_[0]=L;e:for(var K=0,oe=_.length,sn=oe>>>1;K<sn;){var kt=2*(K+1)-1,Jn=_[kt],Ot=kt+1,on=_[Ot];if(0>i(Jn,L))Ot<oe&&0>i(on,Jn)?(_[K]=on,_[Ot]=L,K=Ot):(_[K]=Jn,_[kt]=L,K=kt);else if(Ot<oe&&0>i(on,L))_[K]=on,_[Ot]=L,K=Ot;else break e}}return b}function i(_,b){var L=_.sortIndex-b.sortIndex;return L!==0?L:_.id-b.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var c=[],u=[],l=1,p=null,d=3,h=!1,f=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(_){for(var b=r(u);b!==null;){if(b.callback===null)n(u);else if(b.startTime<=_)n(u),b.sortIndex=b.expirationTime,e(c,b);else break;b=r(u)}}function C(_){if(m=!1,S(_),!f)if(r(c)!==null)f=!0,Ct(P);else{var b=r(u);b!==null&&Jt(C,b.startTime-_)}}function P(_,b){f=!1,m&&(m=!1,v(E),E=-1),h=!0;var L=d;try{for(S(b),p=r(c);p!==null&&(!(p.expirationTime>b)||_&&!W());){var K=p.callback;if(typeof K=="function"){p.callback=null,d=p.priorityLevel;var oe=K(p.expirationTime<=b);b=t.unstable_now(),typeof oe=="function"?p.callback=oe:p===r(c)&&n(c),S(b)}else n(c);p=r(c)}if(p!==null)var sn=!0;else{var kt=r(u);kt!==null&&Jt(C,kt.startTime-b),sn=!1}return sn}finally{p=null,d=L,h=!1}}var R=!1,w=null,E=-1,N=5,O=-1;function W(){return!(t.unstable_now()-O<N)}function ct(){if(w!==null){var _=t.unstable_now();O=_;var b=!0;try{b=w(!0,_)}finally{b?ie():(R=!1,w=null)}}else R=!1}var ie;if(typeof g=="function")ie=function(){g(ct)};else if(typeof MessageChannel<"u"){var ut=new MessageChannel,At=ut.port2;ut.port1.onmessage=ct,ie=function(){At.postMessage(null)}}else ie=function(){y(ct,0)};function Ct(_){w=_,R||(R=!0,ie())}function Jt(_,b){E=y(function(){_(t.unstable_now())},b)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(_){_.callback=null},t.unstable_continueExecution=function(){f||h||(f=!0,Ct(P))},t.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<_?Math.floor(1e3/_):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(_){switch(d){case 1:case 2:case 3:var b=3;break;default:b=d}var L=d;d=b;try{return _()}finally{d=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(_,b){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var L=d;d=_;try{return b()}finally{d=L}},t.unstable_scheduleCallback=function(_,b,L){var K=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?K+L:K):L=K,_){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=L+oe,_={id:l++,callback:b,priorityLevel:_,startTime:L,expirationTime:oe,sortIndex:-1},L>K?(_.sortIndex=L,e(u,_),r(c)===null&&_===r(u)&&(m?(v(E),E=-1):m=!0,Jt(C,L-K))):(_.sortIndex=oe,e(c,_),f||h||(f=!0,Ct(P))),_},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(_){var b=d;return function(){var L=d;d=b;try{return _.apply(this,arguments)}finally{d=L}}}})(dm);pm.exports=dm;var rR=pm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nR=Ue,Ye=rR;function T(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hm=new Set,io={};function en(t,e){On(t,e),On(t+"Capture",e)}function On(t,e){for(io[t]=e,t=0;t<e.length;t++)hm.add(e[t])}var Ut=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Al=Object.prototype.hasOwnProperty,iR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nh={},ih={};function sR(t){return Al.call(ih,t)?!0:Al.call(nh,t)?!1:iR.test(t)?ih[t]=!0:(nh[t]=!0,!1)}function oR(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function aR(t,e,r,n){if(e===null||typeof e>"u"||oR(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xe(t,e,r,n,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Ce={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ce[t]=new xe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ce[e]=new xe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ce[t]=new xe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ce[t]=new xe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ce[t]=new xe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ce[t]=new xe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ce[t]=new xe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ce[t]=new xe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ce[t]=new xe(t,5,!1,t.toLowerCase(),null,!1,!1)});var Dp=/[\-:]([a-z])/g;function Np(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Dp,Np);Ce[e]=new xe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Dp,Np);Ce[e]=new xe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Dp,Np);Ce[e]=new xe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ce[t]=new xe(t,1,!1,t.toLowerCase(),null,!1,!1)});Ce.xlinkHref=new xe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ce[t]=new xe(t,1,!1,t.toLowerCase(),null,!0,!0)});function zp(t,e,r,n){var i=Ce.hasOwnProperty(e)?Ce[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(aR(e,r,i,n)&&(r=null),n||i===null?sR(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ht=nR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vo=Symbol.for("react.element"),dn=Symbol.for("react.portal"),hn=Symbol.for("react.fragment"),Lp=Symbol.for("react.strict_mode"),kl=Symbol.for("react.profiler"),fm=Symbol.for("react.provider"),vm=Symbol.for("react.context"),jp=Symbol.for("react.forward_ref"),Ol=Symbol.for("react.suspense"),Ml=Symbol.for("react.suspense_list"),xp=Symbol.for("react.memo"),Qt=Symbol.for("react.lazy"),gm=Symbol.for("react.offscreen"),sh=Symbol.iterator;function Gn(t){return t===null||typeof t!="object"?null:(t=sh&&t[sh]||t["@@iterator"],typeof t=="function"?t:null)}var ee=Object.assign,Nu;function Us(t){if(Nu===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Nu=e&&e[1]||""}return`
`+Nu+t}var zu=!1;function Lu(t,e){if(!t||zu)return"";zu=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var c=`
`+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=o);break}}}finally{zu=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Us(t):""}function cR(t){switch(t.tag){case 5:return Us(t.type);case 16:return Us("Lazy");case 13:return Us("Suspense");case 19:return Us("SuspenseList");case 0:case 2:case 15:return t=Lu(t.type,!1),t;case 11:return t=Lu(t.type.render,!1),t;case 1:return t=Lu(t.type,!0),t;default:return""}}function bl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case hn:return"Fragment";case dn:return"Portal";case kl:return"Profiler";case Lp:return"StrictMode";case Ol:return"Suspense";case Ml:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vm:return(t.displayName||"Context")+".Consumer";case fm:return(t._context.displayName||"Context")+".Provider";case jp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xp:return e=t.displayName||null,e!==null?e:bl(t.type)||"Memo";case Qt:e=t._payload,t=t._init;try{return bl(t(e))}catch{}}return null}function uR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bl(e);case 8:return e===Lp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lR(t){var e=mm(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Wo(t){t._valueTracker||(t._valueTracker=lR(t))}function Sm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=mm(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Ia(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Dl(t,e){var r=e.checked;return ee({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function oh(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=fr(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ym(t,e){e=e.checked,e!=null&&zp(t,"checked",e,!1)}function Nl(t,e){ym(t,e);var r=fr(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zl(t,e.type,r):e.hasOwnProperty("defaultValue")&&zl(t,e.type,fr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ah(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function zl(t,e,r){(e!=="number"||Ia(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var $s=Array.isArray;function wn(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+fr(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ll(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(T(91));return ee({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ch(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(T(92));if($s(r)){if(1<r.length)throw Error(T(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:fr(r)}}function Cm(t,e){var r=fr(e.value),n=fr(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function uh(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Pm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Pm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ho,Rm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ho=Ho||document.createElement("div"),Ho.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ho.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function so(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Ks={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pR=["Webkit","ms","Moz","O"];Object.keys(Ks).forEach(function(t){pR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ks[e]=Ks[t]})});function Em(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Ks.hasOwnProperty(t)&&Ks[t]?(""+e).trim():e+"px"}function wm(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=Em(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var dR=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xl(t,e){if(e){if(dR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(T(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(T(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(T(61))}if(e.style!=null&&typeof e.style!="object")throw Error(T(62))}}function Bl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fl=null;function Bp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ql=null,In=null,Tn=null;function lh(t){if(t=ko(t)){if(typeof ql!="function")throw Error(T(280));var e=t.stateNode;e&&(e=oc(e),ql(t.stateNode,t.type,e))}}function Im(t){In?Tn?Tn.push(t):Tn=[t]:In=t}function Tm(){if(In){var t=In,e=Tn;if(Tn=In=null,lh(t),e)for(t=0;t<e.length;t++)lh(e[t])}}function _m(t,e){return t(e)}function Am(){}var ju=!1;function km(t,e,r){if(ju)return t(e,r);ju=!0;try{return _m(t,e,r)}finally{ju=!1,(In!==null||Tn!==null)&&(Am(),Tm())}}function oo(t,e){var r=t.stateNode;if(r===null)return null;var n=oc(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(T(231,e,typeof r));return r}var Ul=!1;if(Ut)try{var Qn={};Object.defineProperty(Qn,"passive",{get:function(){Ul=!0}}),window.addEventListener("test",Qn,Qn),window.removeEventListener("test",Qn,Qn)}catch{Ul=!1}function hR(t,e,r,n,i,s,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(l){this.onError(l)}}var Js=!1,Ta=null,_a=!1,$l=null,fR={onError:function(t){Js=!0,Ta=t}};function vR(t,e,r,n,i,s,a,o,c){Js=!1,Ta=null,hR.apply(fR,arguments)}function gR(t,e,r,n,i,s,a,o,c){if(vR.apply(this,arguments),Js){if(Js){var u=Ta;Js=!1,Ta=null}else throw Error(T(198));_a||(_a=!0,$l=u)}}function tn(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Om(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ph(t){if(tn(t)!==t)throw Error(T(188))}function mR(t){var e=t.alternate;if(!e){if(e=tn(t),e===null)throw Error(T(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return ph(i),t;if(s===n)return ph(i),e;s=s.sibling}throw Error(T(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a)throw Error(T(189))}}if(r.alternate!==n)throw Error(T(190))}if(r.tag!==3)throw Error(T(188));return r.stateNode.current===r?t:e}function Mm(t){return t=mR(t),t!==null?bm(t):null}function bm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bm(t);if(e!==null)return e;t=t.sibling}return null}var Dm=Ye.unstable_scheduleCallback,dh=Ye.unstable_cancelCallback,SR=Ye.unstable_shouldYield,yR=Ye.unstable_requestPaint,se=Ye.unstable_now,CR=Ye.unstable_getCurrentPriorityLevel,Fp=Ye.unstable_ImmediatePriority,Nm=Ye.unstable_UserBlockingPriority,Aa=Ye.unstable_NormalPriority,PR=Ye.unstable_LowPriority,zm=Ye.unstable_IdlePriority,rc=null,Tt=null;function RR(t){if(Tt&&typeof Tt.onCommitFiberRoot=="function")try{Tt.onCommitFiberRoot(rc,t,void 0,(t.current.flags&128)===128)}catch{}}var ft=Math.clz32?Math.clz32:IR,ER=Math.log,wR=Math.LN2;function IR(t){return t>>>=0,t===0?32:31-(ER(t)/wR|0)|0}var Ko=64,Jo=4194304;function Vs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ka(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~i;o!==0?n=Vs(o):(s&=a,s!==0&&(n=Vs(s)))}else a=r&~i,a!==0?n=Vs(a):s!==0&&(n=Vs(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-ft(e),i=1<<r,n|=t[r],e&=~i;return n}function TR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _R(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-ft(s),o=1<<a,c=i[a];c===-1?(!(o&r)||o&n)&&(i[a]=TR(o,e)):c<=e&&(t.expiredLanes|=o),s&=~o}}function Vl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Lm(){var t=Ko;return Ko<<=1,!(Ko&4194240)&&(Ko=64),t}function xu(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function _o(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ft(e),t[e]=r}function AR(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-ft(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function qp(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-ft(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var H=0;function jm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var xm,Up,Bm,Fm,qm,Wl=!1,Go=[],sr=null,or=null,ar=null,ao=new Map,co=new Map,er=[],kR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hh(t,e){switch(t){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":ao.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":co.delete(e.pointerId)}}function Yn(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ko(e),e!==null&&Up(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function OR(t,e,r,n,i){switch(e){case"focusin":return sr=Yn(sr,t,e,r,n,i),!0;case"dragenter":return or=Yn(or,t,e,r,n,i),!0;case"mouseover":return ar=Yn(ar,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return ao.set(s,Yn(ao.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,co.set(s,Yn(co.get(s)||null,t,e,r,n,i)),!0}return!1}function Um(t){var e=qr(t.target);if(e!==null){var r=tn(e);if(r!==null){if(e=r.tag,e===13){if(e=Om(r),e!==null){t.blockedOn=e,qm(t.priority,function(){Bm(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function da(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Hl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Fl=n,r.target.dispatchEvent(n),Fl=null}else return e=ko(r),e!==null&&Up(e),t.blockedOn=r,!1;e.shift()}return!0}function fh(t,e,r){da(t)&&r.delete(e)}function MR(){Wl=!1,sr!==null&&da(sr)&&(sr=null),or!==null&&da(or)&&(or=null),ar!==null&&da(ar)&&(ar=null),ao.forEach(fh),co.forEach(fh)}function Xn(t,e){t.blockedOn===e&&(t.blockedOn=null,Wl||(Wl=!0,Ye.unstable_scheduleCallback(Ye.unstable_NormalPriority,MR)))}function uo(t){function e(i){return Xn(i,t)}if(0<Go.length){Xn(Go[0],t);for(var r=1;r<Go.length;r++){var n=Go[r];n.blockedOn===t&&(n.blockedOn=null)}}for(sr!==null&&Xn(sr,t),or!==null&&Xn(or,t),ar!==null&&Xn(ar,t),ao.forEach(e),co.forEach(e),r=0;r<er.length;r++)n=er[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<er.length&&(r=er[0],r.blockedOn===null);)Um(r),r.blockedOn===null&&er.shift()}var _n=Ht.ReactCurrentBatchConfig,Oa=!0;function bR(t,e,r,n){var i=H,s=_n.transition;_n.transition=null;try{H=1,$p(t,e,r,n)}finally{H=i,_n.transition=s}}function DR(t,e,r,n){var i=H,s=_n.transition;_n.transition=null;try{H=4,$p(t,e,r,n)}finally{H=i,_n.transition=s}}function $p(t,e,r,n){if(Oa){var i=Hl(t,e,r,n);if(i===null)Ju(t,e,n,Ma,r),hh(t,n);else if(OR(i,t,e,r,n))n.stopPropagation();else if(hh(t,n),e&4&&-1<kR.indexOf(t)){for(;i!==null;){var s=ko(i);if(s!==null&&xm(s),s=Hl(t,e,r,n),s===null&&Ju(t,e,n,Ma,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else Ju(t,e,n,null,r)}}var Ma=null;function Hl(t,e,r,n){if(Ma=null,t=Bp(n),t=qr(t),t!==null)if(e=tn(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Om(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ma=t,null}function $m(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(CR()){case Fp:return 1;case Nm:return 4;case Aa:case PR:return 16;case zm:return 536870912;default:return 16}default:return 16}}var rr=null,Vp=null,ha=null;function Vm(){if(ha)return ha;var t,e=Vp,r=e.length,n,i="value"in rr?rr.value:rr.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===i[s-n];n++);return ha=i.slice(t,1<n?1-n:void 0)}function fa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qo(){return!0}function vh(){return!1}function Ze(t){function e(r,n,i,s,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Qo:vh,this.isPropagationStopped=vh,this}return ee(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Qo)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Qo)},persist:function(){},isPersistent:Qo}),e}var Un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wp=Ze(Un),Ao=ee({},Un,{view:0,detail:0}),NR=Ze(Ao),Bu,Fu,Zn,nc=ee({},Ao,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zn&&(Zn&&t.type==="mousemove"?(Bu=t.screenX-Zn.screenX,Fu=t.screenY-Zn.screenY):Fu=Bu=0,Zn=t),Bu)},movementY:function(t){return"movementY"in t?t.movementY:Fu}}),gh=Ze(nc),zR=ee({},nc,{dataTransfer:0}),LR=Ze(zR),jR=ee({},Ao,{relatedTarget:0}),qu=Ze(jR),xR=ee({},Un,{animationName:0,elapsedTime:0,pseudoElement:0}),BR=Ze(xR),FR=ee({},Un,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qR=Ze(FR),UR=ee({},Un,{data:0}),mh=Ze(UR),$R={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=WR[t])?!!e[t]:!1}function Hp(){return HR}var KR=ee({},Ao,{key:function(t){if(t.key){var e=$R[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?VR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hp,charCode:function(t){return t.type==="keypress"?fa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),JR=Ze(KR),GR=ee({},nc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sh=Ze(GR),QR=ee({},Ao,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hp}),YR=Ze(QR),XR=ee({},Un,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZR=Ze(XR),eE=ee({},nc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tE=Ze(eE),rE=[9,13,27,32],Kp=Ut&&"CompositionEvent"in window,Gs=null;Ut&&"documentMode"in document&&(Gs=document.documentMode);var nE=Ut&&"TextEvent"in window&&!Gs,Wm=Ut&&(!Kp||Gs&&8<Gs&&11>=Gs),yh=" ",Ch=!1;function Hm(t,e){switch(t){case"keyup":return rE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Km(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fn=!1;function iE(t,e){switch(t){case"compositionend":return Km(e);case"keypress":return e.which!==32?null:(Ch=!0,yh);case"textInput":return t=e.data,t===yh&&Ch?null:t;default:return null}}function sE(t,e){if(fn)return t==="compositionend"||!Kp&&Hm(t,e)?(t=Vm(),ha=Vp=rr=null,fn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Wm&&e.locale!=="ko"?null:e.data;default:return null}}var oE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ph(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!oE[t.type]:e==="textarea"}function Jm(t,e,r,n){Im(n),e=ba(e,"onChange"),0<e.length&&(r=new Wp("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Qs=null,lo=null;function aE(t){sS(t,0)}function ic(t){var e=mn(t);if(Sm(e))return t}function cE(t,e){if(t==="change")return e}var Gm=!1;if(Ut){var Uu;if(Ut){var $u="oninput"in document;if(!$u){var Rh=document.createElement("div");Rh.setAttribute("oninput","return;"),$u=typeof Rh.oninput=="function"}Uu=$u}else Uu=!1;Gm=Uu&&(!document.documentMode||9<document.documentMode)}function Eh(){Qs&&(Qs.detachEvent("onpropertychange",Qm),lo=Qs=null)}function Qm(t){if(t.propertyName==="value"&&ic(lo)){var e=[];Jm(e,lo,t,Bp(t)),km(aE,e)}}function uE(t,e,r){t==="focusin"?(Eh(),Qs=e,lo=r,Qs.attachEvent("onpropertychange",Qm)):t==="focusout"&&Eh()}function lE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ic(lo)}function pE(t,e){if(t==="click")return ic(e)}function dE(t,e){if(t==="input"||t==="change")return ic(e)}function hE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gt=typeof Object.is=="function"?Object.is:hE;function po(t,e){if(gt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Al.call(e,i)||!gt(t[i],e[i]))return!1}return!0}function wh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ih(t,e){var r=wh(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=wh(r)}}function Ym(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ym(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Xm(){for(var t=window,e=Ia();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Ia(t.document)}return e}function Jp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fE(t){var e=Xm(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Ym(r.ownerDocument.documentElement,r)){if(n!==null&&Jp(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=Ih(r,s);var a=Ih(r,n);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var vE=Ut&&"documentMode"in document&&11>=document.documentMode,vn=null,Kl=null,Ys=null,Jl=!1;function Th(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Jl||vn==null||vn!==Ia(n)||(n=vn,"selectionStart"in n&&Jp(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ys&&po(Ys,n)||(Ys=n,n=ba(Kl,"onSelect"),0<n.length&&(e=new Wp("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=vn)))}function Yo(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var gn={animationend:Yo("Animation","AnimationEnd"),animationiteration:Yo("Animation","AnimationIteration"),animationstart:Yo("Animation","AnimationStart"),transitionend:Yo("Transition","TransitionEnd")},Vu={},Zm={};Ut&&(Zm=document.createElement("div").style,"AnimationEvent"in window||(delete gn.animationend.animation,delete gn.animationiteration.animation,delete gn.animationstart.animation),"TransitionEvent"in window||delete gn.transitionend.transition);function sc(t){if(Vu[t])return Vu[t];if(!gn[t])return t;var e=gn[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Zm)return Vu[t]=e[r];return t}var eS=sc("animationend"),tS=sc("animationiteration"),rS=sc("animationstart"),nS=sc("transitionend"),iS=new Map,_h="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mr(t,e){iS.set(t,e),en(e,[t])}for(var Wu=0;Wu<_h.length;Wu++){var Hu=_h[Wu],gE=Hu.toLowerCase(),mE=Hu[0].toUpperCase()+Hu.slice(1);mr(gE,"on"+mE)}mr(eS,"onAnimationEnd");mr(tS,"onAnimationIteration");mr(rS,"onAnimationStart");mr("dblclick","onDoubleClick");mr("focusin","onFocus");mr("focusout","onBlur");mr(nS,"onTransitionEnd");On("onMouseEnter",["mouseout","mouseover"]);On("onMouseLeave",["mouseout","mouseover"]);On("onPointerEnter",["pointerout","pointerover"]);On("onPointerLeave",["pointerout","pointerover"]);en("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));en("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));en("onBeforeInput",["compositionend","keypress","textInput","paste"]);en("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));en("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));en("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ws="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ws));function Ah(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,gR(n,e,void 0,t),t.currentTarget=null}function sS(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==s&&i.isPropagationStopped())break e;Ah(i,o,u),s=c}else for(a=0;a<n.length;a++){if(o=n[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==s&&i.isPropagationStopped())break e;Ah(i,o,u),s=c}}}if(_a)throw t=$l,_a=!1,$l=null,t}function G(t,e){var r=e[Zl];r===void 0&&(r=e[Zl]=new Set);var n=t+"__bubble";r.has(n)||(oS(e,t,2,!1),r.add(n))}function Ku(t,e,r){var n=0;e&&(n|=4),oS(r,t,n,e)}var Xo="_reactListening"+Math.random().toString(36).slice(2);function ho(t){if(!t[Xo]){t[Xo]=!0,hm.forEach(function(r){r!=="selectionchange"&&(SE.has(r)||Ku(r,!1,t),Ku(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Xo]||(e[Xo]=!0,Ku("selectionchange",!1,e))}}function oS(t,e,r,n){switch($m(e)){case 1:var i=bR;break;case 4:i=DR;break;default:i=$p}r=i.bind(null,e,r,t),i=void 0,!Ul||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Ju(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;o!==null;){if(a=qr(o),a===null)return;if(c=a.tag,c===5||c===6){n=s=a;continue e}o=o.parentNode}}n=n.return}km(function(){var u=s,l=Bp(r),p=[];e:{var d=iS.get(t);if(d!==void 0){var h=Wp,f=t;switch(t){case"keypress":if(fa(r)===0)break e;case"keydown":case"keyup":h=JR;break;case"focusin":f="focus",h=qu;break;case"focusout":f="blur",h=qu;break;case"beforeblur":case"afterblur":h=qu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=gh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=LR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=YR;break;case eS:case tS:case rS:h=BR;break;case nS:h=ZR;break;case"scroll":h=NR;break;case"wheel":h=tE;break;case"copy":case"cut":case"paste":h=qR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Sh}var m=(e&4)!==0,y=!m&&t==="scroll",v=m?d!==null?d+"Capture":null:d;m=[];for(var g=u,S;g!==null;){S=g;var C=S.stateNode;if(S.tag===5&&C!==null&&(S=C,v!==null&&(C=oo(g,v),C!=null&&m.push(fo(g,C,S)))),y)break;g=g.return}0<m.length&&(d=new h(d,f,null,r,l),p.push({event:d,listeners:m}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",d&&r!==Fl&&(f=r.relatedTarget||r.fromElement)&&(qr(f)||f[$t]))break e;if((h||d)&&(d=l.window===l?l:(d=l.ownerDocument)?d.defaultView||d.parentWindow:window,h?(f=r.relatedTarget||r.toElement,h=u,f=f?qr(f):null,f!==null&&(y=tn(f),f!==y||f.tag!==5&&f.tag!==6)&&(f=null)):(h=null,f=u),h!==f)){if(m=gh,C="onMouseLeave",v="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(m=Sh,C="onPointerLeave",v="onPointerEnter",g="pointer"),y=h==null?d:mn(h),S=f==null?d:mn(f),d=new m(C,g+"leave",h,r,l),d.target=y,d.relatedTarget=S,C=null,qr(l)===u&&(m=new m(v,g+"enter",f,r,l),m.target=S,m.relatedTarget=y,C=m),y=C,h&&f)t:{for(m=h,v=f,g=0,S=m;S;S=an(S))g++;for(S=0,C=v;C;C=an(C))S++;for(;0<g-S;)m=an(m),g--;for(;0<S-g;)v=an(v),S--;for(;g--;){if(m===v||v!==null&&m===v.alternate)break t;m=an(m),v=an(v)}m=null}else m=null;h!==null&&kh(p,d,h,m,!1),f!==null&&y!==null&&kh(p,y,f,m,!0)}}e:{if(d=u?mn(u):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var P=cE;else if(Ph(d))if(Gm)P=dE;else{P=lE;var R=uE}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(P=pE);if(P&&(P=P(t,u))){Jm(p,P,r,l);break e}R&&R(t,d,u),t==="focusout"&&(R=d._wrapperState)&&R.controlled&&d.type==="number"&&zl(d,"number",d.value)}switch(R=u?mn(u):window,t){case"focusin":(Ph(R)||R.contentEditable==="true")&&(vn=R,Kl=u,Ys=null);break;case"focusout":Ys=Kl=vn=null;break;case"mousedown":Jl=!0;break;case"contextmenu":case"mouseup":case"dragend":Jl=!1,Th(p,r,l);break;case"selectionchange":if(vE)break;case"keydown":case"keyup":Th(p,r,l)}var w;if(Kp)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else fn?Hm(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(Wm&&r.locale!=="ko"&&(fn||E!=="onCompositionStart"?E==="onCompositionEnd"&&fn&&(w=Vm()):(rr=l,Vp="value"in rr?rr.value:rr.textContent,fn=!0)),R=ba(u,E),0<R.length&&(E=new mh(E,t,null,r,l),p.push({event:E,listeners:R}),w?E.data=w:(w=Km(r),w!==null&&(E.data=w)))),(w=nE?iE(t,r):sE(t,r))&&(u=ba(u,"onBeforeInput"),0<u.length&&(l=new mh("onBeforeInput","beforeinput",null,r,l),p.push({event:l,listeners:u}),l.data=w))}sS(p,e)})}function fo(t,e,r){return{instance:t,listener:e,currentTarget:r}}function ba(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=oo(t,r),s!=null&&n.unshift(fo(t,s,i)),s=oo(t,e),s!=null&&n.push(fo(t,s,i))),t=t.return}return n}function an(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function kh(t,e,r,n,i){for(var s=e._reactName,a=[];r!==null&&r!==n;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,i?(c=oo(r,s),c!=null&&a.unshift(fo(r,c,o))):i||(c=oo(r,s),c!=null&&a.push(fo(r,c,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var yE=/\r\n?/g,CE=/\u0000|\uFFFD/g;function Oh(t){return(typeof t=="string"?t:""+t).replace(yE,`
`).replace(CE,"")}function Zo(t,e,r){if(e=Oh(e),Oh(t)!==e&&r)throw Error(T(425))}function Da(){}var Gl=null,Ql=null;function Yl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xl=typeof setTimeout=="function"?setTimeout:void 0,PE=typeof clearTimeout=="function"?clearTimeout:void 0,Mh=typeof Promise=="function"?Promise:void 0,RE=typeof queueMicrotask=="function"?queueMicrotask:typeof Mh<"u"?function(t){return Mh.resolve(null).then(t).catch(EE)}:Xl;function EE(t){setTimeout(function(){throw t})}function Gu(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),uo(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);uo(e)}function cr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var $n=Math.random().toString(36).slice(2),Et="__reactFiber$"+$n,vo="__reactProps$"+$n,$t="__reactContainer$"+$n,Zl="__reactEvents$"+$n,wE="__reactListeners$"+$n,IE="__reactHandles$"+$n;function qr(t){var e=t[Et];if(e)return e;for(var r=t.parentNode;r;){if(e=r[$t]||r[Et]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=bh(t);t!==null;){if(r=t[Et])return r;t=bh(t)}return e}t=r,r=t.parentNode}return null}function ko(t){return t=t[Et]||t[$t],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function mn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(T(33))}function oc(t){return t[vo]||null}var ep=[],Sn=-1;function Sr(t){return{current:t}}function Q(t){0>Sn||(t.current=ep[Sn],ep[Sn]=null,Sn--)}function J(t,e){Sn++,ep[Sn]=t.current,t.current=e}var vr={},be=Sr(vr),Ve=Sr(!1),Kr=vr;function Mn(t,e){var r=t.type.contextTypes;if(!r)return vr;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function We(t){return t=t.childContextTypes,t!=null}function Na(){Q(Ve),Q(be)}function Dh(t,e,r){if(be.current!==vr)throw Error(T(168));J(be,e),J(Ve,r)}function aS(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(T(108,uR(t)||"Unknown",i));return ee({},r,n)}function za(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vr,Kr=be.current,J(be,t),J(Ve,Ve.current),!0}function Nh(t,e,r){var n=t.stateNode;if(!n)throw Error(T(169));r?(t=aS(t,e,Kr),n.__reactInternalMemoizedMergedChildContext=t,Q(Ve),Q(be),J(be,t)):Q(Ve),J(Ve,r)}var Lt=null,ac=!1,Qu=!1;function cS(t){Lt===null?Lt=[t]:Lt.push(t)}function TE(t){ac=!0,cS(t)}function yr(){if(!Qu&&Lt!==null){Qu=!0;var t=0,e=H;try{var r=Lt;for(H=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Lt=null,ac=!1}catch(i){throw Lt!==null&&(Lt=Lt.slice(t+1)),Dm(Fp,yr),i}finally{H=e,Qu=!1}}return null}var yn=[],Cn=0,La=null,ja=0,tt=[],rt=0,Jr=null,xt=1,Bt="";function Br(t,e){yn[Cn++]=ja,yn[Cn++]=La,La=t,ja=e}function uS(t,e,r){tt[rt++]=xt,tt[rt++]=Bt,tt[rt++]=Jr,Jr=t;var n=xt;t=Bt;var i=32-ft(n)-1;n&=~(1<<i),r+=1;var s=32-ft(e)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,xt=1<<32-ft(e)+i|r<<i|n,Bt=s+t}else xt=1<<s|r<<i|n,Bt=t}function Gp(t){t.return!==null&&(Br(t,1),uS(t,1,0))}function Qp(t){for(;t===La;)La=yn[--Cn],yn[Cn]=null,ja=yn[--Cn],yn[Cn]=null;for(;t===Jr;)Jr=tt[--rt],tt[rt]=null,Bt=tt[--rt],tt[rt]=null,xt=tt[--rt],tt[rt]=null}var Qe=null,Ge=null,Y=!1,ht=null;function lS(t,e){var r=nt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function zh(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qe=t,Ge=cr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qe=t,Ge=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Jr!==null?{id:xt,overflow:Bt}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=nt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Qe=t,Ge=null,!0):!1;default:return!1}}function tp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rp(t){if(Y){var e=Ge;if(e){var r=e;if(!zh(t,e)){if(tp(t))throw Error(T(418));e=cr(r.nextSibling);var n=Qe;e&&zh(t,e)?lS(n,r):(t.flags=t.flags&-4097|2,Y=!1,Qe=t)}}else{if(tp(t))throw Error(T(418));t.flags=t.flags&-4097|2,Y=!1,Qe=t}}}function Lh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qe=t}function ea(t){if(t!==Qe)return!1;if(!Y)return Lh(t),Y=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yl(t.type,t.memoizedProps)),e&&(e=Ge)){if(tp(t))throw pS(),Error(T(418));for(;e;)lS(t,e),e=cr(e.nextSibling)}if(Lh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(T(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Ge=cr(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Ge=null}}else Ge=Qe?cr(t.stateNode.nextSibling):null;return!0}function pS(){for(var t=Ge;t;)t=cr(t.nextSibling)}function bn(){Ge=Qe=null,Y=!1}function Yp(t){ht===null?ht=[t]:ht.push(t)}var _E=Ht.ReactCurrentBatchConfig;function ei(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(T(309));var n=r.stateNode}if(!n)throw Error(T(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(T(284));if(!r._owner)throw Error(T(290,t))}return t}function ta(t,e){throw t=Object.prototype.toString.call(e),Error(T(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function jh(t){var e=t._init;return e(t._payload)}function dS(t){function e(v,g){if(t){var S=v.deletions;S===null?(v.deletions=[g],v.flags|=16):S.push(g)}}function r(v,g){if(!t)return null;for(;g!==null;)e(v,g),g=g.sibling;return null}function n(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function i(v,g){return v=dr(v,g),v.index=0,v.sibling=null,v}function s(v,g,S){return v.index=S,t?(S=v.alternate,S!==null?(S=S.index,S<g?(v.flags|=2,g):S):(v.flags|=2,g)):(v.flags|=1048576,g)}function a(v){return t&&v.alternate===null&&(v.flags|=2),v}function o(v,g,S,C){return g===null||g.tag!==6?(g=nl(S,v.mode,C),g.return=v,g):(g=i(g,S),g.return=v,g)}function c(v,g,S,C){var P=S.type;return P===hn?l(v,g,S.props.children,C,S.key):g!==null&&(g.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Qt&&jh(P)===g.type)?(C=i(g,S.props),C.ref=ei(v,g,S),C.return=v,C):(C=Pa(S.type,S.key,S.props,null,v.mode,C),C.ref=ei(v,g,S),C.return=v,C)}function u(v,g,S,C){return g===null||g.tag!==4||g.stateNode.containerInfo!==S.containerInfo||g.stateNode.implementation!==S.implementation?(g=il(S,v.mode,C),g.return=v,g):(g=i(g,S.children||[]),g.return=v,g)}function l(v,g,S,C,P){return g===null||g.tag!==7?(g=Wr(S,v.mode,C,P),g.return=v,g):(g=i(g,S),g.return=v,g)}function p(v,g,S){if(typeof g=="string"&&g!==""||typeof g=="number")return g=nl(""+g,v.mode,S),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Vo:return S=Pa(g.type,g.key,g.props,null,v.mode,S),S.ref=ei(v,null,g),S.return=v,S;case dn:return g=il(g,v.mode,S),g.return=v,g;case Qt:var C=g._init;return p(v,C(g._payload),S)}if($s(g)||Gn(g))return g=Wr(g,v.mode,S,null),g.return=v,g;ta(v,g)}return null}function d(v,g,S,C){var P=g!==null?g.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return P!==null?null:o(v,g,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Vo:return S.key===P?c(v,g,S,C):null;case dn:return S.key===P?u(v,g,S,C):null;case Qt:return P=S._init,d(v,g,P(S._payload),C)}if($s(S)||Gn(S))return P!==null?null:l(v,g,S,C,null);ta(v,S)}return null}function h(v,g,S,C,P){if(typeof C=="string"&&C!==""||typeof C=="number")return v=v.get(S)||null,o(g,v,""+C,P);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Vo:return v=v.get(C.key===null?S:C.key)||null,c(g,v,C,P);case dn:return v=v.get(C.key===null?S:C.key)||null,u(g,v,C,P);case Qt:var R=C._init;return h(v,g,S,R(C._payload),P)}if($s(C)||Gn(C))return v=v.get(S)||null,l(g,v,C,P,null);ta(g,C)}return null}function f(v,g,S,C){for(var P=null,R=null,w=g,E=g=0,N=null;w!==null&&E<S.length;E++){w.index>E?(N=w,w=null):N=w.sibling;var O=d(v,w,S[E],C);if(O===null){w===null&&(w=N);break}t&&w&&O.alternate===null&&e(v,w),g=s(O,g,E),R===null?P=O:R.sibling=O,R=O,w=N}if(E===S.length)return r(v,w),Y&&Br(v,E),P;if(w===null){for(;E<S.length;E++)w=p(v,S[E],C),w!==null&&(g=s(w,g,E),R===null?P=w:R.sibling=w,R=w);return Y&&Br(v,E),P}for(w=n(v,w);E<S.length;E++)N=h(w,v,E,S[E],C),N!==null&&(t&&N.alternate!==null&&w.delete(N.key===null?E:N.key),g=s(N,g,E),R===null?P=N:R.sibling=N,R=N);return t&&w.forEach(function(W){return e(v,W)}),Y&&Br(v,E),P}function m(v,g,S,C){var P=Gn(S);if(typeof P!="function")throw Error(T(150));if(S=P.call(S),S==null)throw Error(T(151));for(var R=P=null,w=g,E=g=0,N=null,O=S.next();w!==null&&!O.done;E++,O=S.next()){w.index>E?(N=w,w=null):N=w.sibling;var W=d(v,w,O.value,C);if(W===null){w===null&&(w=N);break}t&&w&&W.alternate===null&&e(v,w),g=s(W,g,E),R===null?P=W:R.sibling=W,R=W,w=N}if(O.done)return r(v,w),Y&&Br(v,E),P;if(w===null){for(;!O.done;E++,O=S.next())O=p(v,O.value,C),O!==null&&(g=s(O,g,E),R===null?P=O:R.sibling=O,R=O);return Y&&Br(v,E),P}for(w=n(v,w);!O.done;E++,O=S.next())O=h(w,v,E,O.value,C),O!==null&&(t&&O.alternate!==null&&w.delete(O.key===null?E:O.key),g=s(O,g,E),R===null?P=O:R.sibling=O,R=O);return t&&w.forEach(function(ct){return e(v,ct)}),Y&&Br(v,E),P}function y(v,g,S,C){if(typeof S=="object"&&S!==null&&S.type===hn&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Vo:e:{for(var P=S.key,R=g;R!==null;){if(R.key===P){if(P=S.type,P===hn){if(R.tag===7){r(v,R.sibling),g=i(R,S.props.children),g.return=v,v=g;break e}}else if(R.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Qt&&jh(P)===R.type){r(v,R.sibling),g=i(R,S.props),g.ref=ei(v,R,S),g.return=v,v=g;break e}r(v,R);break}else e(v,R);R=R.sibling}S.type===hn?(g=Wr(S.props.children,v.mode,C,S.key),g.return=v,v=g):(C=Pa(S.type,S.key,S.props,null,v.mode,C),C.ref=ei(v,g,S),C.return=v,v=C)}return a(v);case dn:e:{for(R=S.key;g!==null;){if(g.key===R)if(g.tag===4&&g.stateNode.containerInfo===S.containerInfo&&g.stateNode.implementation===S.implementation){r(v,g.sibling),g=i(g,S.children||[]),g.return=v,v=g;break e}else{r(v,g);break}else e(v,g);g=g.sibling}g=il(S,v.mode,C),g.return=v,v=g}return a(v);case Qt:return R=S._init,y(v,g,R(S._payload),C)}if($s(S))return f(v,g,S,C);if(Gn(S))return m(v,g,S,C);ta(v,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,g!==null&&g.tag===6?(r(v,g.sibling),g=i(g,S),g.return=v,v=g):(r(v,g),g=nl(S,v.mode,C),g.return=v,v=g),a(v)):r(v,g)}return y}var Dn=dS(!0),hS=dS(!1),xa=Sr(null),Ba=null,Pn=null,Xp=null;function Zp(){Xp=Pn=Ba=null}function ed(t){var e=xa.current;Q(xa),t._currentValue=e}function np(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function An(t,e){Ba=t,Xp=Pn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($e=!0),t.firstContext=null)}function st(t){var e=t._currentValue;if(Xp!==t)if(t={context:t,memoizedValue:e,next:null},Pn===null){if(Ba===null)throw Error(T(308));Pn=t,Ba.dependencies={lanes:0,firstContext:t}}else Pn=Pn.next=t;return e}var Ur=null;function td(t){Ur===null?Ur=[t]:Ur.push(t)}function fS(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,td(e)):(r.next=i.next,i.next=r),e.interleaved=r,Vt(t,n)}function Vt(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Yt=!1;function rd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ft(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ur(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,V&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Vt(t,r)}return i=n.interleaved,i===null?(e.next=e,td(n)):(e.next=i.next,i.next=e),n.interleaved=e,Vt(t,r)}function va(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,qp(t,r)}}function xh(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Fa(t,e,r,n){var i=t.updateQueue;Yt=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?s=u:a.next=u,a=c;var l=t.alternate;l!==null&&(l=l.updateQueue,o=l.lastBaseUpdate,o!==a&&(o===null?l.firstBaseUpdate=u:o.next=u,l.lastBaseUpdate=c))}if(s!==null){var p=i.baseState;a=0,l=u=c=null,o=s;do{var d=o.lane,h=o.eventTime;if((n&d)===d){l!==null&&(l=l.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=t,m=o;switch(d=e,h=r,m.tag){case 1:if(f=m.payload,typeof f=="function"){p=f.call(h,p,d);break e}p=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=m.payload,d=typeof f=="function"?f.call(h,p,d):f,d==null)break e;p=ee({},p,d);break e;case 2:Yt=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[o]:d.push(o))}else h={eventTime:h,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},l===null?(u=l=h,c=p):l=l.next=h,a|=d;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;d=o,o=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(l===null&&(c=p),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=l,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Qr|=a,t.lanes=a,t.memoizedState=p}}function Bh(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(T(191,i));i.call(n)}}}var Oo={},_t=Sr(Oo),go=Sr(Oo),mo=Sr(Oo);function $r(t){if(t===Oo)throw Error(T(174));return t}function nd(t,e){switch(J(mo,e),J(go,t),J(_t,Oo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=jl(e,t)}Q(_t),J(_t,e)}function Nn(){Q(_t),Q(go),Q(mo)}function gS(t){$r(mo.current);var e=$r(_t.current),r=jl(e,t.type);e!==r&&(J(go,t),J(_t,r))}function id(t){go.current===t&&(Q(_t),Q(go))}var X=Sr(0);function qa(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yu=[];function sd(){for(var t=0;t<Yu.length;t++)Yu[t]._workInProgressVersionPrimary=null;Yu.length=0}var ga=Ht.ReactCurrentDispatcher,Xu=Ht.ReactCurrentBatchConfig,Gr=0,Z=null,ue=null,pe=null,Ua=!1,Xs=!1,So=0,AE=0;function Ee(){throw Error(T(321))}function od(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!gt(t[r],e[r]))return!1;return!0}function ad(t,e,r,n,i,s){if(Gr=s,Z=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ga.current=t===null||t.memoizedState===null?bE:DE,t=r(n,i),Xs){s=0;do{if(Xs=!1,So=0,25<=s)throw Error(T(301));s+=1,pe=ue=null,e.updateQueue=null,ga.current=NE,t=r(n,i)}while(Xs)}if(ga.current=$a,e=ue!==null&&ue.next!==null,Gr=0,pe=ue=Z=null,Ua=!1,e)throw Error(T(300));return t}function cd(){var t=So!==0;return So=0,t}function Rt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pe===null?Z.memoizedState=pe=t:pe=pe.next=t,pe}function ot(){if(ue===null){var t=Z.alternate;t=t!==null?t.memoizedState:null}else t=ue.next;var e=pe===null?Z.memoizedState:pe.next;if(e!==null)pe=e,ue=t;else{if(t===null)throw Error(T(310));ue=t,t={memoizedState:ue.memoizedState,baseState:ue.baseState,baseQueue:ue.baseQueue,queue:ue.queue,next:null},pe===null?Z.memoizedState=pe=t:pe=pe.next=t}return pe}function yo(t,e){return typeof e=="function"?e(t):e}function Zu(t){var e=ot(),r=e.queue;if(r===null)throw Error(T(311));r.lastRenderedReducer=t;var n=ue,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var o=a=null,c=null,u=s;do{var l=u.lane;if((Gr&l)===l)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var p={lane:l,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=p,a=n):c=c.next=p,Z.lanes|=l,Qr|=l}u=u.next}while(u!==null&&u!==s);c===null?a=n:c.next=o,gt(n,e.memoizedState)||($e=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,Z.lanes|=s,Qr|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function el(t){var e=ot(),r=e.queue;if(r===null)throw Error(T(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);gt(s,e.memoizedState)||($e=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function mS(){}function SS(t,e){var r=Z,n=ot(),i=e(),s=!gt(n.memoizedState,i);if(s&&(n.memoizedState=i,$e=!0),n=n.queue,ud(PS.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||pe!==null&&pe.memoizedState.tag&1){if(r.flags|=2048,Co(9,CS.bind(null,r,n,i,e),void 0,null),de===null)throw Error(T(349));Gr&30||yS(r,e,i)}return i}function yS(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Z.updateQueue,e===null?(e={lastEffect:null,stores:null},Z.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function CS(t,e,r,n){e.value=r,e.getSnapshot=n,RS(e)&&ES(t)}function PS(t,e,r){return r(function(){RS(e)&&ES(t)})}function RS(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!gt(t,r)}catch{return!0}}function ES(t){var e=Vt(t,1);e!==null&&vt(e,t,1,-1)}function Fh(t){var e=Rt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yo,lastRenderedState:t},e.queue=t,t=t.dispatch=ME.bind(null,Z,t),[e.memoizedState,t]}function Co(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Z.updateQueue,e===null?(e={lastEffect:null,stores:null},Z.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function wS(){return ot().memoizedState}function ma(t,e,r,n){var i=Rt();Z.flags|=t,i.memoizedState=Co(1|e,r,void 0,n===void 0?null:n)}function cc(t,e,r,n){var i=ot();n=n===void 0?null:n;var s=void 0;if(ue!==null){var a=ue.memoizedState;if(s=a.destroy,n!==null&&od(n,a.deps)){i.memoizedState=Co(e,r,s,n);return}}Z.flags|=t,i.memoizedState=Co(1|e,r,s,n)}function qh(t,e){return ma(8390656,8,t,e)}function ud(t,e){return cc(2048,8,t,e)}function IS(t,e){return cc(4,2,t,e)}function TS(t,e){return cc(4,4,t,e)}function _S(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function AS(t,e,r){return r=r!=null?r.concat([t]):null,cc(4,4,_S.bind(null,e,t),r)}function ld(){}function kS(t,e){var r=ot();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&od(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function OS(t,e){var r=ot();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&od(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function MS(t,e,r){return Gr&21?(gt(r,e)||(r=Lm(),Z.lanes|=r,Qr|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$e=!0),t.memoizedState=r)}function kE(t,e){var r=H;H=r!==0&&4>r?r:4,t(!0);var n=Xu.transition;Xu.transition={};try{t(!1),e()}finally{H=r,Xu.transition=n}}function bS(){return ot().memoizedState}function OE(t,e,r){var n=pr(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},DS(t))NS(e,r);else if(r=fS(t,e,r,n),r!==null){var i=Le();vt(r,t,n,i),zS(r,e,n)}}function ME(t,e,r){var n=pr(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(DS(t))NS(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,r);if(i.hasEagerState=!0,i.eagerState=o,gt(o,a)){var c=e.interleaved;c===null?(i.next=i,td(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}r=fS(t,e,i,n),r!==null&&(i=Le(),vt(r,t,n,i),zS(r,e,n))}}function DS(t){var e=t.alternate;return t===Z||e!==null&&e===Z}function NS(t,e){Xs=Ua=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function zS(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,qp(t,r)}}var $a={readContext:st,useCallback:Ee,useContext:Ee,useEffect:Ee,useImperativeHandle:Ee,useInsertionEffect:Ee,useLayoutEffect:Ee,useMemo:Ee,useReducer:Ee,useRef:Ee,useState:Ee,useDebugValue:Ee,useDeferredValue:Ee,useTransition:Ee,useMutableSource:Ee,useSyncExternalStore:Ee,useId:Ee,unstable_isNewReconciler:!1},bE={readContext:st,useCallback:function(t,e){return Rt().memoizedState=[t,e===void 0?null:e],t},useContext:st,useEffect:qh,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,ma(4194308,4,_S.bind(null,e,t),r)},useLayoutEffect:function(t,e){return ma(4194308,4,t,e)},useInsertionEffect:function(t,e){return ma(4,2,t,e)},useMemo:function(t,e){var r=Rt();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Rt();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=OE.bind(null,Z,t),[n.memoizedState,t]},useRef:function(t){var e=Rt();return t={current:t},e.memoizedState=t},useState:Fh,useDebugValue:ld,useDeferredValue:function(t){return Rt().memoizedState=t},useTransition:function(){var t=Fh(!1),e=t[0];return t=kE.bind(null,t[1]),Rt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Z,i=Rt();if(Y){if(r===void 0)throw Error(T(407));r=r()}else{if(r=e(),de===null)throw Error(T(349));Gr&30||yS(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,qh(PS.bind(null,n,s,t),[t]),n.flags|=2048,Co(9,CS.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Rt(),e=de.identifierPrefix;if(Y){var r=Bt,n=xt;r=(n&~(1<<32-ft(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=So++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=AE++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},DE={readContext:st,useCallback:kS,useContext:st,useEffect:ud,useImperativeHandle:AS,useInsertionEffect:IS,useLayoutEffect:TS,useMemo:OS,useReducer:Zu,useRef:wS,useState:function(){return Zu(yo)},useDebugValue:ld,useDeferredValue:function(t){var e=ot();return MS(e,ue.memoizedState,t)},useTransition:function(){var t=Zu(yo)[0],e=ot().memoizedState;return[t,e]},useMutableSource:mS,useSyncExternalStore:SS,useId:bS,unstable_isNewReconciler:!1},NE={readContext:st,useCallback:kS,useContext:st,useEffect:ud,useImperativeHandle:AS,useInsertionEffect:IS,useLayoutEffect:TS,useMemo:OS,useReducer:el,useRef:wS,useState:function(){return el(yo)},useDebugValue:ld,useDeferredValue:function(t){var e=ot();return ue===null?e.memoizedState=t:MS(e,ue.memoizedState,t)},useTransition:function(){var t=el(yo)[0],e=ot().memoizedState;return[t,e]},useMutableSource:mS,useSyncExternalStore:SS,useId:bS,unstable_isNewReconciler:!1};function pt(t,e){if(t&&t.defaultProps){e=ee({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function ip(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ee({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var uc={isMounted:function(t){return(t=t._reactInternals)?tn(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Le(),i=pr(t),s=Ft(n,i);s.payload=e,r!=null&&(s.callback=r),e=ur(t,s,i),e!==null&&(vt(e,t,i,n),va(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Le(),i=pr(t),s=Ft(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=ur(t,s,i),e!==null&&(vt(e,t,i,n),va(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Le(),n=pr(t),i=Ft(r,n);i.tag=2,e!=null&&(i.callback=e),e=ur(t,i,n),e!==null&&(vt(e,t,n,r),va(e,t,n))}};function Uh(t,e,r,n,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!po(r,n)||!po(i,s):!0}function LS(t,e,r){var n=!1,i=vr,s=e.contextType;return typeof s=="object"&&s!==null?s=st(s):(i=We(e)?Kr:be.current,n=e.contextTypes,s=(n=n!=null)?Mn(t,i):vr),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uc,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function $h(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&uc.enqueueReplaceState(e,e.state,null)}function sp(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},rd(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=st(s):(s=We(e)?Kr:be.current,i.context=Mn(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ip(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&uc.enqueueReplaceState(i,i.state,null),Fa(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function zn(t,e){try{var r="",n=e;do r+=cR(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function tl(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function op(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var zE=typeof WeakMap=="function"?WeakMap:Map;function jS(t,e,r){r=Ft(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Wa||(Wa=!0,gp=n),op(t,e)},r}function xS(t,e,r){r=Ft(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){op(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){op(t,e),typeof n!="function"&&(lr===null?lr=new Set([this]):lr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function Vh(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new zE;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=GE.bind(null,t,e,r),e.then(t,t))}function Wh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Hh(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Ft(-1,1),e.tag=2,ur(r,e,1))),r.lanes|=1),t)}var LE=Ht.ReactCurrentOwner,$e=!1;function ze(t,e,r,n){e.child=t===null?hS(e,null,r,n):Dn(e,t.child,r,n)}function Kh(t,e,r,n,i){r=r.render;var s=e.ref;return An(e,i),n=ad(t,e,r,n,s,i),r=cd(),t!==null&&!$e?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Wt(t,e,i)):(Y&&r&&Gp(e),e.flags|=1,ze(t,e,n,i),e.child)}function Jh(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!Sd(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,BS(t,e,s,n,i)):(t=Pa(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:po,r(a,n)&&t.ref===e.ref)return Wt(t,e,i)}return e.flags|=1,t=dr(s,n),t.ref=e.ref,t.return=e,e.child=t}function BS(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(po(s,n)&&t.ref===e.ref)if($e=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&($e=!0);else return e.lanes=t.lanes,Wt(t,e,i)}return ap(t,e,r,n,i)}function FS(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},J(En,Je),Je|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,J(En,Je),Je|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,J(En,Je),Je|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,J(En,Je),Je|=n;return ze(t,e,i,r),e.child}function qS(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function ap(t,e,r,n,i){var s=We(r)?Kr:be.current;return s=Mn(e,s),An(e,i),r=ad(t,e,r,n,s,i),n=cd(),t!==null&&!$e?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Wt(t,e,i)):(Y&&n&&Gp(e),e.flags|=1,ze(t,e,r,i),e.child)}function Gh(t,e,r,n,i){if(We(r)){var s=!0;za(e)}else s=!1;if(An(e,i),e.stateNode===null)Sa(t,e),LS(e,r,n),sp(e,r,n,i),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=st(u):(u=We(r)?Kr:be.current,u=Mn(e,u));var l=r.getDerivedStateFromProps,p=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||c!==u)&&$h(e,a,n,u),Yt=!1;var d=e.memoizedState;a.state=d,Fa(e,n,a,i),c=e.memoizedState,o!==n||d!==c||Ve.current||Yt?(typeof l=="function"&&(ip(e,r,l,n),c=e.memoizedState),(o=Yt||Uh(e,r,o,n,d,c,u))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),a.props=n,a.state=c,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,vS(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:pt(e.type,o),a.props=u,p=e.pendingProps,d=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=st(c):(c=We(r)?Kr:be.current,c=Mn(e,c));var h=r.getDerivedStateFromProps;(l=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==p||d!==c)&&$h(e,a,n,c),Yt=!1,d=e.memoizedState,a.state=d,Fa(e,n,a,i);var f=e.memoizedState;o!==p||d!==f||Ve.current||Yt?(typeof h=="function"&&(ip(e,r,h,n),f=e.memoizedState),(u=Yt||Uh(e,r,u,n,d,f,c)||!1)?(l||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,f,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,f,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=f),a.props=n,a.state=f,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),n=!1)}return cp(t,e,r,n,s,i)}function cp(t,e,r,n,i,s){qS(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&Nh(e,r,!1),Wt(t,e,s);n=e.stateNode,LE.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=Dn(e,t.child,null,s),e.child=Dn(e,null,o,s)):ze(t,e,o,s),e.memoizedState=n.state,i&&Nh(e,r,!0),e.child}function US(t){var e=t.stateNode;e.pendingContext?Dh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Dh(t,e.context,!1),nd(t,e.containerInfo)}function Qh(t,e,r,n,i){return bn(),Yp(i),e.flags|=256,ze(t,e,r,n),e.child}var up={dehydrated:null,treeContext:null,retryLane:0};function lp(t){return{baseLanes:t,cachePool:null,transitions:null}}function $S(t,e,r){var n=e.pendingProps,i=X.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),J(X,i&1),t===null)return rp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=dc(a,n,0,null),t=Wr(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=lp(r),e.memoizedState=up,t):pd(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return jE(t,e,a,n,o,i,r);if(s){s=n.fallback,a=e.mode,i=t.child,o=i.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=dr(i,c),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=dr(o,s):(s=Wr(s,a,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=t.child.memoizedState,a=a===null?lp(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~r,e.memoizedState=up,n}return s=t.child,t=s.sibling,n=dr(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function pd(t,e){return e=dc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ra(t,e,r,n){return n!==null&&Yp(n),Dn(e,t.child,null,r),t=pd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jE(t,e,r,n,i,s,a){if(r)return e.flags&256?(e.flags&=-257,n=tl(Error(T(422))),ra(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=dc({mode:"visible",children:n.children},i,0,null),s=Wr(s,i,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Dn(e,t.child,null,a),e.child.memoizedState=lp(a),e.memoizedState=up,s);if(!(e.mode&1))return ra(t,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(T(419)),n=tl(s,n,void 0),ra(t,e,a,n)}if(o=(a&t.childLanes)!==0,$e||o){if(n=de,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Vt(t,i),vt(n,t,i,-1))}return md(),n=tl(Error(T(421))),ra(t,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=QE.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ge=cr(i.nextSibling),Qe=e,Y=!0,ht=null,t!==null&&(tt[rt++]=xt,tt[rt++]=Bt,tt[rt++]=Jr,xt=t.id,Bt=t.overflow,Jr=e),e=pd(e,n.children),e.flags|=4096,e)}function Yh(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),np(t.return,e,r)}function rl(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function VS(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(ze(t,e,n.children,r),n=X.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Yh(t,r,e);else if(t.tag===19)Yh(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(J(X,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&qa(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),rl(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&qa(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}rl(e,!0,r,null,s);break;case"together":rl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wt(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Qr|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(T(153));if(e.child!==null){for(t=e.child,r=dr(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=dr(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function xE(t,e,r){switch(e.tag){case 3:US(e),bn();break;case 5:gS(e);break;case 1:We(e.type)&&za(e);break;case 4:nd(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;J(xa,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(J(X,X.current&1),e.flags|=128,null):r&e.child.childLanes?$S(t,e,r):(J(X,X.current&1),t=Wt(t,e,r),t!==null?t.sibling:null);J(X,X.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return VS(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),J(X,X.current),n)break;return null;case 22:case 23:return e.lanes=0,FS(t,e,r)}return Wt(t,e,r)}var WS,pp,HS,KS;WS=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};pp=function(){};HS=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,$r(_t.current);var s=null;switch(r){case"input":i=Dl(t,i),n=Dl(t,n),s=[];break;case"select":i=ee({},i,{value:void 0}),n=ee({},n,{value:void 0}),s=[];break;case"textarea":i=Ll(t,i),n=Ll(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Da)}xl(r,n);var a;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(io.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(o=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(io.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&G("scroll",t),s||o===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};KS=function(t,e,r,n){r!==n&&(e.flags|=4)};function ti(t,e){if(!Y)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function we(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function BE(t,e,r){var n=e.pendingProps;switch(Qp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return we(e),null;case 1:return We(e.type)&&Na(),we(e),null;case 3:return n=e.stateNode,Nn(),Q(Ve),Q(be),sd(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ea(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ht!==null&&(yp(ht),ht=null))),pp(t,e),we(e),null;case 5:id(e);var i=$r(mo.current);if(r=e.type,t!==null&&e.stateNode!=null)HS(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(T(166));return we(e),null}if(t=$r(_t.current),ea(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Et]=e,n[vo]=s,t=(e.mode&1)!==0,r){case"dialog":G("cancel",n),G("close",n);break;case"iframe":case"object":case"embed":G("load",n);break;case"video":case"audio":for(i=0;i<Ws.length;i++)G(Ws[i],n);break;case"source":G("error",n);break;case"img":case"image":case"link":G("error",n),G("load",n);break;case"details":G("toggle",n);break;case"input":oh(n,s),G("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},G("invalid",n);break;case"textarea":ch(n,s),G("invalid",n)}xl(r,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&Zo(n.textContent,o,t),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Zo(n.textContent,o,t),i=["children",""+o]):io.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&G("scroll",n)}switch(r){case"input":Wo(n),ah(n,s,!0);break;case"textarea":Wo(n),uh(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Da)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Pm(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Et]=e,t[vo]=n,WS(t,e,!1,!1),e.stateNode=t;e:{switch(a=Bl(r,n),r){case"dialog":G("cancel",t),G("close",t),i=n;break;case"iframe":case"object":case"embed":G("load",t),i=n;break;case"video":case"audio":for(i=0;i<Ws.length;i++)G(Ws[i],t);i=n;break;case"source":G("error",t),i=n;break;case"img":case"image":case"link":G("error",t),G("load",t),i=n;break;case"details":G("toggle",t),i=n;break;case"input":oh(t,n),i=Dl(t,n),G("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=ee({},n,{value:void 0}),G("invalid",t);break;case"textarea":ch(t,n),i=Ll(t,n),G("invalid",t);break;default:i=n}xl(r,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var c=o[s];s==="style"?wm(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Rm(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&so(t,c):typeof c=="number"&&so(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(io.hasOwnProperty(s)?c!=null&&s==="onScroll"&&G("scroll",t):c!=null&&zp(t,s,c,a))}switch(r){case"input":Wo(t),ah(t,n,!1);break;case"textarea":Wo(t),uh(t);break;case"option":n.value!=null&&t.setAttribute("value",""+fr(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?wn(t,!!n.multiple,s,!1):n.defaultValue!=null&&wn(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Da)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return we(e),null;case 6:if(t&&e.stateNode!=null)KS(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(T(166));if(r=$r(mo.current),$r(_t.current),ea(e)){if(n=e.stateNode,r=e.memoizedProps,n[Et]=e,(s=n.nodeValue!==r)&&(t=Qe,t!==null))switch(t.tag){case 3:Zo(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zo(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Et]=e,e.stateNode=n}return we(e),null;case 13:if(Q(X),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Y&&Ge!==null&&e.mode&1&&!(e.flags&128))pS(),bn(),e.flags|=98560,s=!1;else if(s=ea(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(T(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(T(317));s[Et]=e}else bn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;we(e),s=!1}else ht!==null&&(yp(ht),ht=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||X.current&1?le===0&&(le=3):md())),e.updateQueue!==null&&(e.flags|=4),we(e),null);case 4:return Nn(),pp(t,e),t===null&&ho(e.stateNode.containerInfo),we(e),null;case 10:return ed(e.type._context),we(e),null;case 17:return We(e.type)&&Na(),we(e),null;case 19:if(Q(X),s=e.memoizedState,s===null)return we(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)ti(s,!1);else{if(le!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=qa(t),a!==null){for(e.flags|=128,ti(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return J(X,X.current&1|2),e.child}t=t.sibling}s.tail!==null&&se()>Ln&&(e.flags|=128,n=!0,ti(s,!1),e.lanes=4194304)}else{if(!n)if(t=qa(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ti(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Y)return we(e),null}else 2*se()-s.renderingStartTime>Ln&&r!==1073741824&&(e.flags|=128,n=!0,ti(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(r=s.last,r!==null?r.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=se(),e.sibling=null,r=X.current,J(X,n?r&1|2:r&1),e):(we(e),null);case 22:case 23:return gd(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Je&1073741824&&(we(e),e.subtreeFlags&6&&(e.flags|=8192)):we(e),null;case 24:return null;case 25:return null}throw Error(T(156,e.tag))}function FE(t,e){switch(Qp(e),e.tag){case 1:return We(e.type)&&Na(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Nn(),Q(Ve),Q(be),sd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return id(e),null;case 13:if(Q(X),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(T(340));bn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Q(X),null;case 4:return Nn(),null;case 10:return ed(e.type._context),null;case 22:case 23:return gd(),null;case 24:return null;default:return null}}var na=!1,Me=!1,qE=typeof WeakSet=="function"?WeakSet:Set,A=null;function Rn(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){re(t,e,n)}else r.current=null}function dp(t,e,r){try{r()}catch(n){re(t,e,n)}}var Xh=!1;function UE(t,e){if(Gl=Oa,t=Xm(),Jp(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,o=-1,c=-1,u=0,l=0,p=t,d=null;t:for(;;){for(var h;p!==r||i!==0&&p.nodeType!==3||(o=a+i),p!==s||n!==0&&p.nodeType!==3||(c=a+n),p.nodeType===3&&(a+=p.nodeValue.length),(h=p.firstChild)!==null;)d=p,p=h;for(;;){if(p===t)break t;if(d===r&&++u===i&&(o=a),d===s&&++l===n&&(c=a),(h=p.nextSibling)!==null)break;p=d,d=p.parentNode}p=h}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ql={focusedElem:t,selectionRange:r},Oa=!1,A=e;A!==null;)if(e=A,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,A=t;else for(;A!==null;){e=A;try{var f=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var m=f.memoizedProps,y=f.memoizedState,v=e.stateNode,g=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:pt(e.type,m),y);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(C){re(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,A=t;break}A=e.return}return f=Xh,Xh=!1,f}function Zs(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&dp(e,r,s)}i=i.next}while(i!==n)}}function lc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function hp(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function JS(t){var e=t.alternate;e!==null&&(t.alternate=null,JS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Et],delete e[vo],delete e[Zl],delete e[wE],delete e[IE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function GS(t){return t.tag===5||t.tag===3||t.tag===4}function Zh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||GS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fp(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Da));else if(n!==4&&(t=t.child,t!==null))for(fp(t,e,r),t=t.sibling;t!==null;)fp(t,e,r),t=t.sibling}function vp(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(vp(t,e,r),t=t.sibling;t!==null;)vp(t,e,r),t=t.sibling}var ge=null,dt=!1;function Gt(t,e,r){for(r=r.child;r!==null;)QS(t,e,r),r=r.sibling}function QS(t,e,r){if(Tt&&typeof Tt.onCommitFiberUnmount=="function")try{Tt.onCommitFiberUnmount(rc,r)}catch{}switch(r.tag){case 5:Me||Rn(r,e);case 6:var n=ge,i=dt;ge=null,Gt(t,e,r),ge=n,dt=i,ge!==null&&(dt?(t=ge,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):ge.removeChild(r.stateNode));break;case 18:ge!==null&&(dt?(t=ge,r=r.stateNode,t.nodeType===8?Gu(t.parentNode,r):t.nodeType===1&&Gu(t,r),uo(t)):Gu(ge,r.stateNode));break;case 4:n=ge,i=dt,ge=r.stateNode.containerInfo,dt=!0,Gt(t,e,r),ge=n,dt=i;break;case 0:case 11:case 14:case 15:if(!Me&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&dp(r,e,a),i=i.next}while(i!==n)}Gt(t,e,r);break;case 1:if(!Me&&(Rn(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){re(r,e,o)}Gt(t,e,r);break;case 21:Gt(t,e,r);break;case 22:r.mode&1?(Me=(n=Me)||r.memoizedState!==null,Gt(t,e,r),Me=n):Gt(t,e,r);break;default:Gt(t,e,r)}}function ef(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new qE),e.forEach(function(n){var i=YE.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function lt(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:ge=o.stateNode,dt=!1;break e;case 3:ge=o.stateNode.containerInfo,dt=!0;break e;case 4:ge=o.stateNode.containerInfo,dt=!0;break e}o=o.return}if(ge===null)throw Error(T(160));QS(s,a,i),ge=null,dt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){re(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)YS(e,t),e=e.sibling}function YS(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(lt(e,t),Pt(t),n&4){try{Zs(3,t,t.return),lc(3,t)}catch(m){re(t,t.return,m)}try{Zs(5,t,t.return)}catch(m){re(t,t.return,m)}}break;case 1:lt(e,t),Pt(t),n&512&&r!==null&&Rn(r,r.return);break;case 5:if(lt(e,t),Pt(t),n&512&&r!==null&&Rn(r,r.return),t.flags&32){var i=t.stateNode;try{so(i,"")}catch(m){re(t,t.return,m)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=r!==null?r.memoizedProps:s,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&ym(i,s),Bl(o,a);var u=Bl(o,s);for(a=0;a<c.length;a+=2){var l=c[a],p=c[a+1];l==="style"?wm(i,p):l==="dangerouslySetInnerHTML"?Rm(i,p):l==="children"?so(i,p):zp(i,l,p,u)}switch(o){case"input":Nl(i,s);break;case"textarea":Cm(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?wn(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?wn(i,!!s.multiple,s.defaultValue,!0):wn(i,!!s.multiple,s.multiple?[]:"",!1))}i[vo]=s}catch(m){re(t,t.return,m)}}break;case 6:if(lt(e,t),Pt(t),n&4){if(t.stateNode===null)throw Error(T(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){re(t,t.return,m)}}break;case 3:if(lt(e,t),Pt(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{uo(e.containerInfo)}catch(m){re(t,t.return,m)}break;case 4:lt(e,t),Pt(t);break;case 13:lt(e,t),Pt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(fd=se())),n&4&&ef(t);break;case 22:if(l=r!==null&&r.memoizedState!==null,t.mode&1?(Me=(u=Me)||l,lt(e,t),Me=u):lt(e,t),Pt(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!l&&t.mode&1)for(A=t,l=t.child;l!==null;){for(p=A=l;A!==null;){switch(d=A,h=d.child,d.tag){case 0:case 11:case 14:case 15:Zs(4,d,d.return);break;case 1:Rn(d,d.return);var f=d.stateNode;if(typeof f.componentWillUnmount=="function"){n=d,r=d.return;try{e=n,f.props=e.memoizedProps,f.state=e.memoizedState,f.componentWillUnmount()}catch(m){re(n,r,m)}}break;case 5:Rn(d,d.return);break;case 22:if(d.memoizedState!==null){rf(p);continue}}h!==null?(h.return=d,A=h):rf(p)}l=l.sibling}e:for(l=null,p=t;;){if(p.tag===5){if(l===null){l=p;try{i=p.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=p.stateNode,c=p.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Em("display",a))}catch(m){re(t,t.return,m)}}}else if(p.tag===6){if(l===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(m){re(t,t.return,m)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;l===p&&(l=null),p=p.return}l===p&&(l=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:lt(e,t),Pt(t),n&4&&ef(t);break;case 21:break;default:lt(e,t),Pt(t)}}function Pt(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(GS(r)){var n=r;break e}r=r.return}throw Error(T(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(so(i,""),n.flags&=-33);var s=Zh(t);vp(t,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,o=Zh(t);fp(t,o,a);break;default:throw Error(T(161))}}catch(c){re(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $E(t,e,r){A=t,XS(t)}function XS(t,e,r){for(var n=(t.mode&1)!==0;A!==null;){var i=A,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||na;if(!a){var o=i.alternate,c=o!==null&&o.memoizedState!==null||Me;o=na;var u=Me;if(na=a,(Me=c)&&!u)for(A=i;A!==null;)a=A,c=a.child,a.tag===22&&a.memoizedState!==null?nf(i):c!==null?(c.return=a,A=c):nf(i);for(;s!==null;)A=s,XS(s),s=s.sibling;A=i,na=o,Me=u}tf(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,A=s):tf(t)}}function tf(t){for(;A!==null;){var e=A;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Me||lc(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Me)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:pt(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Bh(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Bh(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var l=u.memoizedState;if(l!==null){var p=l.dehydrated;p!==null&&uo(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}Me||e.flags&512&&hp(e)}catch(d){re(e,e.return,d)}}if(e===t){A=null;break}if(r=e.sibling,r!==null){r.return=e.return,A=r;break}A=e.return}}function rf(t){for(;A!==null;){var e=A;if(e===t){A=null;break}var r=e.sibling;if(r!==null){r.return=e.return,A=r;break}A=e.return}}function nf(t){for(;A!==null;){var e=A;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{lc(4,e)}catch(c){re(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){re(e,i,c)}}var s=e.return;try{hp(e)}catch(c){re(e,s,c)}break;case 5:var a=e.return;try{hp(e)}catch(c){re(e,a,c)}}}catch(c){re(e,e.return,c)}if(e===t){A=null;break}var o=e.sibling;if(o!==null){o.return=e.return,A=o;break}A=e.return}}var VE=Math.ceil,Va=Ht.ReactCurrentDispatcher,dd=Ht.ReactCurrentOwner,it=Ht.ReactCurrentBatchConfig,V=0,de=null,ce=null,Se=0,Je=0,En=Sr(0),le=0,Po=null,Qr=0,pc=0,hd=0,eo=null,qe=null,fd=0,Ln=1/0,zt=null,Wa=!1,gp=null,lr=null,ia=!1,nr=null,Ha=0,to=0,mp=null,ya=-1,Ca=0;function Le(){return V&6?se():ya!==-1?ya:ya=se()}function pr(t){return t.mode&1?V&2&&Se!==0?Se&-Se:_E.transition!==null?(Ca===0&&(Ca=Lm()),Ca):(t=H,t!==0||(t=window.event,t=t===void 0?16:$m(t.type)),t):1}function vt(t,e,r,n){if(50<to)throw to=0,mp=null,Error(T(185));_o(t,r,n),(!(V&2)||t!==de)&&(t===de&&(!(V&2)&&(pc|=r),le===4&&tr(t,Se)),He(t,n),r===1&&V===0&&!(e.mode&1)&&(Ln=se()+500,ac&&yr()))}function He(t,e){var r=t.callbackNode;_R(t,e);var n=ka(t,t===de?Se:0);if(n===0)r!==null&&dh(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&dh(r),e===1)t.tag===0?TE(sf.bind(null,t)):cS(sf.bind(null,t)),RE(function(){!(V&6)&&yr()}),r=null;else{switch(jm(n)){case 1:r=Fp;break;case 4:r=Nm;break;case 16:r=Aa;break;case 536870912:r=zm;break;default:r=Aa}r=oy(r,ZS.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function ZS(t,e){if(ya=-1,Ca=0,V&6)throw Error(T(327));var r=t.callbackNode;if(kn()&&t.callbackNode!==r)return null;var n=ka(t,t===de?Se:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Ka(t,n);else{e=n;var i=V;V|=2;var s=ty();(de!==t||Se!==e)&&(zt=null,Ln=se()+500,Vr(t,e));do try{KE();break}catch(o){ey(t,o)}while(!0);Zp(),Va.current=s,V=i,ce!==null?e=0:(de=null,Se=0,e=le)}if(e!==0){if(e===2&&(i=Vl(t),i!==0&&(n=i,e=Sp(t,i))),e===1)throw r=Po,Vr(t,0),tr(t,n),He(t,se()),r;if(e===6)tr(t,n);else{if(i=t.current.alternate,!(n&30)&&!WE(i)&&(e=Ka(t,n),e===2&&(s=Vl(t),s!==0&&(n=s,e=Sp(t,s))),e===1))throw r=Po,Vr(t,0),tr(t,n),He(t,se()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(T(345));case 2:Fr(t,qe,zt);break;case 3:if(tr(t,n),(n&130023424)===n&&(e=fd+500-se(),10<e)){if(ka(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Le(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Xl(Fr.bind(null,t,qe,zt),e);break}Fr(t,qe,zt);break;case 4:if(tr(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-ft(n);s=1<<a,a=e[a],a>i&&(i=a),n&=~s}if(n=i,n=se()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*VE(n/1960))-n,10<n){t.timeoutHandle=Xl(Fr.bind(null,t,qe,zt),n);break}Fr(t,qe,zt);break;case 5:Fr(t,qe,zt);break;default:throw Error(T(329))}}}return He(t,se()),t.callbackNode===r?ZS.bind(null,t):null}function Sp(t,e){var r=eo;return t.current.memoizedState.isDehydrated&&(Vr(t,e).flags|=256),t=Ka(t,e),t!==2&&(e=qe,qe=r,e!==null&&yp(e)),t}function yp(t){qe===null?qe=t:qe.push.apply(qe,t)}function WE(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!gt(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function tr(t,e){for(e&=~hd,e&=~pc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-ft(e),n=1<<r;t[r]=-1,e&=~n}}function sf(t){if(V&6)throw Error(T(327));kn();var e=ka(t,0);if(!(e&1))return He(t,se()),null;var r=Ka(t,e);if(t.tag!==0&&r===2){var n=Vl(t);n!==0&&(e=n,r=Sp(t,n))}if(r===1)throw r=Po,Vr(t,0),tr(t,e),He(t,se()),r;if(r===6)throw Error(T(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Fr(t,qe,zt),He(t,se()),null}function vd(t,e){var r=V;V|=1;try{return t(e)}finally{V=r,V===0&&(Ln=se()+500,ac&&yr())}}function Yr(t){nr!==null&&nr.tag===0&&!(V&6)&&kn();var e=V;V|=1;var r=it.transition,n=H;try{if(it.transition=null,H=1,t)return t()}finally{H=n,it.transition=r,V=e,!(V&6)&&yr()}}function gd(){Je=En.current,Q(En)}function Vr(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,PE(r)),ce!==null)for(r=ce.return;r!==null;){var n=r;switch(Qp(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Na();break;case 3:Nn(),Q(Ve),Q(be),sd();break;case 5:id(n);break;case 4:Nn();break;case 13:Q(X);break;case 19:Q(X);break;case 10:ed(n.type._context);break;case 22:case 23:gd()}r=r.return}if(de=t,ce=t=dr(t.current,null),Se=Je=e,le=0,Po=null,hd=pc=Qr=0,qe=eo=null,Ur!==null){for(e=0;e<Ur.length;e++)if(r=Ur[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}r.pending=n}Ur=null}return t}function ey(t,e){do{var r=ce;try{if(Zp(),ga.current=$a,Ua){for(var n=Z.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ua=!1}if(Gr=0,pe=ue=Z=null,Xs=!1,So=0,dd.current=null,r===null||r.return===null){le=1,Po=e,ce=null;break}e:{var s=t,a=r.return,o=r,c=e;if(e=Se,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,l=o,p=l.tag;if(!(l.mode&1)&&(p===0||p===11||p===15)){var d=l.alternate;d?(l.updateQueue=d.updateQueue,l.memoizedState=d.memoizedState,l.lanes=d.lanes):(l.updateQueue=null,l.memoizedState=null)}var h=Wh(a);if(h!==null){h.flags&=-257,Hh(h,a,o,s,e),h.mode&1&&Vh(s,u,e),e=h,c=u;var f=e.updateQueue;if(f===null){var m=new Set;m.add(c),e.updateQueue=m}else f.add(c);break e}else{if(!(e&1)){Vh(s,u,e),md();break e}c=Error(T(426))}}else if(Y&&o.mode&1){var y=Wh(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Hh(y,a,o,s,e),Yp(zn(c,o));break e}}s=c=zn(c,o),le!==4&&(le=2),eo===null?eo=[s]:eo.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=jS(s,c,e);xh(s,v);break e;case 1:o=c;var g=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(lr===null||!lr.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=xS(s,o,e);xh(s,C);break e}}s=s.return}while(s!==null)}ny(r)}catch(P){e=P,ce===r&&r!==null&&(ce=r=r.return);continue}break}while(!0)}function ty(){var t=Va.current;return Va.current=$a,t===null?$a:t}function md(){(le===0||le===3||le===2)&&(le=4),de===null||!(Qr&268435455)&&!(pc&268435455)||tr(de,Se)}function Ka(t,e){var r=V;V|=2;var n=ty();(de!==t||Se!==e)&&(zt=null,Vr(t,e));do try{HE();break}catch(i){ey(t,i)}while(!0);if(Zp(),V=r,Va.current=n,ce!==null)throw Error(T(261));return de=null,Se=0,le}function HE(){for(;ce!==null;)ry(ce)}function KE(){for(;ce!==null&&!SR();)ry(ce)}function ry(t){var e=sy(t.alternate,t,Je);t.memoizedProps=t.pendingProps,e===null?ny(t):ce=e,dd.current=null}function ny(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=FE(r,e),r!==null){r.flags&=32767,ce=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{le=6,ce=null;return}}else if(r=BE(r,e,Je),r!==null){ce=r;return}if(e=e.sibling,e!==null){ce=e;return}ce=e=t}while(e!==null);le===0&&(le=5)}function Fr(t,e,r){var n=H,i=it.transition;try{it.transition=null,H=1,JE(t,e,r,n)}finally{it.transition=i,H=n}return null}function JE(t,e,r,n){do kn();while(nr!==null);if(V&6)throw Error(T(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(T(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(AR(t,s),t===de&&(ce=de=null,Se=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ia||(ia=!0,oy(Aa,function(){return kn(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=it.transition,it.transition=null;var a=H;H=1;var o=V;V|=4,dd.current=null,UE(t,r),YS(r,t),fE(Ql),Oa=!!Gl,Ql=Gl=null,t.current=r,$E(r),yR(),V=o,H=a,it.transition=s}else t.current=r;if(ia&&(ia=!1,nr=t,Ha=i),s=t.pendingLanes,s===0&&(lr=null),RR(r.stateNode),He(t,se()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Wa)throw Wa=!1,t=gp,gp=null,t;return Ha&1&&t.tag!==0&&kn(),s=t.pendingLanes,s&1?t===mp?to++:(to=0,mp=t):to=0,yr(),null}function kn(){if(nr!==null){var t=jm(Ha),e=it.transition,r=H;try{if(it.transition=null,H=16>t?16:t,nr===null)var n=!1;else{if(t=nr,nr=null,Ha=0,V&6)throw Error(T(331));var i=V;for(V|=4,A=t.current;A!==null;){var s=A,a=s.child;if(A.flags&16){var o=s.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(A=u;A!==null;){var l=A;switch(l.tag){case 0:case 11:case 15:Zs(8,l,s)}var p=l.child;if(p!==null)p.return=l,A=p;else for(;A!==null;){l=A;var d=l.sibling,h=l.return;if(JS(l),l===u){A=null;break}if(d!==null){d.return=h,A=d;break}A=h}}}var f=s.alternate;if(f!==null){var m=f.child;if(m!==null){f.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}A=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,A=a;else e:for(;A!==null;){if(s=A,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Zs(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,A=v;break e}A=s.return}}var g=t.current;for(A=g;A!==null;){a=A;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,A=S;else e:for(a=g;A!==null;){if(o=A,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:lc(9,o)}}catch(P){re(o,o.return,P)}if(o===a){A=null;break e}var C=o.sibling;if(C!==null){C.return=o.return,A=C;break e}A=o.return}}if(V=i,yr(),Tt&&typeof Tt.onPostCommitFiberRoot=="function")try{Tt.onPostCommitFiberRoot(rc,t)}catch{}n=!0}return n}finally{H=r,it.transition=e}}return!1}function of(t,e,r){e=zn(r,e),e=jS(t,e,1),t=ur(t,e,1),e=Le(),t!==null&&(_o(t,1,e),He(t,e))}function re(t,e,r){if(t.tag===3)of(t,t,r);else for(;e!==null;){if(e.tag===3){of(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(lr===null||!lr.has(n))){t=zn(r,t),t=xS(e,t,1),e=ur(e,t,1),t=Le(),e!==null&&(_o(e,1,t),He(e,t));break}}e=e.return}}function GE(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Le(),t.pingedLanes|=t.suspendedLanes&r,de===t&&(Se&r)===r&&(le===4||le===3&&(Se&130023424)===Se&&500>se()-fd?Vr(t,0):hd|=r),He(t,e)}function iy(t,e){e===0&&(t.mode&1?(e=Jo,Jo<<=1,!(Jo&130023424)&&(Jo=4194304)):e=1);var r=Le();t=Vt(t,e),t!==null&&(_o(t,e,r),He(t,r))}function QE(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),iy(t,r)}function YE(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(T(314))}n!==null&&n.delete(e),iy(t,r)}var sy;sy=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ve.current)$e=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return $e=!1,xE(t,e,r);$e=!!(t.flags&131072)}else $e=!1,Y&&e.flags&1048576&&uS(e,ja,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Sa(t,e),t=e.pendingProps;var i=Mn(e,be.current);An(e,r),i=ad(null,e,n,t,i,r);var s=cd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,We(n)?(s=!0,za(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,rd(e),i.updater=uc,e.stateNode=i,i._reactInternals=e,sp(e,n,t,r),e=cp(null,e,n,!0,s,r)):(e.tag=0,Y&&s&&Gp(e),ze(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Sa(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=ZE(n),t=pt(n,t),i){case 0:e=ap(null,e,n,t,r);break e;case 1:e=Gh(null,e,n,t,r);break e;case 11:e=Kh(null,e,n,t,r);break e;case 14:e=Jh(null,e,n,pt(n.type,t),r);break e}throw Error(T(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:pt(n,i),ap(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:pt(n,i),Gh(t,e,n,i,r);case 3:e:{if(US(e),t===null)throw Error(T(387));n=e.pendingProps,s=e.memoizedState,i=s.element,vS(t,e),Fa(e,n,null,r);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=zn(Error(T(423)),e),e=Qh(t,e,n,r,i);break e}else if(n!==i){i=zn(Error(T(424)),e),e=Qh(t,e,n,r,i);break e}else for(Ge=cr(e.stateNode.containerInfo.firstChild),Qe=e,Y=!0,ht=null,r=hS(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(bn(),n===i){e=Wt(t,e,r);break e}ze(t,e,n,r)}e=e.child}return e;case 5:return gS(e),t===null&&rp(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,Yl(n,i)?a=null:s!==null&&Yl(n,s)&&(e.flags|=32),qS(t,e),ze(t,e,a,r),e.child;case 6:return t===null&&rp(e),null;case 13:return $S(t,e,r);case 4:return nd(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Dn(e,null,n,r):ze(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:pt(n,i),Kh(t,e,n,i,r);case 7:return ze(t,e,e.pendingProps,r),e.child;case 8:return ze(t,e,e.pendingProps.children,r),e.child;case 12:return ze(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,J(xa,n._currentValue),n._currentValue=a,s!==null)if(gt(s.value,a)){if(s.children===i.children&&!Ve.current){e=Wt(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=Ft(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var l=u.pending;l===null?c.next=c:(c.next=l.next,l.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),np(s.return,r,e),o.lanes|=r;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(T(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),np(a,r,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}ze(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,An(e,r),i=st(i),n=n(i),e.flags|=1,ze(t,e,n,r),e.child;case 14:return n=e.type,i=pt(n,e.pendingProps),i=pt(n.type,i),Jh(t,e,n,i,r);case 15:return BS(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:pt(n,i),Sa(t,e),e.tag=1,We(n)?(t=!0,za(e)):t=!1,An(e,r),LS(e,n,i),sp(e,n,i,r),cp(null,e,n,!0,t,r);case 19:return VS(t,e,r);case 22:return FS(t,e,r)}throw Error(T(156,e.tag))};function oy(t,e){return Dm(t,e)}function XE(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nt(t,e,r,n){return new XE(t,e,r,n)}function Sd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ZE(t){if(typeof t=="function")return Sd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===jp)return 11;if(t===xp)return 14}return 2}function dr(t,e){var r=t.alternate;return r===null?(r=nt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Pa(t,e,r,n,i,s){var a=2;if(n=t,typeof t=="function")Sd(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case hn:return Wr(r.children,i,s,e);case Lp:a=8,i|=8;break;case kl:return t=nt(12,r,e,i|2),t.elementType=kl,t.lanes=s,t;case Ol:return t=nt(13,r,e,i),t.elementType=Ol,t.lanes=s,t;case Ml:return t=nt(19,r,e,i),t.elementType=Ml,t.lanes=s,t;case gm:return dc(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fm:a=10;break e;case vm:a=9;break e;case jp:a=11;break e;case xp:a=14;break e;case Qt:a=16,n=null;break e}throw Error(T(130,t==null?t:typeof t,""))}return e=nt(a,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function Wr(t,e,r,n){return t=nt(7,t,n,e),t.lanes=r,t}function dc(t,e,r,n){return t=nt(22,t,n,e),t.elementType=gm,t.lanes=r,t.stateNode={isHidden:!1},t}function nl(t,e,r){return t=nt(6,t,null,e),t.lanes=r,t}function il(t,e,r){return e=nt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function e1(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xu(0),this.expirationTimes=xu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xu(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function yd(t,e,r,n,i,s,a,o,c){return t=new e1(t,e,r,o,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=nt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},rd(s),t}function t1(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dn,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function ay(t){if(!t)return vr;t=t._reactInternals;e:{if(tn(t)!==t||t.tag!==1)throw Error(T(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(We(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(T(171))}if(t.tag===1){var r=t.type;if(We(r))return aS(t,r,e)}return e}function cy(t,e,r,n,i,s,a,o,c){return t=yd(r,n,!0,t,i,s,a,o,c),t.context=ay(null),r=t.current,n=Le(),i=pr(r),s=Ft(n,i),s.callback=e??null,ur(r,s,i),t.current.lanes=i,_o(t,i,n),He(t,n),t}function hc(t,e,r,n){var i=e.current,s=Le(),a=pr(i);return r=ay(r),e.context===null?e.context=r:e.pendingContext=r,e=Ft(s,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=ur(i,e,a),t!==null&&(vt(t,i,a,s),va(t,i,a)),a}function Ja(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function af(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Cd(t,e){af(t,e),(t=t.alternate)&&af(t,e)}function r1(){return null}var uy=typeof reportError=="function"?reportError:function(t){console.error(t)};function Pd(t){this._internalRoot=t}fc.prototype.render=Pd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(T(409));hc(t,e,null,null)};fc.prototype.unmount=Pd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Yr(function(){hc(null,t,null,null)}),e[$t]=null}};function fc(t){this._internalRoot=t}fc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Fm();t={blockedOn:null,target:t,priority:e};for(var r=0;r<er.length&&e!==0&&e<er[r].priority;r++);er.splice(r,0,t),r===0&&Um(t)}};function Rd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cf(){}function n1(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=Ja(a);s.call(u)}}var a=cy(e,n,t,0,null,!1,!1,"",cf);return t._reactRootContainer=a,t[$t]=a.current,ho(t.nodeType===8?t.parentNode:t),Yr(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=Ja(c);o.call(u)}}var c=yd(t,0,!1,null,null,!1,!1,"",cf);return t._reactRootContainer=c,t[$t]=c.current,ho(t.nodeType===8?t.parentNode:t),Yr(function(){hc(e,c,r,n)}),c}function gc(t,e,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var c=Ja(a);o.call(c)}}hc(e,a,t,i)}else a=n1(r,e,t,i,n);return Ja(a)}xm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Vs(e.pendingLanes);r!==0&&(qp(e,r|1),He(e,se()),!(V&6)&&(Ln=se()+500,yr()))}break;case 13:Yr(function(){var n=Vt(t,1);if(n!==null){var i=Le();vt(n,t,1,i)}}),Cd(t,1)}};Up=function(t){if(t.tag===13){var e=Vt(t,134217728);if(e!==null){var r=Le();vt(e,t,134217728,r)}Cd(t,134217728)}};Bm=function(t){if(t.tag===13){var e=pr(t),r=Vt(t,e);if(r!==null){var n=Le();vt(r,t,e,n)}Cd(t,e)}};Fm=function(){return H};qm=function(t,e){var r=H;try{return H=t,e()}finally{H=r}};ql=function(t,e,r){switch(e){case"input":if(Nl(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=oc(n);if(!i)throw Error(T(90));Sm(n),Nl(n,i)}}}break;case"textarea":Cm(t,r);break;case"select":e=r.value,e!=null&&wn(t,!!r.multiple,e,!1)}};_m=vd;Am=Yr;var i1={usingClientEntryPoint:!1,Events:[ko,mn,oc,Im,Tm,vd]},ri={findFiberByHostInstance:qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},s1={bundleType:ri.bundleType,version:ri.version,rendererPackageName:ri.rendererPackageName,rendererConfig:ri.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ht.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Mm(t),t===null?null:t.stateNode},findFiberByHostInstance:ri.findFiberByHostInstance||r1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sa.isDisabled&&sa.supportsFiber)try{rc=sa.inject(s1),Tt=sa}catch{}}Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=i1;Xe.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rd(e))throw Error(T(200));return t1(t,e,null,r)};Xe.createRoot=function(t,e){if(!Rd(t))throw Error(T(299));var r=!1,n="",i=uy;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=yd(t,1,!1,null,null,r,!1,n,i),t[$t]=e.current,ho(t.nodeType===8?t.parentNode:t),new Pd(e)};Xe.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(T(188)):(t=Object.keys(t).join(","),Error(T(268,t)));return t=Mm(e),t=t===null?null:t.stateNode,t};Xe.flushSync=function(t){return Yr(t)};Xe.hydrate=function(t,e,r){if(!vc(e))throw Error(T(200));return gc(null,t,e,!0,r)};Xe.hydrateRoot=function(t,e,r){if(!Rd(t))throw Error(T(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",a=uy;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=cy(e,null,t,1,r??null,i,!1,s,a),t[$t]=e.current,ho(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new fc(e)};Xe.render=function(t,e,r){if(!vc(e))throw Error(T(200));return gc(null,t,e,!1,r)};Xe.unmountComponentAtNode=function(t){if(!vc(t))throw Error(T(40));return t._reactRootContainer?(Yr(function(){gc(null,null,t,!1,function(){t._reactRootContainer=null,t[$t]=null})}),!0):!1};Xe.unstable_batchedUpdates=vd;Xe.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!vc(r))throw Error(T(200));if(t==null||t._reactInternals===void 0)throw Error(T(38));return gc(t,e,r,!1,n)};Xe.version="18.3.1-next-f1338f8080-20240426";function ly(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ly)}catch(t){console.error(t)}}ly(),lm.exports=Xe;var o1=lm.exports,Ed,uf=o1;Ed=uf.createRoot,uf.hydrateRoot;const a1=(...t)=>{console!=null&&console.warn&&(Hr(t[0])&&(t[0]=`react-i18next:: ${t[0]}`),console.warn(...t))},lf={},Cp=(...t)=>{Hr(t[0])&&lf[t[0]]||(Hr(t[0])&&(lf[t[0]]=new Date),a1(...t))},py=(t,e)=>()=>{if(t.isInitialized)e();else{const r=()=>{setTimeout(()=>{t.off("initialized",r)},0),e()};t.on("initialized",r)}},pf=(t,e,r)=>{t.loadNamespaces(e,py(t,r))},df=(t,e,r,n)=>{Hr(r)&&(r=[r]),r.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,py(t,n))},c1=(t,e,r={})=>!e.languages||!e.languages.length?(Cp("i18n.languages were undefined or empty",e.languages),!0):e.hasLoadedNamespace(t,{lng:r.lng,precheck:(n,i)=>{var s;if(((s=r.bindI18n)==null?void 0:s.indexOf("languageChanging"))>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!i(n.isLanguageChangingTo,t))return!1}}),Hr=t=>typeof t=="string",u1=t=>typeof t=="object"&&t!==null,l1=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,p1={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},d1=t=>p1[t],h1=t=>t.replace(l1,d1);let Pp={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:h1};const f1=(t={})=>{Pp={...Pp,...t}},v1=()=>Pp;let dy;const g1=t=>{dy=t},m1=()=>dy,S1={type:"3rdParty",init(t){f1(t.options.react),g1(t)}},y1=Ue.createContext();class C1{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const P1=(t,e)=>{const r=Ue.useRef();return Ue.useEffect(()=>{r.current=t},[t,e]),r.current},hy=(t,e,r,n)=>t.getFixedT(e,r,n),R1=(t,e,r,n)=>Ue.useCallback(hy(t,e,r,n),[t,e,r,n]),E1=(t,e={})=>{var C,P,R,w;const{i18n:r}=e,{i18n:n,defaultNS:i}=Ue.useContext(y1)||{},s=r||n||m1();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new C1),!s){Cp("You will need to pass in an i18next instance by using initReactI18next");const E=(O,W)=>Hr(W)?W:u1(W)&&Hr(W.defaultValue)?W.defaultValue:Array.isArray(O)?O[O.length-1]:O,N=[E,{},!1];return N.t=E,N.i18n={},N.ready=!1,N}(C=s.options.react)!=null&&C.wait&&Cp("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...v1(),...s.options.react,...e},{useSuspense:o,keyPrefix:c}=a;let u=i||((P=s.options)==null?void 0:P.defaultNS);u=Hr(u)?[u]:u||["translation"],(w=(R=s.reportNamespaces).addUsedNamespaces)==null||w.call(R,u);const l=(s.isInitialized||s.initializedStoreOnce)&&u.every(E=>c1(E,s,a)),p=R1(s,e.lng||null,a.nsMode==="fallback"?u:u[0],c),d=()=>p,h=()=>hy(s,e.lng||null,a.nsMode==="fallback"?u:u[0],c),[f,m]=Ue.useState(d);let y=u.join();e.lng&&(y=`${e.lng}${y}`);const v=P1(y),g=Ue.useRef(!0);Ue.useEffect(()=>{const{bindI18n:E,bindI18nStore:N}=a;g.current=!0,!l&&!o&&(e.lng?df(s,e.lng,u,()=>{g.current&&m(h)}):pf(s,u,()=>{g.current&&m(h)})),l&&v&&v!==y&&g.current&&m(h);const O=()=>{g.current&&m(h)};return E&&(s==null||s.on(E,O)),N&&(s==null||s.store.on(N,O)),()=>{g.current=!1,s&&(E==null||E.split(" ").forEach(W=>s.off(W,O))),N&&s&&N.split(" ").forEach(W=>s.store.off(W,O))}},[s,y]),Ue.useEffect(()=>{g.current&&l&&m(d)},[s,c,l]);const S=[f,s,l];if(S.t=f,S.i18n=s,S.ready=l,l||!l&&!o)return S;throw new Promise(E=>{e.lng?df(s,e.lng,u,()=>E()):pf(s,u,()=>E())})},j=t=>typeof t=="string",ni=()=>{let t,e;const r=new Promise((n,i)=>{t=n,e=i});return r.resolve=t,r.reject=e,r},hf=t=>t==null?"":""+t,w1=(t,e,r)=>{t.forEach(n=>{e[n]&&(r[n]=e[n])})},I1=/###/g,ff=t=>t&&t.indexOf("###")>-1?t.replace(I1,"."):t,vf=t=>!t||j(t),ro=(t,e,r)=>{const n=j(e)?e.split("."):e;let i=0;for(;i<n.length-1;){if(vf(t))return{};const s=ff(n[i]);!t[s]&&r&&(t[s]=new r),Object.prototype.hasOwnProperty.call(t,s)?t=t[s]:t={},++i}return vf(t)?{}:{obj:t,k:ff(n[i])}},gf=(t,e,r)=>{const{obj:n,k:i}=ro(t,e,Object);if(n!==void 0||e.length===1){n[i]=r;return}let s=e[e.length-1],a=e.slice(0,e.length-1),o=ro(t,a,Object);for(;o.obj===void 0&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),o=ro(t,a,Object),o&&o.obj&&typeof o.obj[`${o.k}.${s}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${s}`]=r},T1=(t,e,r,n)=>{const{obj:i,k:s}=ro(t,e,Object);i[s]=i[s]||[],i[s].push(r)},Ga=(t,e)=>{const{obj:r,k:n}=ro(t,e);if(r)return r[n]},_1=(t,e,r)=>{const n=Ga(t,r);return n!==void 0?n:Ga(e,r)},fy=(t,e,r)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in t?j(t[n])||t[n]instanceof String||j(e[n])||e[n]instanceof String?r&&(t[n]=e[n]):fy(t[n],e[n],r):t[n]=e[n]);return t},cn=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var A1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const k1=t=>j(t)?t.replace(/[&<>"'\/]/g,e=>A1[e]):t;class O1{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const r=this.regExpMap.get(e);if(r!==void 0)return r;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const M1=[" ",",","?","!",";"],b1=new O1(20),D1=(t,e,r)=>{e=e||"",r=r||"";const n=M1.filter(a=>e.indexOf(a)<0&&r.indexOf(a)<0);if(n.length===0)return!0;const i=b1.getRegExp(`(${n.map(a=>a==="?"?"\\?":a).join("|")})`);let s=!i.test(t);if(!s){const a=t.indexOf(r);a>0&&!i.test(t.substring(0,a))&&(s=!0)}return s},Rp=function(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const n=e.split(r);let i=t;for(let s=0;s<n.length;){if(!i||typeof i!="object")return;let a,o="";for(let c=s;c<n.length;++c)if(c!==s&&(o+=r),o+=n[c],a=i[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&c<n.length-1)continue;s+=c-s+1;break}i=a}return i},Qa=t=>t&&t.replace("_","-"),N1={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};class Ya{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,r)}init(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=e||N1,this.options=r,this.debug=r.debug}log(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.forward(r,"log","",!0)}warn(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.forward(r,"warn","",!0)}error(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.forward(r,"error","")}deprecate(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}forward(e,r,n,i){return i&&!this.debug?null:(j(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[r](e))}create(e){return new Ya(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Ya(this.logger,e)}}var wt=new Ya;class mc{constructor(){this.observers={}}on(e,r){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const i=this.observers[n].get(r)||0;this.observers[n].set(r,i+1)}),this}off(e,r){if(this.observers[e]){if(!r){delete this.observers[e];return}this.observers[e].delete(r)}}emit(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(a=>{let[o,c]=a;for(let u=0;u<c;u++)o(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[o,c]=a;for(let u=0;u<c;u++)o.apply(o,[e,...n])})}}class mf extends mc{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const r=this.options.ns.indexOf(e);r>-1&&this.options.ns.splice(r,1)}getResource(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,a=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,r],n&&(Array.isArray(n)?o.push(...n):j(n)&&s?o.push(...n.split(s)):o.push(n)));const c=Ga(this.data,o);return!c&&!r&&!n&&e.indexOf(".")>-1&&(e=o[0],r=o[1],n=o.slice(2).join(".")),c||!a||!j(n)?c:Rp(this.data&&this.data[e]&&this.data[e][r],n,s)}addResource(e,r,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let o=[e,r];n&&(o=o.concat(a?n.split(a):n)),e.indexOf(".")>-1&&(o=e.split("."),i=r,r=o[1]),this.addNamespaces(r),gf(this.data,o,i),s.silent||this.emit("added",e,r,n,i)}addResources(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in n)(j(n[s])||Array.isArray(n[s]))&&this.addResource(e,r,s,n[s],{silent:!0});i.silent||this.emit("added",e,r,n)}addResourceBundle(e,r,n,i,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[e,r];e.indexOf(".")>-1&&(o=e.split("."),i=n,n=r,r=o[1]),this.addNamespaces(r);let c=Ga(this.data,o)||{};a.skipCopy||(n=JSON.parse(JSON.stringify(n))),i?fy(c,n,s):c={...c,...n},gf(this.data,o,c),a.silent||this.emit("added",e,r,n)}removeResourceBundle(e,r){this.hasResourceBundle(e,r)&&delete this.data[e][r],this.removeNamespaces(r),this.emit("removed",e,r)}hasResourceBundle(e,r){return this.getResource(e,r)!==void 0}getResourceBundle(e,r){return r||(r=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,r)}:this.getResource(e,r)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const r=this.getDataByLanguage(e);return!!(r&&Object.keys(r)||[]).find(i=>r[i]&&Object.keys(r[i]).length>0)}toJSON(){return this.data}}var vy={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,r,n,i){return t.forEach(s=>{this.processors[s]&&(e=this.processors[s].process(e,r,n,i))}),e}};const Sf={};class Xa extends mc{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),w1(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=wt.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const n=this.resolve(e,r);return n&&n.res!==void 0}extractFromKey(e,r){let n=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const i=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let s=r.ns||this.options.defaultNS||[];const a=n&&e.indexOf(n)>-1,o=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!D1(e,n,i);if(a&&!o){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:s};const u=e.split(n);(n!==i||n===i&&this.options.ns.indexOf(u[0])>-1)&&(s=u.shift()),e=u.join(i)}return j(s)&&(s=[s]),{key:e,namespaces:s}}translate(e,r,n){if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,s=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(e[e.length-1],r),c=o[o.length-1],u=r.lng||this.language,l=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(l){const C=r.nsSeparator||this.options.nsSeparator;return i?{res:`${c}${C}${a}`,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(r)}:`${c}${C}${a}`}return i?{res:a,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(r)}:a}const p=this.resolve(e,r);let d=p&&p.res;const h=p&&p.usedKey||a,f=p&&p.exactUsedKey||a,m=Object.prototype.toString.apply(d),y=["[object Number]","[object Function]","[object RegExp]"],v=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,g=!this.i18nFormat||this.i18nFormat.handleAsObject,S=!j(d)&&typeof d!="boolean"&&typeof d!="number";if(g&&d&&S&&y.indexOf(m)<0&&!(j(v)&&Array.isArray(d))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const C=this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,d,{...r,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(p.res=C,p.usedParams=this.getUsedParamsDetails(r),p):C}if(s){const C=Array.isArray(d),P=C?[]:{},R=C?f:h;for(const w in d)if(Object.prototype.hasOwnProperty.call(d,w)){const E=`${R}${s}${w}`;P[w]=this.translate(E,{...r,joinArrays:!1,ns:o}),P[w]===E&&(P[w]=d[w])}d=P}}else if(g&&j(v)&&Array.isArray(d))d=d.join(v),d&&(d=this.extendTranslation(d,e,r,n));else{let C=!1,P=!1;const R=r.count!==void 0&&!j(r.count),w=Xa.hasDefaultValue(r),E=R?this.pluralResolver.getSuffix(u,r.count,r):"",N=r.ordinal&&R?this.pluralResolver.getSuffix(u,r.count,{ordinal:!1}):"",O=R&&!r.ordinal&&r.count===0&&this.pluralResolver.shouldUseIntlApi(),W=O&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${E}`]||r[`defaultValue${N}`]||r.defaultValue;!this.isValidLookup(d)&&w&&(C=!0,d=W),this.isValidLookup(d)||(P=!0,d=a);const ie=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&P?void 0:d,ut=w&&W!==d&&this.options.updateMissing;if(P||C||ut){if(this.logger.log(ut?"updateKey":"missingKey",u,c,a,ut?W:d),s){const _=this.resolve(a,{...r,keySeparator:!1});_&&_.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let At=[];const Ct=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Ct&&Ct[0])for(let _=0;_<Ct.length;_++)At.push(Ct[_]);else this.options.saveMissingTo==="all"?At=this.languageUtils.toResolveHierarchy(r.lng||this.language):At.push(r.lng||this.language);const Jt=(_,b,L)=>{const K=w&&L!==d?L:ie;this.options.missingKeyHandler?this.options.missingKeyHandler(_,c,b,K,ut,r):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(_,c,b,K,ut,r),this.emit("missingKey",_,c,b,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&R?At.forEach(_=>{const b=this.pluralResolver.getSuffixes(_,r);O&&r[`defaultValue${this.options.pluralSeparator}zero`]&&b.indexOf(`${this.options.pluralSeparator}zero`)<0&&b.push(`${this.options.pluralSeparator}zero`),b.forEach(L=>{Jt([_],a+L,r[`defaultValue${L}`]||W)})}):Jt(At,a,W))}d=this.extendTranslation(d,e,r,p,n),P&&d===a&&this.options.appendNamespaceToMissingKey&&(d=`${c}:${a}`),(P||C)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?d=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${a}`:a,C?d:void 0):d=this.options.parseMissingKeyHandler(d))}return i?(p.res=d,p.usedParams=this.getUsedParamsDetails(r),p):d}extendTranslation(e,r,n,i,s){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const u=j(e)&&(n&&n.interpolation&&n.interpolation.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let l;if(u){const d=e.match(this.interpolator.nestingRegexp);l=d&&d.length}let p=n.replace&&!j(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(p={...this.options.interpolation.defaultVariables,...p}),e=this.interpolator.interpolate(e,p,n.lng||this.language||i.usedLng,n),u){const d=e.match(this.interpolator.nestingRegexp),h=d&&d.length;l<h&&(n.nest=!1)}!n.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(n.lng=this.language||i.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var d=arguments.length,h=new Array(d),f=0;f<d;f++)h[f]=arguments[f];return s&&s[0]===h[0]&&!n.context?(a.logger.warn(`It seems you are nesting recursively key: ${h[0]} in key: ${r[0]}`),null):a.translate(...h,r)},n)),n.interpolation&&this.interpolator.reset()}const o=n.postProcess||this.options.postProcess,c=j(o)?[o]:o;return e!=null&&c&&c.length&&n.applyPostProcessor!==!1&&(e=vy.handle(c,e,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n,i,s,a,o;return j(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(n))return;const u=this.extractFromKey(c,r),l=u.key;i=l;let p=u.namespaces;this.options.fallbackNS&&(p=p.concat(this.options.fallbackNS));const d=r.count!==void 0&&!j(r.count),h=d&&!r.ordinal&&r.count===0&&this.pluralResolver.shouldUseIntlApi(),f=r.context!==void 0&&(j(r.context)||typeof r.context=="number")&&r.context!=="",m=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);p.forEach(y=>{this.isValidLookup(n)||(o=y,!Sf[`${m[0]}-${y}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(o)&&(Sf[`${m[0]}-${y}`]=!0,this.logger.warn(`key "${i}" for languages "${m.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(v=>{if(this.isValidLookup(n))return;a=v;const g=[l];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(g,l,v,y,r);else{let C;d&&(C=this.pluralResolver.getSuffix(v,r.count,r));const P=`${this.options.pluralSeparator}zero`,R=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(g.push(l+C),r.ordinal&&C.indexOf(R)===0&&g.push(l+C.replace(R,this.options.pluralSeparator)),h&&g.push(l+P)),f){const w=`${l}${this.options.contextSeparator}${r.context}`;g.push(w),d&&(g.push(w+C),r.ordinal&&C.indexOf(R)===0&&g.push(w+C.replace(R,this.options.pluralSeparator)),h&&g.push(w+P))}}let S;for(;S=g.pop();)this.isValidLookup(n)||(s=S,n=this.getResource(v,y,S,r))}))})}),{res:n,usedKey:i,exactUsedKey:s,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,r,n,i):this.resourceStore.getResource(e,r,n,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!j(e.replace);let i=n?e.replace:e;if(n&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!n){i={...i};for(const s of r)delete i[s]}return i}static hasDefaultValue(e){const r="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&r===n.substring(0,r.length)&&e[n]!==void 0)return!0;return!1}}const sl=t=>t.charAt(0).toUpperCase()+t.slice(1);class yf{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=wt.create("languageUtils")}getScriptPartFromCode(e){if(e=Qa(e),!e||e.indexOf("-")<0)return null;const r=e.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(e){if(e=Qa(e),!e||e.indexOf("-")<0)return e;const r=e.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(e){if(j(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let i=Intl.getCanonicalLocales(e)[0];if(i&&this.options.lowerCaseLng&&(i=i.toLowerCase()),i)return i}catch{}const r=["hans","hant","latn","cyrl","cans","mong","arab"];let n=e.split("-");return this.options.lowerCaseLng?n=n.map(i=>i.toLowerCase()):n.length===2?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),r.indexOf(n[1].toLowerCase())>-1&&(n[1]=sl(n[1].toLowerCase()))):n.length===3&&(n[0]=n[0].toLowerCase(),n[1].length===2&&(n[1]=n[1].toUpperCase()),n[0]!=="sgn"&&n[2].length===2&&(n[2]=n[2].toUpperCase()),r.indexOf(n[1].toLowerCase())>-1&&(n[1]=sl(n[1].toLowerCase())),r.indexOf(n[2].toLowerCase())>-1&&(n[2]=sl(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let r;return e.forEach(n=>{if(r)return;const i=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(i))&&(r=i)}),!r&&this.options.supportedLngs&&e.forEach(n=>{if(r)return;const i=this.getLanguagePartFromCode(n);if(this.isSupportedCode(i))return r=i;r=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(e,r){if(!e)return[];if(typeof e=="function"&&(e=e(r)),j(e)&&(e=[e]),Array.isArray(e))return e;if(!r)return e.default||[];let n=e[r];return n||(n=e[this.getScriptPartFromCode(r)]),n||(n=e[this.formatLanguageCode(r)]),n||(n=e[this.getLanguagePartFromCode(r)]),n||(n=e.default),n||[]}toResolveHierarchy(e,r){const n=this.getFallbackCodes(r||this.options.fallbackLng||[],e),i=[],s=a=>{a&&(this.isSupportedCode(a)?i.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return j(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):j(e)&&s(this.formatLanguageCode(e)),n.forEach(a=>{i.indexOf(a)<0&&s(this.formatLanguageCode(a))}),i}}let z1=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],L1={1:t=>+(t>1),2:t=>+(t!=1),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>t==1?0:t>=2&&t<=4?1:2,7:t=>t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>t==1?0:t==2?1:t!=8&&t!=11?2:3,9:t=>+(t>=2),10:t=>t==1?0:t==2?1:t<7?2:t<11?3:4,11:t=>t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(t!==0),14:t=>t==1?0:t==2?1:t==3?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:t!==0?1:2,17:t=>t==1||t%10==1&&t%100!=11?0:1,18:t=>t==0?0:t==1?1:2,19:t=>t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>t==1?0:t==0||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3};const j1=["v1","v2","v3"],x1=["v4"],Cf={zero:0,one:1,two:2,few:3,many:4,other:5},B1=()=>{const t={};return z1.forEach(e=>{e.lngs.forEach(r=>{t[r]={numbers:e.nr,plurals:L1[e.fc]}})}),t};class F1{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=r,this.logger=wt.create("pluralResolver"),(!this.options.compatibilityJSON||x1.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=B1(),this.pluralRulesCache={}}addRule(e,r){this.rules[e]=r}clearCache(){this.pluralRulesCache={}}getRule(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{const n=Qa(e==="dev"?"en":e),i=r.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:n,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];const a=new Intl.PluralRules(n,{type:i});return this.pluralRulesCache[s]=a,a}catch{return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(e,r);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,n).map(i=>`${r}${i}`)}getSuffixes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(e,r);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort((i,s)=>Cf[i]-Cf[s]).map(i=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i}`):n.numbers.map(i=>this.getSuffix(e,i,r)):[]}getSuffix(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,n);return i?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i.select(r)}`:this.getSuffixRetroCompatible(i,r):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,r){const n=e.noAbs?e.plurals(r):e.plurals(Math.abs(r));let i=e.numbers[n];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const s=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?`_plural_${i.toString()}`:s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?s():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!j1.includes(this.options.compatibilityJSON)}}const Pf=function(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=_1(t,e,r);return!s&&i&&j(r)&&(s=Rp(t,r,n),s===void 0&&(s=Rp(e,r,n))),s},ol=t=>t.replace(/\$/g,"$$$$");class q1{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=wt.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(r=>r),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:r,escapeValue:n,useRawValueToEscape:i,prefix:s,prefixEscaped:a,suffix:o,suffixEscaped:c,formatSeparator:u,unescapeSuffix:l,unescapePrefix:p,nestingPrefix:d,nestingPrefixEscaped:h,nestingSuffix:f,nestingSuffixEscaped:m,nestingOptionsSeparator:y,maxReplaces:v,alwaysFormat:g}=e.interpolation;this.escape=r!==void 0?r:k1,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?cn(s):a||"{{",this.suffix=o?cn(o):c||"}}",this.formatSeparator=u||",",this.unescapePrefix=l?"":p||"-",this.unescapeSuffix=this.unescapePrefix?"":l||"",this.nestingPrefix=d?cn(d):h||cn("$t("),this.nestingSuffix=f?cn(f):m||cn(")"),this.nestingOptionsSeparator=y||",",this.maxReplaces=v||1e3,this.alwaysFormat=g!==void 0?g:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(r,n)=>r&&r.source===n?(r.lastIndex=0,r):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,r,n,i){let s,a,o;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=h=>{if(h.indexOf(this.formatSeparator)<0){const v=Pf(r,c,h,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(v,void 0,n,{...i,...r,interpolationkey:h}):v}const f=h.split(this.formatSeparator),m=f.shift().trim(),y=f.join(this.formatSeparator).trim();return this.format(Pf(r,c,m,this.options.keySeparator,this.options.ignoreJSONStructure),y,n,{...i,...r,interpolationkey:m})};this.resetRegExp();const l=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,p=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:h=>ol(h)},{regex:this.regexp,safeValue:h=>this.escapeValue?ol(this.escape(h)):ol(h)}].forEach(h=>{for(o=0;s=h.regex.exec(e);){const f=s[1].trim();if(a=u(f),a===void 0)if(typeof l=="function"){const y=l(e,s,i);a=j(y)?y:""}else if(i&&Object.prototype.hasOwnProperty.call(i,f))a="";else if(p){a=s[0];continue}else this.logger.warn(`missed to pass in variable ${f} for interpolating ${e}`),a="";else!j(a)&&!this.useRawValueToEscape&&(a=hf(a));const m=h.safeValue(a);if(e=e.replace(s[0],m),p?(h.regex.lastIndex+=a.length,h.regex.lastIndex-=s[0].length):h.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,a;const o=(c,u)=>{const l=this.nestingOptionsSeparator;if(c.indexOf(l)<0)return c;const p=c.split(new RegExp(`${l}[ ]*{`));let d=`{${p[1]}`;c=p[0],d=this.interpolate(d,a);const h=d.match(/'/g),f=d.match(/"/g);(h&&h.length%2===0&&!f||f.length%2!==0)&&(d=d.replace(/'/g,'"'));try{a=JSON.parse(d),u&&(a={...u,...a})}catch(m){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,m),`${c}${l}${d}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,c};for(;i=this.nestingRegexp.exec(e);){let c=[];a={...n},a=a.replace&&!j(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let u=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const l=i[1].split(this.formatSeparator).map(p=>p.trim());i[1]=l.shift(),c=l,u=!0}if(s=r(o.call(this,i[1].trim(),a),a),s&&i[0]===e&&!j(s))return s;j(s)||(s=hf(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),u&&(s=c.reduce((l,p)=>this.format(l,p,n.lng,{...n,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}const U1=t=>{let e=t.toLowerCase().trim();const r={};if(t.indexOf("(")>-1){const n=t.split("(");e=n[0].toLowerCase().trim();const i=n[1].substring(0,n[1].length-1);e==="currency"&&i.indexOf(":")<0?r.currency||(r.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?r.range||(r.range=i.trim()):i.split(";").forEach(a=>{if(a){const[o,...c]=a.split(":"),u=c.join(":").trim().replace(/^'+|'+$/g,""),l=o.trim();r[l]||(r[l]=u),u==="false"&&(r[l]=!1),u==="true"&&(r[l]=!0),isNaN(u)||(r[l]=parseInt(u,10))}})}return{formatName:e,formatOptions:r}},un=t=>{const e={};return(r,n,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const a=n+JSON.stringify(s);let o=e[a];return o||(o=t(Qa(n),i),e[a]=o),o(r)}};class $1{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=wt.create("formatter"),this.options=e,this.formats={number:un((r,n)=>i=>new Intl.NumberFormat(r,{...n}).format(i)),currency:un((r,n)=>i=>new Intl.NumberFormat(r,{...n,style:"currency"}).format(i)),datetime:un((r,n)=>i=>new Intl.DateTimeFormat(r,{...n}).format(i)),relativetime:un((r,n)=>i=>new Intl.RelativeTimeFormat(r,{...n}).format(i,n.range||"day")),list:un((r,n)=>i=>new Intl.ListFormat(r,{...n}).format(i))},this.init(e)}init(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=r.interpolation.formatSeparator||","}add(e,r){this.formats[e.toLowerCase().trim()]=r}addCached(e,r){this.formats[e.toLowerCase().trim()]=un(r)}format(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=r.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(o=>o.indexOf(")")>-1)){const o=s.findIndex(c=>c.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,o)].join(this.formatSeparator)}return s.reduce((o,c)=>{const{formatName:u,formatOptions:l}=U1(c);if(this.formats[u]){let p=o;try{const d=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},h=d.locale||d.lng||i.locale||i.lng||n;p=this.formats[u](o,h,{...l,...i,...d})}catch(d){this.logger.warn(d)}return p}else this.logger.warn(`there was no format function for ${u}`);return o},e)}}const V1=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class W1 extends mc{constructor(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=r,this.services=n,this.languageUtils=n.languageUtils,this.options=i,this.logger=wt.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,i.backend,i)}queueLoad(e,r,n,i){const s={},a={},o={},c={};return e.forEach(u=>{let l=!0;r.forEach(p=>{const d=`${u}|${p}`;!n.reload&&this.store.hasResourceBundle(u,p)?this.state[d]=2:this.state[d]<0||(this.state[d]===1?a[d]===void 0&&(a[d]=!0):(this.state[d]=1,l=!1,a[d]===void 0&&(a[d]=!0),s[d]===void 0&&(s[d]=!0),c[p]===void 0&&(c[p]=!0)))}),l||(o[u]=!0)}),(Object.keys(s).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(c)}}loaded(e,r,n){const i=e.split("|"),s=i[0],a=i[1];r&&this.emit("failedLoading",s,a,r),!r&&n&&this.store.addResourceBundle(s,a,n,void 0,void 0,{skipCopy:!0}),this.state[e]=r?-1:2,r&&n&&(this.state[e]=0);const o={};this.queue.forEach(c=>{T1(c.loaded,[s],a),V1(c,e),r&&c.errors.push(r),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(u=>{o[u]||(o[u]={});const l=c.loaded[u];l.length&&l.forEach(p=>{o[u][p]===void 0&&(o[u][p]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(c=>!c.done)}read(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:r,fcName:n,tried:i,wait:s,callback:a});return}this.readingCalls++;const o=(u,l)=>{if(this.readingCalls--,this.waitingReads.length>0){const p=this.waitingReads.shift();this.read(p.lng,p.ns,p.fcName,p.tried,p.wait,p.callback)}if(u&&l&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,r,n,i+1,s*2,a)},s);return}a(u,l)},c=this.backend[n].bind(this.backend);if(c.length===2){try{const u=c(e,r);u&&typeof u.then=="function"?u.then(l=>o(null,l)).catch(o):o(null,u)}catch(u){o(u)}return}return c(e,r,o)}prepareLoading(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();j(e)&&(e=this.languageUtils.toResolveHierarchy(e)),j(r)&&(r=[r]);const s=this.queueLoad(e,r,n,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(a=>{this.loadOne(a)})}load(e,r,n){this.prepareLoading(e,r,{},n)}reload(e,r,n){this.prepareLoading(e,r,{reload:!0},n)}loadOne(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=e.split("|"),i=n[0],s=n[1];this.read(i,s,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${r}loading namespace ${s} for language ${i} failed`,a),!a&&o&&this.logger.log(`${r}loaded namespace ${s} for language ${i}`,o),this.loaded(e,a,o)})}saveMissing(e,r,n,i,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(r)){this.logger.warn(`did not save key "${n}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend&&this.backend.create){const c={...a,isUpdate:s},u=this.backend.create.bind(this.backend);if(u.length<6)try{let l;u.length===5?l=u(e,r,n,i,c):l=u(e,r,n,i),l&&typeof l.then=="function"?l.then(p=>o(null,p)).catch(o):o(null,l)}catch(l){o(l)}else u(e,r,n,i,o,c)}!e||!e[0]||this.store.addResource(e[0],r,n,i)}}}const Rf=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),j(t[1])&&(e.defaultValue=t[1]),j(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const r=t[3]||t[2];Object.keys(r).forEach(n=>{e[n]=r[n]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),Ef=t=>(j(t.ns)&&(t.ns=[t.ns]),j(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),j(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),oa=()=>{},H1=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(r=>{typeof t[r]=="function"&&(t[r]=t[r].bind(t))})};class Ro extends mc{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(super(),this.options=Ef(e),this.services={},this.logger=wt,this.modules={external:[]},H1(this),r&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,r),this;setTimeout(()=>{this.init(e,r)},0)}}init(){var e=this;let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof r=="function"&&(n=r,r={}),!r.defaultNS&&r.defaultNS!==!1&&r.ns&&(j(r.ns)?r.defaultNS=r.ns:r.ns.indexOf("translation")<0&&(r.defaultNS=r.ns[0]));const i=Rf();this.options={...i,...this.options,...Ef(r)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),r.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=r.keySeparator),r.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=r.nsSeparator);const s=l=>l?typeof l=="function"?new l:l:null;if(!this.options.isClone){this.modules.logger?wt.init(s(this.modules.logger),this.options):wt.init(null,this.options);let l;this.modules.formatter?l=this.modules.formatter:typeof Intl<"u"&&(l=$1);const p=new yf(this.options);this.store=new mf(this.options.resources,this.options);const d=this.services;d.logger=wt,d.resourceStore=this.store,d.languageUtils=p,d.pluralResolver=new F1(p,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),l&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(d.formatter=s(l),d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new q1(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new W1(s(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",function(h){for(var f=arguments.length,m=new Array(f>1?f-1:0),y=1;y<f;y++)m[y-1]=arguments[y];e.emit(h,...m)}),this.modules.languageDetector&&(d.languageDetector=s(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=s(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new Xa(this.services,this.options),this.translator.on("*",function(h){for(var f=arguments.length,m=new Array(f>1?f-1:0),y=1;y<f;y++)m[y-1]=arguments[y];e.emit(h,...m)}),this.modules.external.forEach(h=>{h.init&&h.init(this)})}if(this.format=this.options.interpolation.format,n||(n=oa),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l.length>0&&l[0]!=="dev"&&(this.options.lng=l[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(l=>{this[l]=function(){return e.store[l](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(l=>{this[l]=function(){return e.store[l](...arguments),e}});const c=ni(),u=()=>{const l=(p,d)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(d),n(p,d)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return l(null,this.t.bind(this));this.changeLanguage(this.options.lng,l)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),c}loadResources(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:oa;const i=j(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const s=[],a=o=>{if(!o||o==="cimode")return;this.services.languageUtils.toResolveHierarchy(o).forEach(u=>{u!=="cimode"&&s.indexOf(u)<0&&s.push(u)})};i?a(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>a(c)),this.options.preload&&this.options.preload.forEach(o=>a(o)),this.services.backendConnector.load(s,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(o)})}else n(null)}reloadResources(e,r,n){const i=ni();return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r=void 0),e||(e=this.languages),r||(r=this.options.ns),n||(n=oa),this.services.backendConnector.reload(e,r,s=>{i.resolve(),n(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&vy.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let r=0;r<this.languages.length;r++){const n=this.languages[r];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}changeLanguage(e,r){var n=this;this.isLanguageChangingTo=e;const i=ni();this.emit("languageChanging",e);const s=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},a=(c,u)=>{u?(s(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,i.resolve(function(){return n.t(...arguments)}),r&&r(c,function(){return n.t(...arguments)})},o=c=>{!e&&!c&&this.services.languageDetector&&(c=[]);const u=j(c)?c:this.services.languageUtils.getBestMatchFromCodes(c);u&&(this.language||s(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,l=>{a(l,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),i}getFixedT(e,r,n){var i=this;const s=function(a,o){let c;if(typeof o!="object"){for(var u=arguments.length,l=new Array(u>2?u-2:0),p=2;p<u;p++)l[p-2]=arguments[p];c=i.options.overloadTranslationOptionHandler([a,o].concat(l))}else c={...o};c.lng=c.lng||s.lng,c.lngs=c.lngs||s.lngs,c.ns=c.ns||s.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||n||s.keyPrefix);const d=i.options.keySeparator||".";let h;return c.keyPrefix&&Array.isArray(a)?h=a.map(f=>`${c.keyPrefix}${d}${f}`):h=c.keyPrefix?`${c.keyPrefix}${d}${a}`:a,i.t(h,c)};return j(e)?s.lng=e:s.lngs=e,s.ns=r,s.keyPrefix=n,s}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=r.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const a=(o,c)=>{const u=this.services.backendConnector.state[`${o}|${c}`];return u===-1||u===0||u===2};if(r.precheck){const o=r.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(n,e)&&(!i||a(s,e)))}loadNamespaces(e,r){const n=ni();return this.options.ns?(j(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{n.resolve(),r&&r(i)}),n):(r&&r(),Promise.resolve())}loadLanguages(e,r){const n=ni();j(e)&&(e=[e]);const i=this.options.preload||[],s=e.filter(a=>i.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return s.length?(this.options.preload=i.concat(s),this.loadResources(a=>{n.resolve(),r&&r(a)}),n):(r&&r(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services&&this.services.languageUtils||new yf(Rf());return r.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return new Ro(e,r)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:oa;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new Ro(i);return(e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(o=>{s[o]=this[o]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},n&&(s.store=new mf(this.store.data,i),s.services.resourceStore=s.store),s.translator=new Xa(s.services,i),s.translator.on("*",function(o){for(var c=arguments.length,u=new Array(c>1?c-1:0),l=1;l<c;l++)u[l-1]=arguments[l];s.emit(o,...u)}),s.init(i,r),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const De=Ro.createInstance();De.createInstance=Ro.createInstance;De.createInstance;De.dir;De.init;De.loadResources;De.reloadResources;De.use;De.changeLanguage;De.getFixedT;De.t;De.exists;De.setDefaultNamespace;De.hasLoadedNamespace;De.loadNamespaces;De.loadLanguages;const K1={en:{translation:{"Your cart":"Your cart","item(s)":"item(s)","Cart Button":"Cart Button"}},ru:{translation:{"Your cart":" ","item(s)":"()","Cart Button":" "}}};De.use(S1).init({resources:K1,lng:navigator.language||"en",fallbackLng:"en",interpolation:{escapeValue:!1}});var Ra={},al={},Sc={},cl={},te={},Vn={},at={},gy={},yc={},Cc={};Object.defineProperty(Cc,"__esModule",{value:!0});Cc.default=G1;let aa;const J1=new Uint8Array(16);function G1(){if(!aa&&(aa=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!aa))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return aa(J1)}var Cr={},rn={},Pc={};Object.defineProperty(Pc,"__esModule",{value:!0});Pc.default=void 0;var Q1=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Pc.default=Q1;Object.defineProperty(rn,"__esModule",{value:!0});rn.default=void 0;var Y1=X1(Pc);function X1(t){return t&&t.__esModule?t:{default:t}}function Z1(t){return typeof t=="string"&&Y1.default.test(t)}var ew=Z1;rn.default=ew;Object.defineProperty(Cr,"__esModule",{value:!0});Cr.default=void 0;Cr.unsafeStringify=my;var tw=rw(rn);function rw(t){return t&&t.__esModule?t:{default:t}}const ve=[];for(let t=0;t<256;++t)ve.push((t+256).toString(16).slice(1));function my(t,e=0){return ve[t[e+0]]+ve[t[e+1]]+ve[t[e+2]]+ve[t[e+3]]+"-"+ve[t[e+4]]+ve[t[e+5]]+"-"+ve[t[e+6]]+ve[t[e+7]]+"-"+ve[t[e+8]]+ve[t[e+9]]+"-"+ve[t[e+10]]+ve[t[e+11]]+ve[t[e+12]]+ve[t[e+13]]+ve[t[e+14]]+ve[t[e+15]]}function nw(t,e=0){const r=my(t,e);if(!(0,tw.default)(r))throw TypeError("Stringified UUID is invalid");return r}var iw=nw;Cr.default=iw;Object.defineProperty(yc,"__esModule",{value:!0});yc.default=void 0;var sw=aw(Cc),ow=Cr;function aw(t){return t&&t.__esModule?t:{default:t}}let wf,ul,ll=0,pl=0;function cw(t,e,r){let n=e&&r||0;const i=e||new Array(16);t=t||{};let s=t.node||wf,a=t.clockseq!==void 0?t.clockseq:ul;if(s==null||a==null){const d=t.random||(t.rng||sw.default)();s==null&&(s=wf=[d[0]|1,d[1],d[2],d[3],d[4],d[5]]),a==null&&(a=ul=(d[6]<<8|d[7])&16383)}let o=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:pl+1;const u=o-ll+(c-pl)/1e4;if(u<0&&t.clockseq===void 0&&(a=a+1&16383),(u<0||o>ll)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ll=o,pl=c,ul=a,o+=122192928e5;const l=((o&268435455)*1e4+c)%4294967296;i[n++]=l>>>24&255,i[n++]=l>>>16&255,i[n++]=l>>>8&255,i[n++]=l&255;const p=o/4294967296*1e4&268435455;i[n++]=p>>>8&255,i[n++]=p&255,i[n++]=p>>>24&15|16,i[n++]=p>>>16&255,i[n++]=a>>>8|128,i[n++]=a&255;for(let d=0;d<6;++d)i[n+d]=s[d];return e||(0,ow.unsafeStringify)(i)}var uw=cw;yc.default=uw;var Rc={},gr={},Mo={};Object.defineProperty(Mo,"__esModule",{value:!0});Mo.default=void 0;var lw=pw(rn);function pw(t){return t&&t.__esModule?t:{default:t}}function dw(t){if(!(0,lw.default)(t))throw TypeError("Invalid UUID");let e;const r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var hw=dw;Mo.default=hw;Object.defineProperty(gr,"__esModule",{value:!0});gr.URL=gr.DNS=void 0;gr.default=Sw;var fw=Cr,vw=gw(Mo);function gw(t){return t&&t.__esModule?t:{default:t}}function mw(t){t=unescape(encodeURIComponent(t));const e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}const Sy="6ba7b810-9dad-11d1-80b4-00c04fd430c8";gr.DNS=Sy;const yy="6ba7b811-9dad-11d1-80b4-00c04fd430c8";gr.URL=yy;function Sw(t,e,r){function n(i,s,a,o){var c;if(typeof i=="string"&&(i=mw(i)),typeof s=="string"&&(s=(0,vw.default)(s)),((c=s)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(s),u.set(i,s.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,a){o=o||0;for(let l=0;l<16;++l)a[o+l]=u[l];return a}return(0,fw.unsafeStringify)(u)}try{n.name=t}catch{}return n.DNS=Sy,n.URL=yy,n}var Ec={};Object.defineProperty(Ec,"__esModule",{value:!0});Ec.default=void 0;function yw(t){if(typeof t=="string"){const e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return Cw(Pw(Rw(t),t.length*8))}function Cw(t){const e=[],r=t.length*32,n="0123456789abcdef";for(let i=0;i<r;i+=8){const s=t[i>>5]>>>i%32&255,a=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);e.push(a)}return e}function Cy(t){return(t+64>>>9<<4)+14+1}function Pw(t,e){t[e>>5]|=128<<e%32,t[Cy(e)-1]=e;let r=1732584193,n=-271733879,i=-1732584194,s=271733878;for(let a=0;a<t.length;a+=16){const o=r,c=n,u=i,l=s;r=Ie(r,n,i,s,t[a],7,-680876936),s=Ie(s,r,n,i,t[a+1],12,-389564586),i=Ie(i,s,r,n,t[a+2],17,606105819),n=Ie(n,i,s,r,t[a+3],22,-1044525330),r=Ie(r,n,i,s,t[a+4],7,-176418897),s=Ie(s,r,n,i,t[a+5],12,1200080426),i=Ie(i,s,r,n,t[a+6],17,-1473231341),n=Ie(n,i,s,r,t[a+7],22,-45705983),r=Ie(r,n,i,s,t[a+8],7,1770035416),s=Ie(s,r,n,i,t[a+9],12,-1958414417),i=Ie(i,s,r,n,t[a+10],17,-42063),n=Ie(n,i,s,r,t[a+11],22,-1990404162),r=Ie(r,n,i,s,t[a+12],7,1804603682),s=Ie(s,r,n,i,t[a+13],12,-40341101),i=Ie(i,s,r,n,t[a+14],17,-1502002290),n=Ie(n,i,s,r,t[a+15],22,1236535329),r=Te(r,n,i,s,t[a+1],5,-165796510),s=Te(s,r,n,i,t[a+6],9,-1069501632),i=Te(i,s,r,n,t[a+11],14,643717713),n=Te(n,i,s,r,t[a],20,-373897302),r=Te(r,n,i,s,t[a+5],5,-701558691),s=Te(s,r,n,i,t[a+10],9,38016083),i=Te(i,s,r,n,t[a+15],14,-660478335),n=Te(n,i,s,r,t[a+4],20,-405537848),r=Te(r,n,i,s,t[a+9],5,568446438),s=Te(s,r,n,i,t[a+14],9,-1019803690),i=Te(i,s,r,n,t[a+3],14,-187363961),n=Te(n,i,s,r,t[a+8],20,1163531501),r=Te(r,n,i,s,t[a+13],5,-1444681467),s=Te(s,r,n,i,t[a+2],9,-51403784),i=Te(i,s,r,n,t[a+7],14,1735328473),n=Te(n,i,s,r,t[a+12],20,-1926607734),r=_e(r,n,i,s,t[a+5],4,-378558),s=_e(s,r,n,i,t[a+8],11,-2022574463),i=_e(i,s,r,n,t[a+11],16,1839030562),n=_e(n,i,s,r,t[a+14],23,-35309556),r=_e(r,n,i,s,t[a+1],4,-1530992060),s=_e(s,r,n,i,t[a+4],11,1272893353),i=_e(i,s,r,n,t[a+7],16,-155497632),n=_e(n,i,s,r,t[a+10],23,-1094730640),r=_e(r,n,i,s,t[a+13],4,681279174),s=_e(s,r,n,i,t[a],11,-358537222),i=_e(i,s,r,n,t[a+3],16,-722521979),n=_e(n,i,s,r,t[a+6],23,76029189),r=_e(r,n,i,s,t[a+9],4,-640364487),s=_e(s,r,n,i,t[a+12],11,-421815835),i=_e(i,s,r,n,t[a+15],16,530742520),n=_e(n,i,s,r,t[a+2],23,-995338651),r=Ae(r,n,i,s,t[a],6,-198630844),s=Ae(s,r,n,i,t[a+7],10,1126891415),i=Ae(i,s,r,n,t[a+14],15,-1416354905),n=Ae(n,i,s,r,t[a+5],21,-57434055),r=Ae(r,n,i,s,t[a+12],6,1700485571),s=Ae(s,r,n,i,t[a+3],10,-1894986606),i=Ae(i,s,r,n,t[a+10],15,-1051523),n=Ae(n,i,s,r,t[a+1],21,-2054922799),r=Ae(r,n,i,s,t[a+8],6,1873313359),s=Ae(s,r,n,i,t[a+15],10,-30611744),i=Ae(i,s,r,n,t[a+6],15,-1560198380),n=Ae(n,i,s,r,t[a+13],21,1309151649),r=Ae(r,n,i,s,t[a+4],6,-145523070),s=Ae(s,r,n,i,t[a+11],10,-1120210379),i=Ae(i,s,r,n,t[a+2],15,718787259),n=Ae(n,i,s,r,t[a+9],21,-343485551),r=ir(r,o),n=ir(n,c),i=ir(i,u),s=ir(s,l)}return[r,n,i,s]}function Rw(t){if(t.length===0)return[];const e=t.length*8,r=new Uint32Array(Cy(e));for(let n=0;n<e;n+=8)r[n>>5]|=(t[n/8]&255)<<n%32;return r}function ir(t,e){const r=(t&65535)+(e&65535);return(t>>16)+(e>>16)+(r>>16)<<16|r&65535}function Ew(t,e){return t<<e|t>>>32-e}function wc(t,e,r,n,i,s){return ir(Ew(ir(ir(e,t),ir(n,s)),i),r)}function Ie(t,e,r,n,i,s,a){return wc(e&r|~e&n,t,e,i,s,a)}function Te(t,e,r,n,i,s,a){return wc(e&n|r&~n,t,e,i,s,a)}function _e(t,e,r,n,i,s,a){return wc(e^r^n,t,e,i,s,a)}function Ae(t,e,r,n,i,s,a){return wc(r^(e|~n),t,e,i,s,a)}var ww=yw;Ec.default=ww;Object.defineProperty(Rc,"__esModule",{value:!0});Rc.default=void 0;var Iw=Py(gr),Tw=Py(Ec);function Py(t){return t&&t.__esModule?t:{default:t}}const _w=(0,Iw.default)("v3",48,Tw.default);var Aw=_w;Rc.default=Aw;var Ic={},Tc={};Object.defineProperty(Tc,"__esModule",{value:!0});Tc.default=void 0;const kw=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var Ow={randomUUID:kw};Tc.default=Ow;Object.defineProperty(Ic,"__esModule",{value:!0});Ic.default=void 0;var If=Ry(Tc),Mw=Ry(Cc),bw=Cr;function Ry(t){return t&&t.__esModule?t:{default:t}}function Dw(t,e,r){if(If.default.randomUUID&&!e&&!t)return If.default.randomUUID();t=t||{};const n=t.random||(t.rng||Mw.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,bw.unsafeStringify)(n)}var Nw=Dw;Ic.default=Nw;var _c={},Ac={};Object.defineProperty(Ac,"__esModule",{value:!0});Ac.default=void 0;function zw(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function dl(t,e){return t<<e|t>>>32-e}function Lw(t){const e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){const a=unescape(encodeURIComponent(t));t=[];for(let o=0;o<a.length;++o)t.push(a.charCodeAt(o))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const n=t.length/4+2,i=Math.ceil(n/16),s=new Array(i);for(let a=0;a<i;++a){const o=new Uint32Array(16);for(let c=0;c<16;++c)o[c]=t[a*64+c*4]<<24|t[a*64+c*4+1]<<16|t[a*64+c*4+2]<<8|t[a*64+c*4+3];s[a]=o}s[i-1][14]=(t.length-1)*8/Math.pow(2,32),s[i-1][14]=Math.floor(s[i-1][14]),s[i-1][15]=(t.length-1)*8&4294967295;for(let a=0;a<i;++a){const o=new Uint32Array(80);for(let h=0;h<16;++h)o[h]=s[a][h];for(let h=16;h<80;++h)o[h]=dl(o[h-3]^o[h-8]^o[h-14]^o[h-16],1);let c=r[0],u=r[1],l=r[2],p=r[3],d=r[4];for(let h=0;h<80;++h){const f=Math.floor(h/20),m=dl(c,5)+zw(f,u,l,p)+d+e[f]+o[h]>>>0;d=p,p=l,l=dl(u,30)>>>0,u=c,c=m}r[0]=r[0]+c>>>0,r[1]=r[1]+u>>>0,r[2]=r[2]+l>>>0,r[3]=r[3]+p>>>0,r[4]=r[4]+d>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var jw=Lw;Ac.default=jw;Object.defineProperty(_c,"__esModule",{value:!0});_c.default=void 0;var xw=Ey(gr),Bw=Ey(Ac);function Ey(t){return t&&t.__esModule?t:{default:t}}const Fw=(0,xw.default)("v5",80,Bw.default);var qw=Fw;_c.default=qw;var kc={};Object.defineProperty(kc,"__esModule",{value:!0});kc.default=void 0;var Uw="00000000-0000-0000-0000-000000000000";kc.default=Uw;var Oc={};Object.defineProperty(Oc,"__esModule",{value:!0});Oc.default=void 0;var $w=Vw(rn);function Vw(t){return t&&t.__esModule?t:{default:t}}function Ww(t){if(!(0,$w.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var Hw=Ww;Oc.default=Hw;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return a.default}});var e=l(yc),r=l(Rc),n=l(Ic),i=l(_c),s=l(kc),a=l(Oc),o=l(rn),c=l(Cr),u=l(Mo);function l(p){return p&&p.__esModule?p:{default:p}}})(gy);Object.defineProperty(at,"__esModule",{value:!0});at.createNoDashGuid=at.createGuid=void 0;const Kw=gy,wy=()=>Kw.v4();at.createGuid=wy;const Jw=()=>wy().replace(new RegExp("-","g"),"").toUpperCase();at.createNoDashGuid=Jw;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformEvent=t.EventType=void 0;const e=at;(function(n){n[n.Debug=0]="Debug",n[n.Info=1]="Info",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.None=4]="None"})(t.EventType||(t.EventType={}));class r{constructor(i,s){this.privName=i,this.privEventId=e.createNoDashGuid(),this.privEventTime=new Date().toISOString(),this.privEventType=s,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}t.PlatformEvent=r})(Vn);Object.defineProperty(te,"__esModule",{value:!0});te.AudioStreamNodeErrorEvent=te.AudioStreamNodeDetachedEvent=te.AudioStreamNodeAttachedEvent=te.AudioStreamNodeAttachingEvent=te.AudioStreamNodeEvent=te.AudioSourceErrorEvent=te.AudioSourceOffEvent=te.AudioSourceReadyEvent=te.AudioSourceInitializingEvent=te.AudioSourceEvent=void 0;const Ep=Vn;class Wn extends Ep.PlatformEvent{constructor(e,r,n=Ep.EventType.Info){super(e,n),this.privAudioSourceId=r}get audioSourceId(){return this.privAudioSourceId}}te.AudioSourceEvent=Wn;class Gw extends Wn{constructor(e){super("AudioSourceInitializingEvent",e)}}te.AudioSourceInitializingEvent=Gw;class Qw extends Wn{constructor(e){super("AudioSourceReadyEvent",e)}}te.AudioSourceReadyEvent=Qw;class Yw extends Wn{constructor(e){super("AudioSourceOffEvent",e)}}te.AudioSourceOffEvent=Yw;class Xw extends Wn{constructor(e,r){super("AudioSourceErrorEvent",e,Ep.EventType.Error),this.privError=r}get error(){return this.privError}}te.AudioSourceErrorEvent=Xw;class bo extends Wn{constructor(e,r,n){super(e,r),this.privAudioNodeId=n}get audioNodeId(){return this.privAudioNodeId}}te.AudioStreamNodeEvent=bo;class Zw extends bo{constructor(e,r){super("AudioStreamNodeAttachingEvent",e,r)}}te.AudioStreamNodeAttachingEvent=Zw;class eI extends bo{constructor(e,r){super("AudioStreamNodeAttachedEvent",e,r)}}te.AudioStreamNodeAttachedEvent=eI;class tI extends bo{constructor(e,r){super("AudioStreamNodeDetachedEvent",e,r)}}te.AudioStreamNodeDetachedEvent=tI;class rI extends bo{constructor(e,r,n){super("AudioStreamNodeErrorEvent",e,r),this.privError=n}get error(){return this.privError}}te.AudioStreamNodeErrorEvent=rI;var ae={};Object.defineProperty(ae,"__esModule",{value:!0});ae.ConnectionMessageSentEvent=ae.ConnectionMessageReceivedEvent=ae.ConnectionEstablishErrorEvent=ae.ConnectionErrorEvent=ae.ConnectionClosedEvent=ae.ConnectionEstablishedEvent=ae.ConnectionStartEvent=ae.ConnectionEvent=ae.ServiceEvent=void 0;const Xr=Vn;class nI extends Xr.PlatformEvent{constructor(e,r,n=Xr.EventType.Info){super(e,n),this.privJsonResult=r}get jsonString(){return this.privJsonResult}}ae.ServiceEvent=nI;class Pr extends Xr.PlatformEvent{constructor(e,r,n=Xr.EventType.Info){super(e,n),this.privConnectionId=r}get connectionId(){return this.privConnectionId}}ae.ConnectionEvent=Pr;class iI extends Pr{constructor(e,r,n){super("ConnectionStartEvent",e),this.privUri=r,this.privHeaders=n}get uri(){return this.privUri}get headers(){return this.privHeaders}}ae.ConnectionStartEvent=iI;class sI extends Pr{constructor(e){super("ConnectionEstablishedEvent",e)}}ae.ConnectionEstablishedEvent=sI;class oI extends Pr{constructor(e,r,n){super("ConnectionClosedEvent",e,Xr.EventType.Debug),this.privReason=n,this.privStatusCode=r}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}ae.ConnectionClosedEvent=oI;class aI extends Pr{constructor(e,r,n){super("ConnectionErrorEvent",e,Xr.EventType.Debug),this.privMessage=r,this.privType=n}get message(){return this.privMessage}get type(){return this.privType}}ae.ConnectionErrorEvent=aI;class cI extends Pr{constructor(e,r,n){super("ConnectionEstablishErrorEvent",e,Xr.EventType.Error),this.privStatusCode=r,this.privReason=n}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}ae.ConnectionEstablishErrorEvent=cI;class uI extends Pr{constructor(e,r,n){super("ConnectionMessageReceivedEvent",e),this.privNetworkReceivedTime=r,this.privMessage=n}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}ae.ConnectionMessageReceivedEvent=uI;class lI extends Pr{constructor(e,r,n){super("ConnectionMessageSentEvent",e),this.privNetworkSentTime=r,this.privMessage=n}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}ae.ConnectionMessageSentEvent=lI;var wd={},ye={};Object.defineProperty(ye,"__esModule",{value:!0});ye.ObjectDisposedError=ye.InvalidOperationError=ye.ArgumentNullError=void 0;class pI extends Error{constructor(e){super(e),this.name="ArgumentNull",this.message=e}}ye.ArgumentNullError=pI;class dI extends Error{constructor(e){super(e),this.name="InvalidOperation",this.message=e}}ye.InvalidOperationError=dI;class hI extends Error{constructor(e,r){super(r),this.name=e+"ObjectDisposed",this.message=r}}ye.ObjectDisposedError=hI;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessage=t.MessageType=void 0;const e=ye,r=at;var n;(function(s){s[s.Text=0]="Text",s[s.Binary=1]="Binary"})(n=t.MessageType||(t.MessageType={}));class i{constructor(a,o,c,u){if(this.privBody=null,a===n.Text&&o&&typeof o!="string")throw new e.InvalidOperationError("Payload must be a string");if(a===n.Binary&&o&&!(o instanceof ArrayBuffer))throw new e.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=a,this.privBody=o,this.privHeaders=c||{},this.privId=u||r.createNoDashGuid(),this.messageType){case n.Binary:this.privSize=this.binaryBody!==null?this.binaryBody.byteLength:0;break;case n.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===n.Binary)throw new e.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===n.Text)throw new e.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}t.ConnectionMessage=i})(wd);var Mc={};Object.defineProperty(Mc,"__esModule",{value:!0});Mc.ConnectionOpenResponse=void 0;class fI{constructor(e,r){this.privStatusCode=e,this.privReason=r}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}}Mc.ConnectionOpenResponse=fI;var bc={};Object.defineProperty(bc,"__esModule",{value:!0});bc.DeferralMap=void 0;class vI{constructor(){this.privMap={}}add(e,r){this.privMap[e]=r}getId(e){return this.privMap[e]}complete(e,r){try{this.privMap[e].resolve(r)}catch(n){this.privMap[e].reject(n)}finally{this.privMap[e]=void 0}}}bc.DeferralMap=vI;var Zr={};Object.defineProperty(Zr,"__esModule",{value:!0});Zr.SendingAgentContextMessageEvent=Zr.DialogEvent=void 0;const Tf=Vn;class Iy extends Tf.PlatformEvent{constructor(e,r=Tf.EventType.Info){super(e,r)}}Zr.DialogEvent=Iy;class gI extends Iy{constructor(e){super("SendingAgentContextMessageEvent"),this.privAgentConfig=e}get agentConfig(){return this.privAgentConfig}}Zr.SendingAgentContextMessageEvent=gI;var Dc={},Do={};Object.defineProperty(Do,"__esModule",{value:!0});Do.EventSource=void 0;const mI=ye,SI=at;class yI{constructor(e){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=e}onEvent(e){if(this.isDisposed())throw new mI.ObjectDisposedError("EventSource");if(this.metadata)for(const r in this.metadata)r&&e.metadata&&(e.metadata[r]||(e.metadata[r]=this.metadata[r]));for(const r in this.privEventListeners)r&&this.privEventListeners[r]&&this.privEventListeners[r](e)}attach(e){const r=SI.createNoDashGuid();return this.privEventListeners[r]=e,{detach:()=>(delete this.privEventListeners[r],Promise.resolve())}}attachListener(e){return this.attach(r=>e.onEvent(r))}attachConsoleListener(e){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(r=>e.onEvent(r)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}}Do.EventSource=yI;Object.defineProperty(Dc,"__esModule",{value:!0});Dc.Events=void 0;const CI=ye,PI=Do;class Eo{static setEventSource(e){if(!e)throw new CI.ArgumentNullError("eventSource");Eo.privInstance=e}static get instance(){return Eo.privInstance}}Dc.Events=Eo;Eo.privInstance=new PI.EventSource;var Ty={};Object.defineProperty(Ty,"__esModule",{value:!0});var _y={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionState=void 0,function(e){e[e.None=0]="None",e[e.Connected=1]="Connected",e[e.Connecting=2]="Connecting",e[e.Disconnected=3]="Disconnected"}(t.ConnectionState||(t.ConnectionState={}))})(_y);var Ay={};Object.defineProperty(Ay,"__esModule",{value:!0});var ky={};Object.defineProperty(ky,"__esModule",{value:!0});var Oy={};Object.defineProperty(Oy,"__esModule",{value:!0});var My={};Object.defineProperty(My,"__esModule",{value:!0});var by={};Object.defineProperty(by,"__esModule",{value:!0});var Dy={};Object.defineProperty(Dy,"__esModule",{value:!0});var Ny={};Object.defineProperty(Ny,"__esModule",{value:!0});var zy={};Object.defineProperty(zy,"__esModule",{value:!0});var No={};Object.defineProperty(No,"__esModule",{value:!0});No.List=void 0;const RI=ye;class Xt{constructor(e){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],e)for(const r of e)this.privList.push(r)}get(e){return this.throwIfDisposed(),this.privList[e]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(e){this.throwIfDisposed(),this.insertAt(this.privList.length,e)}insertAt(e,r){this.throwIfDisposed(),e===0?this.privList.unshift(r):e===this.privList.length?this.privList.push(r):this.privList.splice(e,0,r),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(e){return this.throwIfDisposed(),this.remove(e,1)[0]}remove(e,r){this.throwIfDisposed();const n=this.privList.splice(e,r);return this.triggerSubscriptions(this.privRemoveSubscriptions),n}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(e){this.throwIfDisposed();const r=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[r]=e,{detach:()=>(delete this.privAddSubscriptions[r],Promise.resolve())}}onRemoved(e){this.throwIfDisposed();const r=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[r]=e,{detach:()=>(delete this.privRemoveSubscriptions[r],Promise.resolve())}}onDisposed(e){this.throwIfDisposed();const r=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[r]=e,{detach:()=>(delete this.privDisposedSubscriptions[r],Promise.resolve())}}join(e){return this.throwIfDisposed(),this.privList.join(e)}toArray(){const e=Array();return this.privList.forEach(r=>{e.push(r)}),e}any(e){return this.throwIfDisposed(),e?this.where(e).length()>0:this.length()>0}all(e){return this.throwIfDisposed(),this.where(e).length()===this.length()}forEach(e){this.throwIfDisposed();for(let r=0;r<this.length();r++)e(this.privList[r],r)}select(e){this.throwIfDisposed();const r=[];for(let n=0;n<this.privList.length;n++)r.push(e(this.privList[n],n));return new Xt(r)}where(e){this.throwIfDisposed();const r=new Xt;for(let n=0;n<this.privList.length;n++)e(this.privList[n],n)&&r.add(this.privList[n]);return r}orderBy(e){this.throwIfDisposed();const n=this.toArray().sort(e);return new Xt(n)}orderByDesc(e){return this.throwIfDisposed(),this.orderBy((r,n)=>e(n,r))}clone(){return this.throwIfDisposed(),new Xt(this.toArray())}concat(e){return this.throwIfDisposed(),new Xt(this.privList.concat(e.toArray()))}concatArray(e){return this.throwIfDisposed(),new Xt(this.privList.concat(e))}isDisposed(){return this.privList==null}dispose(e){this.isDisposed()||(this.privDisposeReason=e,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new RI.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(e){if(e)for(const r in e)r&&e[r]()}}No.List=Xt;var Id={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.marshalPromiseToCallbacks=t.Sink=t.Deferred=t.PromiseResultEventSource=t.PromiseResult=t.PromiseState=void 0;var e;(function(o){o[o.None=0]="None",o[o.Resolved=1]="Resolved",o[o.Rejected=2]="Rejected"})(e=t.PromiseState||(t.PromiseState={}));class r{constructor(c){this.throwIfError=()=>{if(this.isError)throw this.error},c.on(u=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=u)},u=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=u)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}t.PromiseResult=r;class n{constructor(){this.setResult=c=>{this.privOnSetResult(c)},this.setError=c=>{this.privOnSetError(c)},this.on=(c,u)=>{this.privOnSetResult=c,this.privOnSetError=u}}}t.PromiseResultEventSource=n;class i{constructor(){this.resolve=c=>(this.privResolve(c),this),this.reject=c=>(this.privReject(c),this),this.privPromise=new Promise((c,u)=>{this.privResolve=c,this.privReject=u})}get promise(){return this.privPromise}}t.Deferred=i;class s{constructor(){this.privState=e.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new n,this.privPromiseResult=new r(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(c){if(this.privState!==e.None)throw new Error("'Cannot resolve a completed promise'");this.privState=e.Resolved,this.privPromiseResultEvents.setResult(c);for(let u=0;u<this.privSuccessHandlers.length;u++)this.executeSuccessCallback(c,this.privSuccessHandlers[u],this.privErrorHandlers[u]);this.detachHandlers()}reject(c){if(this.privState!==e.None)throw new Error("'Cannot reject a completed promise'");this.privState=e.Rejected,this.privPromiseResultEvents.setError(c);for(const u of this.privErrorHandlers)this.executeErrorCallback(c,u);this.detachHandlers()}on(c,u){c==null&&(c=()=>{}),this.privState===e.None?(this.privSuccessHandlers.push(c),this.privErrorHandlers.push(u)):(this.privState===e.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,c,u):this.privState===e.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,u),this.detachHandlers())}executeSuccessCallback(c,u,l){try{u(c)}catch(p){this.executeErrorCallback(`'Unhandled callback error: ${p}'`,l)}}executeErrorCallback(c,u){if(u)try{u(c)}catch(l){throw new Error(`'Unhandled callback error: ${l}. InnerError: ${c}'`)}else throw new Error(`'Unhandled error: ${c}'`)}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}}t.Sink=s;function a(o,c,u){o.then(l=>{try{c&&c(l)}catch(p){if(u)try{if(p instanceof Error){const d=p;u(d.name+": "+d.message)}else u(p)}catch{}}},l=>{if(u)try{if(l instanceof Error){const p=l;u(p.name+": "+p.message)}else u(l)}catch{}})}t.marshalPromiseToCallbacks=a})(Id);var zo={};Object.defineProperty(zo,"__esModule",{value:!0});zo.Queue=void 0;const hl=ye,fl=No,_f=Id;var no;(function(t){t[t.Dequeue=0]="Dequeue",t[t.Peek=1]="Peek"})(no||(no={}));class EI{constructor(e){this.privPromiseStore=new fl.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=e||new fl.List,this.privDetachables=[],this.privSubscribers=new fl.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(e){this.throwIfDispose(),this.enqueueFromPromise(new Promise(r=>r(e)))}enqueueFromPromise(e){this.throwIfDispose(),e.then(r=>{this.privList.add(r)},()=>{})}dequeue(){this.throwIfDispose();const e=new _f.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:no.Dequeue}),this.drain()),e.promise}peek(){this.throwIfDispose();const e=new _f.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:no.Peek}),this.drain()),e.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return this.privSubscribers==null}async drainAndDispose(e,r){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=r,this.privIsDisposing=!0;const n=this.privSubscribers;if(n){for(;n.length()>0;)n.removeFirst().deferral.resolve(void 0);this.privSubscribers===n&&(this.privSubscribers=n)}for(const i of this.privDetachables)await i.detach();if(this.privPromiseStore.length()>0&&e){const i=[];return this.privPromiseStore.toArray().forEach(s=>{i.push(s)}),Promise.all(i).finally(()=>{this.privSubscribers=null,this.privList.forEach(s=>{e(s)}),this.privList=null}).then()}else this.privSubscribers=null,this.privList=null}}async dispose(e){await this.drainAndDispose(null,e)}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const e=this.privSubscribers,r=this.privList;if(e&&r){for(;r.length()>0&&e.length()>0&&!this.privIsDisposing;){const n=e.removeFirst();if(n.type===no.Peek)n.deferral.resolve(r.first());else{const i=r.removeFirst();n.deferral.resolve(i)}}this.privSubscribers===e&&(this.privSubscribers=e),this.privList===r&&(this.privList=r)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed())throw this.privDisposeReason?new hl.InvalidOperationError(this.privDisposeReason):new hl.ObjectDisposedError("Queue");if(this.privIsDisposing)throw new hl.InvalidOperationError("Queue disposing")}}zo.Queue=EI;var Nc={};Object.defineProperty(Nc,"__esModule",{value:!0});Nc.RawWebsocketMessage=void 0;const ca=wd,ii=ye,wI=at;class II{constructor(e,r,n){if(this.privPayload=null,!r)throw new ii.ArgumentNullError("payload");if(e===ca.MessageType.Binary&&Object.getPrototypeOf(r).constructor.name!=="ArrayBuffer")throw new ii.InvalidOperationError("Payload must be ArrayBuffer");if(e===ca.MessageType.Text&&typeof r!="string")throw new ii.InvalidOperationError("Payload must be a string");this.privMessageType=e,this.privPayload=r,this.privId=n||wI.createNoDashGuid()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===ca.MessageType.Binary)throw new ii.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===ca.MessageType.Text)throw new ii.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}}Nc.RawWebsocketMessage=II;var zc={};Object.defineProperty(zc,"__esModule",{value:!0});zc.RiffPcmEncoder=void 0;class TI{constructor(e,r){this.privActualSampleRate=e,this.privDesiredSampleRate=r}encode(e){const r=this.downSampleAudioFrame(e,this.privActualSampleRate,this.privDesiredSampleRate);if(!r)return null;const n=r.length*2,i=new ArrayBuffer(n),s=new DataView(i);return this.floatTo16BitPCM(s,0,r),i}setString(e,r,n){for(let i=0;i<n.length;i++)e.setUint8(r+i,n.charCodeAt(i))}floatTo16BitPCM(e,r,n){for(let i=0;i<n.length;i++,r+=2){const s=Math.max(-1,Math.min(1,n[i]));e.setInt16(r,s<0?s*32768:s*32767,!0)}}downSampleAudioFrame(e,r,n){if(!e)return null;if(n===r||n>r)return e;const i=r/n,s=Math.round(e.length/i),a=new Float32Array(s);let o=0,c=0;for(;c<s;){const u=Math.round((c+1)*i);let l=0,p=0;for(;o<u&&o<e.length;)l+=e[o++],p++;a[c++]=l/p}return a}}zc.RiffPcmEncoder=TI;var Lc={};Object.defineProperty(Lc,"__esModule",{value:!0});Lc.Stream=void 0;const Af=ye,_I=at,kf=zo;class AI{constructor(e){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=e||_I.createNoDashGuid(),this.privReaderQueue=new kf.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch{}}read(){if(this.privIsReadEnded)throw new Af.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(async e=>((e===void 0||e.isEnd)&&await this.privReaderQueue.dispose("End of stream reached"),e))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new kf.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new Af.InvalidOperationError("Stream closed")}}Lc.Stream=AI;var jc={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationStatus=void 0,function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(t.TranslationStatus||(t.TranslationStatus={}))})(jc);var si={},Of;function kI(){if(Of)return si;Of=1,Object.defineProperty(si,"__esModule",{value:!0}),si.ChunkedArrayBufferStream=void 0;const t=M();let e=class extends t.Stream{constructor(n,i){super(i),this.privTargetChunkSize=Math.round(n),this.privNextBufferReadyBytes=0}writeStreamChunk(n){if(n.isEnd||this.privNextBufferReadyBytes===0&&n.buffer.byteLength===this.privTargetChunkSize){super.writeStreamChunk(n);return}let i=0;for(;i<n.buffer.byteLength;){this.privNextBufferToWrite===void 0&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=n.timeReceived);const s=Math.min(n.buffer.byteLength-i,this.privTargetChunkSize-this.privNextBufferReadyBytes),a=new Uint8Array(this.privNextBufferToWrite),o=new Uint8Array(n.buffer.slice(i,s+i));a.set(o,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=s,i+=s,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){this.privNextBufferReadyBytes!==0&&!this.isClosed&&super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}};return si.ChunkedArrayBufferStream=e,si}var Ly={};Object.defineProperty(Ly,"__esModule",{value:!0});var xc={};Object.defineProperty(xc,"__esModule",{value:!0});xc.Timeout=void 0;class ke{static load(){const e=new Map([[0,()=>{}]]),r=new Map,i="data:text/javascript;base64,"+btoa(`!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id "'.concat(e,'".'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);`),s=new Worker(i);return s.addEventListener("message",({data:c})=>{if(ke.isCallNotification(c)){const{params:{timerId:u}}=c,l=e.get(u);if(typeof l=="number"){const p=r.get(l);if(p===void 0||p!==u)throw new Error("The timer is in an undefined state.")}else if(typeof l<"u")l(),e.delete(u);else throw new Error("The timer is in an undefined state.")}else if(ke.isClearResponse(c)){const{id:u}=c,l=r.get(u);if(l===void 0)throw new Error("The timer is in an undefined state.");r.delete(u),e.delete(l)}else{const{error:{message:u}}=c;throw new Error(u)}}),{clearTimeout:c=>{const u=Math.random();r.set(u,c),e.set(c,u),s.postMessage({id:u,method:"clear",params:{timerId:c}})},setTimeout:(c,u)=>{const l=Math.random();return e.set(l,c),s.postMessage({id:null,method:"set",params:{delay:u,now:performance.now(),timerId:l}}),l}}}static loadWorkerTimers(){return()=>(ke.workerTimers!==null||(ke.workerTimers=ke.load()),ke.workerTimers)}static isCallNotification(e){return e.method!==void 0&&e.method==="call"}static isClearResponse(e){return e.error===null&&typeof e.id=="number"}}xc.Timeout=ke;ke.workerTimers=null;ke.clearTimeout=t=>ke.timers().clearTimeout(t);ke.setTimeout=(t,e)=>ke.timers().setTimeout(t,e);ke.timers=ke.loadWorkerTimers();var $={};Object.defineProperty($,"__esModule",{value:!0});$.OCSPCacheUpdateErrorEvent=$.OCSPResponseRetrievedEvent=$.OCSPCacheFetchErrorEvent=$.OCSPVerificationFailedEvent=$.OCSPCacheHitEvent=$.OCSPCacheEntryNeedsRefreshEvent=$.OCSPCacheEntryExpiredEvent=$.OCSPWSUpgradeStartedEvent=$.OCSPStapleReceivedEvent=$.OCSPCacheUpdateCompleteEvent=$.OCSPDiskCacheStoreEvent=$.OCSPMemoryCacheStoreEvent=$.OCSPCacheUpdateNeededEvent=$.OCSPDiskCacheHitEvent=$.OCSPCacheMissEvent=$.OCSPMemoryCacheHitEvent=$.OCSPEvent=void 0;const Pe=Vn;class Re extends Pe.PlatformEvent{constructor(e,r,n){super(e,r),this.privSignature=n}}$.OCSPEvent=Re;class OI extends Re{constructor(e){super("OCSPMemoryCacheHitEvent",Pe.EventType.Debug,e)}}$.OCSPMemoryCacheHitEvent=OI;class MI extends Re{constructor(e){super("OCSPCacheMissEvent",Pe.EventType.Debug,e)}}$.OCSPCacheMissEvent=MI;class bI extends Re{constructor(e){super("OCSPDiskCacheHitEvent",Pe.EventType.Debug,e)}}$.OCSPDiskCacheHitEvent=bI;class DI extends Re{constructor(e){super("OCSPCacheUpdateNeededEvent",Pe.EventType.Debug,e)}}$.OCSPCacheUpdateNeededEvent=DI;class NI extends Re{constructor(e){super("OCSPMemoryCacheStoreEvent",Pe.EventType.Debug,e)}}$.OCSPMemoryCacheStoreEvent=NI;class zI extends Re{constructor(e){super("OCSPDiskCacheStoreEvent",Pe.EventType.Debug,e)}}$.OCSPDiskCacheStoreEvent=zI;class LI extends Re{constructor(e){super("OCSPCacheUpdateCompleteEvent",Pe.EventType.Debug,e)}}$.OCSPCacheUpdateCompleteEvent=LI;class jI extends Re{constructor(){super("OCSPStapleReceivedEvent",Pe.EventType.Debug,"")}}$.OCSPStapleReceivedEvent=jI;class xI extends Re{constructor(e){super("OCSPWSUpgradeStartedEvent",Pe.EventType.Debug,e)}}$.OCSPWSUpgradeStartedEvent=xI;class BI extends Re{constructor(e,r){super("OCSPCacheEntryExpiredEvent",Pe.EventType.Debug,e),this.privExpireTime=r}}$.OCSPCacheEntryExpiredEvent=BI;class FI extends Re{constructor(e,r,n){super("OCSPCacheEntryNeedsRefreshEvent",Pe.EventType.Debug,e),this.privExpireTime=n,this.privStartTime=r}}$.OCSPCacheEntryNeedsRefreshEvent=FI;class qI extends Re{constructor(e,r,n){super("OCSPCacheHitEvent",Pe.EventType.Debug,e),this.privExpireTime=n,this.privExpireTimeString=new Date(n).toLocaleDateString(),this.privStartTime=r,this.privStartTimeString=new Date(r).toLocaleTimeString()}}$.OCSPCacheHitEvent=qI;class UI extends Re{constructor(e,r){super("OCSPVerificationFailedEvent",Pe.EventType.Debug,e),this.privError=r}}$.OCSPVerificationFailedEvent=UI;class $I extends Re{constructor(e,r){super("OCSPCacheFetchErrorEvent",Pe.EventType.Debug,e),this.privError=r}}$.OCSPCacheFetchErrorEvent=$I;class VI extends Re{constructor(e){super("OCSPResponseRetrievedEvent",Pe.EventType.Debug,e)}}$.OCSPResponseRetrievedEvent=VI;class WI extends Re{constructor(e,r){super("OCSPCacheUpdateErrorEvent",Pe.EventType.Debug,e),this.privError=r}}$.OCSPCacheUpdateErrorEvent=WI;var oi={},Mf;function HI(){if(Mf)return oi;Mf=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.BackgroundEvent=void 0;const t=M();class e extends t.PlatformEvent{constructor(n){super("BackgroundEvent",t.EventType.Error),this.privError=n}get error(){return this.privError}}return oi.BackgroundEvent=e,oi}var bf;function M(){return bf||(bf=1,function(t){var e=q&&q.__createBinding||(Object.create?function(i,s,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return s[a]}})}:function(i,s,a,o){o===void 0&&(o=a),i[o]=s[a]}),r=q&&q.__exportStar||function(i,s){for(var a in i)a!=="default"&&!s.hasOwnProperty(a)&&e(s,i,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(te,t),r(ae,t),r(wd,t),r(Mc,t),r(bc,t),r(Zr,t),r(ye,t),r(Dc,t),r(Do,t),r(at,t),r(Ty,t),r(_y,t),r(Ay,t),r(ky,t),r(Oy,t),r(My,t),r(by,t),r(Dy,t),r(Ny,t),r(zy,t),r(No,t),r(Vn,t),r(Id,t),r(zo,t),r(Nc,t),r(zc,t),r(Lc,t);var n=jc;Object.defineProperty(t,"TranslationStatus",{enumerable:!0,get:function(){return n.TranslationStatus}}),r(kI(),t),r(Ly,t),r(xc,t),r($,t),r(HI(),t)}(cl)),cl}var he={};Object.defineProperty(he,"__esModule",{value:!0});he.HeaderNames=void 0;class mt{}he.HeaderNames=mt;mt.AuthKey="Ocp-Apim-Subscription-Key";mt.Authorization="Authorization";mt.SpIDAuthKey="Apim-Subscription-Id";mt.ConnectionId="X-ConnectionId";mt.ContentType="Content-Type";mt.CustomCommandsAppId="X-CommandsAppId";mt.Path="Path";mt.RequestId="X-RequestId";mt.RequestStreamId="X-StreamId";mt.RequestTimestamp="X-Timestamp";var Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});Hn.AuthInfo=void 0;class KI{constructor(e,r){this.privHeaderName=e,this.privToken=r}get headerName(){return this.privHeaderName}get token(){return this.privToken}}Hn.AuthInfo=KI;Object.defineProperty(Sc,"__esModule",{value:!0});Sc.CognitiveSubscriptionKeyAuthentication=void 0;const JI=M(),GI=he,QI=Hn;class YI{constructor(e){if(!e)throw new JI.ArgumentNullError("subscriptionKey");this.privAuthInfo=new QI.AuthInfo(GI.HeaderNames.AuthKey,e)}fetch(e){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(e){return Promise.resolve(this.privAuthInfo)}}Sc.CognitiveSubscriptionKeyAuthentication=YI;var Bc={};Object.defineProperty(Bc,"__esModule",{value:!0});Bc.CognitiveTokenAuthentication=void 0;const Df=M(),Nf=Hn,zf=he;class wo{constructor(e,r){if(!e)throw new Df.ArgumentNullError("fetchCallback");if(!r)throw new Df.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=e,this.privFetchOnExpiryCallback=r}fetch(e){return this.privFetchCallback(e).then(r=>new Nf.AuthInfo(zf.HeaderNames.Authorization,r===void 0?void 0:wo.privTokenPrefix+r))}fetchOnExpiry(e){return this.privFetchOnExpiryCallback(e).then(r=>new Nf.AuthInfo(zf.HeaderNames.Authorization,r===void 0?void 0:wo.privTokenPrefix+r))}}Bc.CognitiveTokenAuthentication=wo;wo.privTokenPrefix="Bearer ";var jy={};Object.defineProperty(jy,"__esModule",{value:!0});var xy={};Object.defineProperty(xy,"__esModule",{value:!0});var ai={},vl={},Fc={};const XI={},ZI=Object.freeze(Object.defineProperty({__proto__:null,default:XI},Symbol.toStringTag,{value:"Module"})),nn=NP(ZI);var Td={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=void 0;const e=M();Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return e.EventType}})})(Td);var z={};Object.defineProperty(z,"__esModule",{value:!0});z.Contracts=void 0;class Zt{static throwIfNullOrUndefined(e,r){if(e==null)throw new Error("throwIfNullOrUndefined:"+r)}static throwIfNull(e,r){if(e===null)throw new Error("throwIfNull:"+r)}static throwIfNullOrWhitespace(e,r){if(Zt.throwIfNullOrUndefined(e,r),(""+e).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+r)}static throwIfNullOrTooLong(e,r,n){if(Zt.throwIfNullOrUndefined(e,r),(""+e).length>n)throw new Error("throwIfNullOrTooLong:"+r+" (more than "+n.toString()+" characters)")}static throwIfNullOrTooShort(e,r,n){if(Zt.throwIfNullOrUndefined(e,r),(""+e).length<n)throw new Error("throwIfNullOrTooShort:"+r+" (less than "+n.toString()+" characters)")}static throwIfDisposed(e){if(e)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(e,r){if(Zt.throwIfNullOrUndefined(e,r),e.length===0)throw new Error("throwIfArrayEmptyOrWhitespace:"+r);for(const n of e)Zt.throwIfNullOrWhitespace(n,r)}static throwIfFileDoesNotExist(e,r){Zt.throwIfNullOrWhitespace(e,r)}static throwIfNotUndefined(e,r){if(e!==void 0)throw new Error("throwIfNotUndefined:"+r)}}z.Contracts=Zt;var e0=q&&q.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),t0=q&&q.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r0=q&&q.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&e0(e,t,r);return t0(e,t),e};Object.defineProperty(Fc,"__esModule",{value:!0});Fc.ConsoleLoggingListener=void 0;const Lf=r0(nn),ci=Td,n0=z;class i0{constructor(e=ci.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=e}set logPath(e){n0.Contracts.throwIfNullOrUndefined(Lf.openSync,`
File System access not available`),this.privLogPath=e}set enableConsoleOutput(e){this.privEnableConsoleOutput=e}onEvent(e){if(e.eventType>=this.privLogLevelFilter){const r=this.toString(e);if(this.logCallback&&this.logCallback(r),this.privLogPath&&Lf.writeFileSync(this.privLogPath,r+`
`,{flag:"a+"}),this.privEnableConsoleOutput)switch(e.eventType){case ci.LogLevel.Debug:console.debug(r);break;case ci.LogLevel.Info:console.info(r);break;case ci.LogLevel.Warning:console.warn(r);break;case ci.LogLevel.Error:console.error(r);break;default:console.log(r);break}}}toString(e){const r=[`${e.eventTime}`,`${e.name}`],n=e;for(const i in n)if(i&&e.hasOwnProperty(i)&&i!=="eventTime"&&i!=="eventType"&&i!=="eventId"&&i!=="name"&&i!=="constructor"){const s=n[i];let a="<NULL>";s!=null&&(typeof s=="number"||typeof s=="string"?a=s.toString():a=JSON.stringify(s)),r.push(`${i}: ${a}`)}return r.join(" | ")}}Fc.ConsoleLoggingListener=i0;var By={};Object.defineProperty(By,"__esModule",{value:!0});var gl={},Rr={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AudioStreamFormatImpl=t.AudioStreamFormat=t.AudioFormatTag=void 0;var e;(function(i){i[i.PCM=1]="PCM",i[i.MuLaw=2]="MuLaw",i[i.Siren=3]="Siren",i[i.MP3=4]="MP3",i[i.SILKSkype=5]="SILKSkype",i[i.OGG_OPUS=6]="OGG_OPUS",i[i.WEBM_OPUS=7]="WEBM_OPUS",i[i.ALaw=8]="ALaw",i[i.FLAC=9]="FLAC",i[i.OPUS=10]="OPUS",i[i.AMR_WB=11]="AMR_WB",i[i.G722=12]="G722"})(e=t.AudioFormatTag||(t.AudioFormatTag={}));class r{static getDefaultInputFormat(){return n.getDefaultInputFormat()}static getWaveFormat(s,a,o,c){return new n(s,a,o,c)}static getWaveFormatPCM(s,a,o){return new n(s,a,o)}}t.AudioStreamFormat=r;class n extends r{constructor(s=16e3,a=16,o=1,c=e.PCM){super();let u=!0;switch(c){case e.PCM:this.formatTag=1;break;case e.ALaw:this.formatTag=6;break;case e.MuLaw:this.formatTag=7;break;default:u=!1}if(this.bitsPerSample=a,this.samplesPerSec=s,this.channels=o,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),u){this.privHeader=new ArrayBuffer(44);const l=new DataView(this.privHeader);this.setString(l,0,"RIFF"),l.setUint32(4,0,!0),this.setString(l,8,"WAVEfmt "),l.setUint32(16,16,!0),l.setUint16(20,this.formatTag,!0),l.setUint16(22,this.channels,!0),l.setUint32(24,this.samplesPerSec,!0),l.setUint32(28,this.avgBytesPerSec,!0),l.setUint16(32,this.channels*(this.bitsPerSample/8),!0),l.setUint16(34,this.bitsPerSample,!0),this.setString(l,36,"data"),l.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new n}static getAudioContext(s){const a=window.AudioContext||window.webkitAudioContext||!1;if(a)return s!==void 0&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new a({sampleRate:s}):new a;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(s,a,o){for(let c=0;c<o.length;c++)s.setUint8(a+c,o.charCodeAt(c))}}t.AudioStreamFormatImpl=n})(Rr);var jf;function s0(){return jf||(jf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MicAudioSource=t.AudioWorkletSourceURLPropertyName=void 0;const e=k(),r=M(),n=Rr;t.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class i{constructor(a,o,c,u){this.privRecorder=a,this.deviceId=o,this.privStreams={},this.privOutputChunkSize=i.AUDIOFORMAT.avgBytesPerSec/10,this.privId=c||r.createNoDashGuid(),this.privEvents=new r.EventSource,this.privMediaStream=u||null,this.privIsClosing=!1}get format(){return Promise.resolve(i.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new r.Deferred;try{this.createAudioContext()}catch(c){if(c instanceof Error){const u=c;this.privInitializeDeferral.reject(u.name+": "+u.message)}else this.privInitializeDeferral.reject(c);return this.privInitializeDeferral.promise}const a=window.navigator;let o=a.getUserMedia||a.webkitGetUserMedia||a.mozGetUserMedia||a.msGetUserMedia;if(a.mediaDevices&&(o=(c,u,l)=>{a.mediaDevices.getUserMedia(c).then(u).catch(l)}),o){const c=()=>{this.onEvent(new r.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new r.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):o({audio:this.deviceId?{deviceId:this.deviceId}:!0,video:!1},u=>{this.privMediaStream=u,this.onEvent(new r.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},u=>{const l=`Error occurred during microphone initialization: ${u}`;this.privInitializeDeferral.reject(l),this.onEvent(new r.AudioSourceErrorEvent(this.privId,l))})};this.privContext.state==="suspended"?this.privContext.resume().then(c).catch(u=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${u}`)}):c()}else{const c="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(c),this.onEvent(new r.AudioSourceErrorEvent(c,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(a){return this.onEvent(new r.AudioStreamNodeAttachingEvent(this.privId,a)),this.listen(a).then(o=>(this.onEvent(new r.AudioStreamNodeAttachedEvent(this.privId,a)),{detach:async()=>(o.readEnded(),delete this.privStreams[a],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,a)),this.turnOff()),id:()=>a,read:()=>o.read()}))}detach(a){a&&this.privStreams[a]&&(this.privStreams[a].close(),delete this.privStreams[a],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,a)))}async turnOff(){for(const a in this.privStreams)if(a){const o=this.privStreams[a];o&&o.close()}this.onEvent(new r.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(await this.privInitializeDeferral,this.privInitializeDeferral=null),await this.destroyAudioContext()}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(a=>({bitspersample:i.AUDIOFORMAT.bitsPerSample,channelcount:i.AUDIOFORMAT.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:a,samplerate:i.AUDIOFORMAT.samplesPerSec,type:e.type.Microphones}))}setProperty(a,o){if(a===t.AudioWorkletSourceURLPropertyName)this.privRecorder.setWorkletUrl(o);else throw new Error("Property '"+a+"' is not supported on Microphone.")}getMicrophoneLabel(){const a="microphone";if(this.privMicrophoneLabel!==void 0)return Promise.resolve(this.privMicrophoneLabel);if(this.privMediaStream===void 0||!this.privMediaStream.active)return Promise.resolve(a);this.privMicrophoneLabel=a;const o=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(o===void 0)return Promise.resolve(this.privMicrophoneLabel);const c=new r.Deferred;return navigator.mediaDevices.enumerateDevices().then(u=>{for(const l of u)if(l.deviceId===o){this.privMicrophoneLabel=l.label;break}c.resolve(this.privMicrophoneLabel)},()=>c.resolve(this.privMicrophoneLabel)),c.promise}async listen(a){await this.turnOn();const o=new r.ChunkedArrayBufferStream(this.privOutputChunkSize,a);this.privStreams[a]=o;try{this.privRecorder.record(this.privContext,this.privMediaStream,o)}catch(u){throw this.onEvent(new r.AudioStreamNodeErrorEvent(this.privId,a,u)),u}return o}onEvent(a){this.privEvents.onEvent(a),r.Events.instance.onEvent(a)}createAudioContext(){this.privContext||(this.privContext=n.AudioStreamFormatImpl.getAudioContext(i.AUDIOFORMAT.samplesPerSec))}async destroyAudioContext(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let a=!1;"close"in this.privContext&&(a=!0),a?this.privIsClosing||(this.privIsClosing=!0,await this.privContext.close(),this.privContext=null,this.privIsClosing=!1):this.privContext!==null&&this.privContext.state==="running"&&await this.privContext.suspend()}}t.MicAudioSource=i,i.AUDIOFORMAT=n.AudioStreamFormat.getDefaultInputFormat()}(gl)),gl}var ui={},xf;function o0(){if(xf)return ui;xf=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.FileAudioSource=void 0;const t=k(),e=M(),r=Rr;let n=class{constructor(s,a,o){this.privStreams={},this.privHeaderEnd=44,this.privId=o||e.createNoDashGuid(),this.privEvents=new e.EventSource,this.privSource=s,typeof window<"u"&&typeof Blob<"u"&&this.privSource instanceof Blob?this.privFilename=s.name:this.privFilename=a||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const s=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new e.AudioSourceErrorEvent(s,"")),Promise.reject(s)}this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.onEvent(new e.AudioSourceReadyEvent(this.privId))}id(){return this.privId}async attach(s){this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,s));const a=await this.upload(s);return this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,s)),Promise.resolve({detach:async()=>{a.readEnded(),delete this.privStreams[s],this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,s)),await this.turnOff()},id:()=>s,read:()=>a.read()})}detach(s){s&&this.privStreams[s]&&(this.privStreams[s].close(),delete this.privStreams[s],this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,s)))}turnOff(){for(const s in this.privStreams)if(s){const a=this.privStreams[s];a&&!a.isClosed&&a.close()}return this.onEvent(new e.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(s=>Promise.resolve({bitspersample:s.bitsPerSample,channelcount:s.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:s.samplesPerSec,type:t.type.File}))}readHeader(){const a=this.privSource.slice(0,4296),o=new e.Deferred,c=u=>{const l=new DataView(u),p=v=>String.fromCharCode(l.getUint8(v),l.getUint8(v+1),l.getUint8(v+2),l.getUint8(v+3));if(p(0)!=="RIFF"){o.reject("Invalid WAV header in file, RIFF was not found");return}if(p(8)!=="WAVE"||p(12)!=="fmt "){o.reject("Invalid WAV header in file, WAVEfmt was not found");return}const d=l.getInt32(16,!0),h=l.getUint16(22,!0),f=l.getUint32(24,!0),m=l.getUint16(34,!0);let y=36+Math.max(d-16,0);for(;p(y)!=="data";y+=2)if(y>4288){o.reject("Invalid WAV header in file, data block was not found");return}this.privHeaderEnd=y+8,o.resolve(r.AudioStreamFormat.getWaveFormatPCM(f,m,h))};if(typeof window<"u"&&typeof Blob<"u"&&a instanceof Blob){const u=new FileReader;u.onload=l=>{const p=l.target.result;c(p)},u.readAsArrayBuffer(a)}else{const u=a;c(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength))}return o.promise}async upload(s){const a=o=>{const c=`Error occurred while processing '${this.privFilename}'. ${o}`;throw this.onEvent(new e.AudioStreamNodeErrorEvent(this.privId,s,c)),new Error(c)};try{await this.turnOn();const o=await this.privAudioFormatPromise,c=new e.ChunkedArrayBufferStream(o.avgBytesPerSec/10,s);this.privStreams[s]=c;const u=this.privSource.slice(this.privHeaderEnd),l=p=>{c.isClosed||(c.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()}),c.close())};if(typeof window<"u"&&typeof Blob<"u"&&u instanceof Blob){const p=new FileReader;p.onerror=d=>a(d.toString()),p.onload=d=>{const h=d.target.result;l(h)},p.readAsArrayBuffer(u)}else{const p=u;l(p.buffer.slice(p.byteOffset,p.byteOffset+p.byteLength))}return c}catch(o){a(o)}}onEvent(s){this.privEvents.onEvent(s),e.Events.instance.onEvent(s)}};return ui.FileAudioSource=n,ui}var qc={};Object.defineProperty(qc,"__esModule",{value:!0});qc.PcmRecorder=void 0;const a0=M();class c0{constructor(e){this.privStopInputOnRelease=e}record(e,r,n){const s=new a0.RiffPcmEncoder(e.sampleRate,16e3),a=e.createMediaStreamSource(r),o=()=>{const u=(()=>{let l=0;try{return e.createScriptProcessor(l,1,1)}catch{l=2048;let d=e.sampleRate;for(;l<16384&&d>=32e3;)l<<=1,d>>=1;return e.createScriptProcessor(l,1,1)}})();u.onaudioprocess=l=>{const p=l.inputBuffer.getChannelData(0);if(n&&!n.isClosed){const d=s.encode(p);d&&n.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}},a.connect(u),u.connect(e.destination),this.privMediaResources={scriptProcessorNode:u,source:a,stream:r}},c=!!this.privSpeechProcessorScript&&this.privSpeechProcessorScript.toLowerCase()==="ignore";if(e.audioWorklet&&!c){if(!this.privSpeechProcessorScript){const u=`class SP extends AudioWorkletProcessor {
                    constructor(options) {
                      super(options);
                    }
                    process(inputs, outputs) {
                      const input = inputs[0];
                      const output = [];
                      for (let channel = 0; channel < input.length; channel += 1) {
                        output[channel] = input[channel];
                      }
                      this.port.postMessage(output[0]);
                      return true;
                    }
                  }
                  registerProcessor('speech-processor', SP);`,l=new Blob([u],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(l)}e.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{const u=new AudioWorkletNode(e,"speech-processor");u.port.onmessage=l=>{const p=l.data;if(n&&!n.isClosed){const d=s.encode(p);d&&n.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}},a.connect(u),u.connect(e.destination),this.privMediaResources={scriptProcessorNode:u,source:a,stream:r}}).catch(()=>{o()})}else try{o()}catch(u){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${u}`)}}releaseMediaResources(e){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(e.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(r=>r.stop()),this.privMediaResources.source=null))}setWorkletUrl(e){this.privSpeechProcessorScript=e}}qc.PcmRecorder=c0;var Uc={},Lo={},u0=q&&q.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),l0=q&&q.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Fy=q&&q.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&u0(e,t,r);return l0(e,t),e},_d=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Lo,"__esModule",{value:!0});Lo.WebsocketMessageAdapter=void 0;const p0=Fy(nn),d0=Fy(nn),h0=_d(nn),f0=_d(nn),v0=_d(nn),g0=he,x=M();class Io{constructor(e,r,n,i,s,a){if(!e)throw new x.ArgumentNullError("uri");if(!n)throw new x.ArgumentNullError("messageFormatter");this.proxyInfo=i,this.privConnectionEvents=new x.EventSource,this.privConnectionId=r,this.privMessageFormatter=n,this.privConnectionState=x.ConnectionState.None,this.privUri=e,this.privHeaders=s,this.privEnableCompression=a,this.privHeaders[g0.HeaderNames.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===x.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new x.Deferred,this.privCertificateValidatedDeferral=new x.Deferred,this.privConnectionState=x.ConnectionState.Connecting;try{if(typeof WebSocket<"u"&&!Io.forceNpmWebSocket)this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);else{const e={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};this.privCertificateValidatedDeferral.resolve(),e.agent=this.getAgent();let n=new URL(this.privUri).protocol;(n==null?void 0:n.toLocaleLowerCase())==="wss:"?n="https:":(n==null?void 0:n.toLocaleLowerCase())==="ws:"&&(n="http:"),e.agent.protocol=n,this.privWebsocketClient=new v0.default(this.privUri,e)}this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new x.Queue,this.privDisconnectDeferral=new x.Deferred,this.privSendMessageQueue=new x.Queue,this.processSendQueue().catch(e=>{x.Events.instance.onEvent(new x.BackgroundEvent(e))})}catch(e){return this.privConnectionEstablishDeferral.resolve(new x.ConnectionOpenResponse(500,e)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new x.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=x.ConnectionState.Connected,this.onEvent(new x.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new x.ConnectionOpenResponse(200,""))},e=>{this.privConnectionEstablishDeferral.reject(e)})},this.privWebsocketClient.onerror=e=>{this.onEvent(new x.ConnectionErrorEvent(this.privConnectionId,e.message,e.type)),this.privLastErrorReceived=e.message},this.privWebsocketClient.onclose=e=>{this.privConnectionState===x.ConnectionState.Connecting?(this.privConnectionState=x.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new x.ConnectionOpenResponse(e.code,e.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=x.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new x.ConnectionClosedEvent(this.privConnectionId,e.code,e.reason))),this.onClose(e.code,e.reason).catch(r=>{x.Events.instance.onEvent(new x.BackgroundEvent(r))})},this.privWebsocketClient.onmessage=e=>{const r=new Date().toISOString();if(this.privConnectionState===x.ConnectionState.Connected){const n=new x.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(n.promise),e.data instanceof ArrayBuffer){const i=new x.RawWebsocketMessage(x.MessageType.Binary,e.data);this.privMessageFormatter.toConnectionMessage(i).then(s=>{this.onEvent(new x.ConnectionMessageReceivedEvent(this.privConnectionId,r,s)),n.resolve(s)},s=>{n.reject(`Invalid binary message format. Error: ${s}`)})}else{const i=new x.RawWebsocketMessage(x.MessageType.Text,e.data);this.privMessageFormatter.toConnectionMessage(i).then(s=>{this.onEvent(new x.ConnectionMessageReceivedEvent(this.privConnectionId,r,s)),n.resolve(s)},s=>{n.reject(`Invalid text message format. Error: ${s}`)})}}},this.privConnectionEstablishDeferral.promise}send(e){if(this.privConnectionState!==x.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${x.ConnectionState[this.privConnectionState]} state`);const r=new x.Deferred,n=new x.Deferred;return this.privSendMessageQueue.enqueueFromPromise(n.promise),this.privMessageFormatter.fromConnectionMessage(e).then(i=>{n.resolve({Message:e,RawWebsocketMessage:i,sendStatusDeferral:r})},i=>{n.reject(`Error formatting the message. ${i}`)}),r.promise}read(){return this.privConnectionState!==x.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(e){if(this.privWebsocketClient)this.privConnectionState!==x.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,e||"Normal closure by client");else return Promise.resolve();return this.privDisconnectDeferral.promise}get events(){return this.privConnectionEvents}sendRawMessage(e){try{if(!e)return Promise.resolve();if(this.onEvent(new x.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),e.Message)),this.isWebsocketOpen)this.privWebsocketClient.send(e.RawWebsocketMessage.payload);else return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+e.Message.id+" "+new Error().stack);return Promise.resolve()}catch(r){return Promise.reject(`websocket send error: ${r}`)}}async onClose(e,r){const n=`Connection closed. ${e}: ${r}`;this.privConnectionState=x.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),await this.privReceivingMessageQueue.drainAndDispose(()=>{},n),await this.privSendMessageQueue.drainAndDispose(i=>{i.sendStatusDeferral.reject(n)},n)}async processSendQueue(){for(;;){const r=await this.privSendMessageQueue.dequeue();if(!r)return;try{await this.sendRawMessage(r),r.sendStatusDeferral.resolve()}catch(n){r.sendStatusDeferral.reject(n)}}}onEvent(e){this.privConnectionEvents.onEvent(e),x.Events.instance.onEvent(e)}getAgent(){const e=new h0.default.Agent(this.createConnection);return this.proxyInfo!==void 0&&this.proxyInfo.HostName!==void 0&&this.proxyInfo.Port>0&&(e.proxyInfo=this.proxyInfo),e}static GetProxyAgent(e){const r={host:e.HostName,port:e.Port};return e.UserName?r.headers={"Proxy-Authentication":"Basic "+new Buffer(`${e.UserName}:${e.Password===void 0?"":e.Password}`).toString("base64")}:r.headers={},r.headers.requestOCSP="true",new f0.default(r)}createConnection(e,r){let n;if(r={...r,requestOCSP:!0,servername:r.host},this.proxyInfo){const s=Io.GetProxyAgent(this.proxyInfo);n=new Promise((a,o)=>{s.callback(e,r,(c,u)=>{c?o(c):a(u)})})}else r.secureEndpoint?n=Promise.resolve(d0.connect(r)):n=Promise.resolve(p0.connect(r));return n}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}Lo.WebsocketMessageAdapter=Io;Io.forceNpmWebSocket=!1;Object.defineProperty(Uc,"__esModule",{value:!0});Uc.WebsocketConnection=void 0;const ml=M(),m0=Lo;class S0{constructor(e,r,n,i,s,a=!1,o){if(this.privIsDisposed=!1,!e)throw new ml.ArgumentNullError("uri");if(!i)throw new ml.ArgumentNullError("messageFormatter");this.privMessageFormatter=i;let c="",u=0;if(r){for(const l in r)if(l){c+=u===0&&e.indexOf("?")===-1?"?":"&";const p=encodeURIComponent(l);c+=p;let d=r[l];d&&(d=encodeURIComponent(d),c+=`=${d}`),u++}}if(n){for(const l in n)if(l){c+=u===0&&e.indexOf("?")===-1?"?":"&";const p=encodeURIComponent(n[l]);c+=`${l}=${p}`,u++}}this.privUri=e+c,this.privId=o||ml.createNoDashGuid(),this.privConnectionMessageAdapter=new m0.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,s,n,a)}async dispose(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&await this.privConnectionMessageAdapter.close()}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(e){return this.privConnectionMessageAdapter.send(e)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}}Uc.WebsocketConnection=S0;var $c={};Object.defineProperty($c,"__esModule",{value:!0});$c.ReplayableAudioNode=void 0;class y0{constructor(e,r){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=e,this.privBytesPerSecond=r}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&this.privBuffers.length!==0){const e=this.privReplayOffset-this.privBufferStartOffset;let r=Math.round(e*this.privBytesPerSecond*1e-7);r%2!==0&&r++;let n=0;for(;n<this.privBuffers.length&&r>=this.privBuffers[n].chunk.buffer.byteLength;)r-=this.privBuffers[n++].chunk.buffer.byteLength;if(n<this.privBuffers.length){const i=this.privBuffers[n].chunk.buffer.slice(r);return this.privReplayOffset+=i.byteLength/this.privBytesPerSecond*1e7,n===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:i,isEnd:!1,timeReceived:this.privBuffers[n].chunk.timeReceived})}}return this.privAudioNode.read().then(e=>(e&&e.buffer&&(this.privBuffers.push(new C0(e,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=e.buffer.byteLength),e))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&this.privBuffers.length!==0&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(e){if(this.privBuffers===void 0||this.privBuffers.length===0)return;this.privLastShrinkOffset=e;const r=e-this.privBufferStartOffset;let n=Math.round(r*this.privBytesPerSecond*1e-7),i=0;for(;i<this.privBuffers.length&&n>=this.privBuffers[i].chunk.buffer.byteLength;)n-=this.privBuffers[i++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(e-n/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(i)}findTimeAtOffset(e){if(e<this.privBufferStartOffset||this.privBuffers===void 0)return 0;for(const r of this.privBuffers){const n=r.byteOffset/this.privBytesPerSecond*1e7,i=n+r.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(e>=n&&e<=i)return r.chunk.timeReceived}return 0}}$c.ReplayableAudioNode=y0;class C0{constructor(e,r,n){this.chunk=e,this.serial=r,this.byteOffset=n}}var li={},Sl={},Mt={},jo={},P0=q&&q.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),R0=q&&q.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),E0=q&&q.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&P0(e,t,r);return R0(e,t),e};Object.defineProperty(jo,"__esModule",{value:!0});jo.AudioFileWriter=void 0;const pi=E0(nn),yl=z;class w0{constructor(e){yl.Contracts.throwIfNullOrUndefined(pi.openSync,`
File System access not available, please use Push or PullAudioOutputStream`),this.privFd=pi.openSync(e,"w")}set format(e){yl.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;let r=0;this.privAudioFormat.hasHeader&&(r=this.privAudioFormat.header.byteLength),this.privFd!==void 0&&(this.privWriteStream=pi.createWriteStream("",{fd:this.privFd,start:r,autoClose:!1}))}write(e){yl.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),this.privWriteStream!==void 0&&this.privWriteStream.write(new Uint8Array(e.slice(0)))}close(){this.privFd!==void 0&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),pi.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),pi.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}}jo.AudioFileWriter=w0;var Ke={},Bf;function qy(){if(Bf)return Ke;Bf=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.PullAudioInputStreamImpl=Ke.PullAudioInputStream=Ke.PushAudioInputStreamImpl=Ke.PushAudioInputStream=Ke.AudioInputStream=void 0;const t=k(),e=M(),r=at,n=I(),i=Rr;let s=class{constructor(){}static createPushStream(p){return a.create(p)}static createPullStream(p,d){return c.create(p,d)}};Ke.AudioInputStream=s;class a extends s{static create(p){return new o(p)}}Ke.PushAudioInputStream=a;class o extends a{constructor(p){super(),p===void 0?this.privFormat=i.AudioStreamFormatImpl.getDefaultInputFormat():this.privFormat=p,this.privEvents=new e.EventSource,this.privId=r.createNoDashGuid(),this.privStream=new e.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(p){this.privStream.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.onEvent(new e.AudioSourceReadyEvent(this.privId))}async attach(p){this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,p)),await this.turnOn();const d=this.privStream;return this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,p)),{detach:async()=>(this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,p)),this.turnOff()),id:()=>p,read:()=>d.read()}}detach(p){this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,p))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:t.type.Stream})}onEvent(p){this.privEvents.onEvent(p),e.Events.instance.onEvent(p)}toBuffer(p){const d=Buffer.alloc(p.byteLength),h=new Uint8Array(p);for(let f=0;f<d.length;++f)d[f]=h[f];return d}}Ke.PushAudioInputStreamImpl=o;class c extends s{constructor(){super()}static create(p,d){return new u(p,d)}}Ke.PullAudioInputStream=c;class u extends c{constructor(p,d){super(),d===void 0?this.privFormat=n.AudioStreamFormat.getDefaultInputFormat():this.privFormat=d,this.privEvents=new e.EventSource,this.privId=r.createNoDashGuid(),this.privCallback=p,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.onEvent(new e.AudioSourceReadyEvent(this.privId))}async attach(p){return this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,p)),await this.turnOn(),this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,p)),{detach:()=>(this.privCallback.close(),this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,p)),this.turnOff()),id:()=>p,read:()=>{let d=0,h;for(;d<this.privBufferSize;){const f=new ArrayBuffer(this.privBufferSize-d),m=this.privCallback.read(f);if(h===void 0?h=f:new Int8Array(h).set(new Int8Array(f),d),m===0)break;d+=m}return Promise.resolve({buffer:h.slice(0,d),isEnd:this.privIsClosed||d===0,timeReceived:Date.now()})}}}detach(p){this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,p))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:t.type.Stream})}onEvent(p){this.privEvents.onEvent(p),e.Events.instance.onEvent(p)}}return Ke.PullAudioInputStreamImpl=u,Ke}var me={},Er={},Ad={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisOutputFormat=void 0,function(e){e[e.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",e[e.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",e[e.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",e[e.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",e[e.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",e[e.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",e[e.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",e[e.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",e[e.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",e[e.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",e[e.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",e[e.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",e[e.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",e[e.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",e[e.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",e[e.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",e[e.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",e[e.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",e[e.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",e[e.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",e[e.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",e[e.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",e[e.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",e[e.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",e[e.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",e[e.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",e[e.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",e[e.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",e[e.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",e[e.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",e[e.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",e[e.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",e[e.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",e[e.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",e[e.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",e[e.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",e[e.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm",e[e.AmrWb16000Hz=37]="AmrWb16000Hz",e[e.G72216Khz64Kbps=38]="G72216Khz64Kbps"}(t.SpeechSynthesisOutputFormat||(t.SpeechSynthesisOutputFormat={}))})(Ad);Object.defineProperty(Er,"__esModule",{value:!0});Er.AudioOutputFormatImpl=void 0;const F=Ad,B=Rr;class D extends B.AudioStreamFormatImpl{constructor(e,r,n,i,s,a,o,c,u){super(n,a,r,e),this.formatTag=e,this.avgBytesPerSec=i,this.blockAlign=s,this.priAudioFormatString=o,this.priRequestAudioFormatString=c,this.priHasHeader=u}static fromSpeechSynthesisOutputFormat(e){return e===void 0?D.getDefaultOutputFormat():D.fromSpeechSynthesisOutputFormatString(D.SpeechSynthesisOutputFormatToString[e])}static fromSpeechSynthesisOutputFormatString(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new D(B.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new D(B.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new D(B.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new D(B.AudioFormatTag.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new D(B.AudioFormatTag.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new D(B.AudioFormatTag.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new D(B.AudioFormatTag.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new D(B.AudioFormatTag.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new D(B.AudioFormatTag.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new D(B.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new D(B.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new D(B.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new D(B.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new D(B.AudioFormatTag.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new D(B.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new D(B.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new D(B.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,e,e,!1);case"ogg-24khz-16bit-mono-opus":return new D(B.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,e,e,!1);case"raw-48khz-16bit-mono-pcm":return new D(B.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new D(B.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new D(B.AudioFormatTag.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new D(B.AudioFormatTag.MP3,1,48e3,24576,2,16,e,e,!1);case"ogg-48khz-16bit-mono-opus":return new D(B.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,e,e,!1);case"webm-16khz-16bit-mono-opus":return new D(B.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,e,e,!1);case"webm-24khz-16bit-mono-opus":return new D(B.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,e,e,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new D(B.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new D(B.AudioFormatTag.OPUS,1,16e3,4e3,2,16,e,e,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new D(B.AudioFormatTag.OPUS,1,24e3,6e3,2,16,e,e,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new D(B.AudioFormatTag.OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-24khz-16bit-mono-flac":return new D(B.AudioFormatTag.FLAC,1,24e3,24e3,2,16,e,e,!1);case"audio-48khz-16bit-mono-flac":return new D(B.AudioFormatTag.FLAC,1,48e3,3e4,2,16,e,e,!1);case"raw-24khz-16bit-mono-truesilk":return new D(B.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,e,e,!1);case"raw-8khz-8bit-mono-alaw":return new D(B.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,e,!1);case"riff-8khz-8bit-mono-alaw":return new D(B.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new D(B.AudioFormatTag.PCM,1,22050,44100,2,16,e,e,!1);case"riff-22050hz-16bit-mono-pcm":return new D(B.AudioFormatTag.PCM,1,22050,44100,2,16,e,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new D(B.AudioFormatTag.PCM,1,44100,88200,2,16,e,e,!1);case"riff-44100hz-16bit-mono-pcm":return new D(B.AudioFormatTag.PCM,1,44100,88200,2,16,e,"raw-44100hz-16bit-mono-pcm",!0);case"amr-wb-16000h":return new D(B.AudioFormatTag.AMR_WB,1,16e3,3052,2,16,e,e,!1);case"g722-16khz-64kbps":return new D(B.AudioFormatTag.G722,1,16e3,8e3,2,16,e,e,!1);case"riff-16khz-16bit-mono-pcm":default:return new D(B.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return D.fromSpeechSynthesisOutputFormatString(typeof window<"u"?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(e){if(this.priHasHeader){const r=new DataView(this.privHeader);r.setUint32(4,e+this.privHeader.byteLength-8,!0),r.setUint32(40,e,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(e){if(!this.hasHeader)return e;this.updateHeader(e.byteLength);const r=new Uint8Array(e.byteLength+this.header.byteLength);return r.set(new Uint8Array(this.header),0),r.set(new Uint8Array(e),this.header.byteLength),r.buffer}}Er.AudioOutputFormatImpl=D;D.SpeechSynthesisOutputFormatToString={[F.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[F.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[F.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[F.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[F.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[F.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[F.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[F.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[F.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[F.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[F.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[F.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[F.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[F.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[F.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[F.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[F.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[F.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[F.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[F.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[F.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[F.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[F.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[F.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[F.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[F.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.AmrWb16000Hz]:"amr-wb-16000hz",[F.SpeechSynthesisOutputFormat.G72216Khz64Kbps]:"g722-16khz-64kbps"};Object.defineProperty(me,"__esModule",{value:!0});me.PushAudioOutputStreamImpl=me.PushAudioOutputStream=me.PullAudioOutputStreamImpl=me.PullAudioOutputStream=me.AudioOutputStream=void 0;const wp=M(),I0=z,T0=Er;class kd{constructor(){}static createPullStream(){return Od.create()}}me.AudioOutputStream=kd;class Od extends kd{static create(){return new Uy}}me.PullAudioOutputStream=Od;class Uy extends Od{constructor(){super(),this.privId=wp.createNoDashGuid(),this.privStream=new wp.Stream}set format(e){e==null&&(this.privFormat=T0.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=e}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}async read(e){const r=new Int8Array(e);let n=0;if(this.privLastChunkView!==void 0){if(this.privLastChunkView.length>e.byteLength)return r.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),Promise.resolve(e.byteLength);r.set(this.privLastChunkView),n=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;n<e.byteLength&&!this.privStream.isReadEnded;){const i=await this.privStream.read();if(i!==void 0&&!i.isEnd){let s;i.buffer.byteLength>e.byteLength-n?(s=i.buffer.slice(0,e.byteLength-n),this.privLastChunkView=new Int8Array(i.buffer.slice(e.byteLength-n))):s=i.buffer,r.set(new Int8Array(s),n),n+=s.byteLength}else this.privStream.readEnded()}return n}write(e){I0.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}me.PullAudioOutputStreamImpl=Uy;class $y extends kd{constructor(){super()}static create(e){return new Vy(e)}}me.PushAudioOutputStream=$y;class Vy extends $y{constructor(e){super(),this.privId=wp.createNoDashGuid(),this.privCallback=e}set format(e){}write(e){this.privCallback.write&&this.privCallback.write(e)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}me.PushAudioOutputStreamImpl=Vy;var Ff;function Hy(){if(Ff)return Mt;Ff=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.AudioOutputConfigImpl=Mt.AudioConfigImpl=Mt.AudioConfig=void 0;const t=fe(),e=z,r=I(),n=jo,i=qy(),s=me;let a=class Wy{static fromDefaultMicrophoneInput(){const l=new t.PcmRecorder(!0);return new o(new t.MicAudioSource(l))}static fromMicrophoneInput(l){const p=new t.PcmRecorder(!0);return new o(new t.MicAudioSource(p,l))}static fromWavFileInput(l,p="unnamedBuffer.wav"){return new o(new t.FileAudioSource(l,p))}static fromStreamInput(l){if(l instanceof r.PullAudioInputStreamCallback)return new o(new i.PullAudioInputStreamImpl(l));if(l instanceof r.AudioInputStream)return new o(l);if(typeof MediaStream<"u"&&l instanceof MediaStream){const p=new t.PcmRecorder(!1);return new o(new t.MicAudioSource(p,null,null,l))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new c(new r.SpeakerAudioDestination)}static fromSpeakerOutput(l){if(l===void 0)return Wy.fromDefaultSpeakerOutput();if(l instanceof r.SpeakerAudioDestination)return new c(l);throw new Error("Not Supported Type")}static fromAudioFileOutput(l){return new c(new n.AudioFileWriter(l))}static fromStreamOutput(l){if(l instanceof r.PushAudioOutputStreamCallback)return new c(new s.PushAudioOutputStreamImpl(l));if(l instanceof r.PushAudioOutputStream)return new c(l);if(l instanceof r.PullAudioOutputStream)return new c(l);throw new Error("Not Supported Type")}};Mt.AudioConfig=a;class o extends a{constructor(l){super(),this.privSource=l}get format(){return this.privSource.format}close(l,p){this.privSource.turnOff().then(()=>{l&&l()},d=>{p&&p(d)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(l){return this.privSource.attach(l)}detach(l){return this.privSource.detach(l)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(l,p){if(e.Contracts.throwIfNull(p,"value"),this.privSource.setProperty!==void 0)this.privSource.setProperty(l,p);else throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(l,p){if(this.privSource.getProperty!==void 0)return this.privSource.getProperty(l,p);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}Mt.AudioConfigImpl=o;class c extends a{constructor(l){super(),this.privDestination=l}set format(l){this.privDestination.format=l}write(l){this.privDestination.write(l)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}return Mt.AudioOutputConfigImpl=c,Mt}var Ky={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationReason=void 0,function(e){e[e.Error=0]="Error",e[e.EndOfStream=1]="EndOfStream"}(t.CancellationReason||(t.CancellationReason={}))})(Ky);var Vc={};Object.defineProperty(Vc,"__esModule",{value:!0});Vc.PullAudioInputStreamCallback=void 0;class _0{}Vc.PullAudioInputStreamCallback=_0;var Wc={};Object.defineProperty(Wc,"__esModule",{value:!0});Wc.PushAudioOutputStreamCallback=void 0;class A0{}Wc.PushAudioOutputStreamCallback=A0;var Hc={};Object.defineProperty(Hc,"__esModule",{value:!0});Hc.KeywordRecognitionModel=void 0;const qf=z;class k0{constructor(){this.privDisposed=!1}static fromFile(e){throw qf.Contracts.throwIfFileDoesNotExist(e,"fileName"),new Error("Not yet implemented.")}static fromStream(e){throw qf.Contracts.throwIfNull(e,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}}Hc.KeywordRecognitionModel=k0;var Kc={};Object.defineProperty(Kc,"__esModule",{value:!0});Kc.SessionEventArgs=void 0;class O0{constructor(e){this.privSessionId=e}get sessionId(){return this.privSessionId}}Kc.SessionEventArgs=O0;var di={},Uf;function M0(){if(Uf)return di;Uf=1,Object.defineProperty(di,"__esModule",{value:!0}),di.RecognitionEventArgs=void 0;const t=I();let e=class extends t.SessionEventArgs{constructor(n,i){super(i),this.privOffset=n}get offset(){return this.privOffset}};return di.RecognitionEventArgs=e,di}var Jy={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.OutputFormat=void 0,function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(t.OutputFormat||(t.OutputFormat={}))})(Jy);var hi={},$f;function b0(){if($f)return hi;$f=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.IntentRecognitionEventArgs=void 0;const t=I();let e=class extends t.RecognitionEventArgs{constructor(n,i,s){super(i,s),this.privResult=n}get result(){return this.privResult}};return hi.IntentRecognitionEventArgs=e,hi}var Jc={};Object.defineProperty(Jc,"__esModule",{value:!0});Jc.RecognitionResult=void 0;class D0{constructor(e,r,n,i,s,a,o,c,u,l){this.privResultId=e,this.privReason=r,this.privText=n,this.privDuration=i,this.privOffset=s,this.privLanguage=a,this.privLanguageDetectionConfidence=o,this.privErrorDetails=c,this.privJson=u,this.privProperties=l}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}}Jc.RecognitionResult=D0;var fi={},Vf;function N0(){if(Vf)return fi;Vf=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.SpeechRecognitionResult=void 0;const t=I();let e=class extends t.RecognitionResult{constructor(n,i,s,a,o,c,u,l,p,d,h){super(n,i,s,a,o,c,u,p,d,h),this.privSpeakerId=l}get speakerId(){return this.privSpeakerId}};return fi.SpeechRecognitionResult=e,fi}var vi={},Wf;function z0(){if(Wf)return vi;Wf=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.IntentRecognitionResult=void 0;const t=I();let e=class extends t.SpeechRecognitionResult{constructor(n,i,s,a,o,c,u,l,p,d,h){super(i,s,a,o,c,u,l,void 0,p,d,h),this.privIntentId=n}get intentId(){return this.privIntentId}};return vi.IntentRecognitionResult=e,vi}var jn={};Object.defineProperty(jn,"__esModule",{value:!0});jn.LanguageUnderstandingModelImpl=jn.LanguageUnderstandingModel=void 0;const ln=z;class Gy{constructor(){}static fromEndpoint(e){ln.Contracts.throwIfNull(e,"uri"),ln.Contracts.throwIfNullOrWhitespace(e.hostname,"uri");const r=new Ea,n=e.host.indexOf(".");if(n===-1)throw new Error("Could not determine region from endpoint");r.region=e.host.substr(0,n);const i=e.pathname.lastIndexOf("/")+1;if(i===-1)throw new Error("Could not determine appId from endpoint");if(r.appId=e.pathname.substr(i),r.subscriptionKey=e.searchParams.get("subscription-key"),r.subscriptionKey===void 0)throw new Error("Could not determine subscription key from endpoint");return r}static fromAppId(e){ln.Contracts.throwIfNullOrWhitespace(e,"appId");const r=new Ea;return r.appId=e,r}static fromSubscription(e,r,n){ln.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),ln.Contracts.throwIfNullOrWhitespace(r,"appId"),ln.Contracts.throwIfNullOrWhitespace(n,"region");const i=new Ea;return i.appId=r,i.region=n,i.subscriptionKey=e,i}}jn.LanguageUnderstandingModel=Gy;class Ea extends Gy{}jn.LanguageUnderstandingModelImpl=Ea;var bt={},Hf;function L0(){if(Hf)return bt;Hf=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.MeetingTranscriptionEventArgs=bt.ConversationTranscriptionEventArgs=bt.SpeechRecognitionEventArgs=void 0;const t=I();let e=class extends t.RecognitionEventArgs{constructor(s,a,o){super(a,o),this.privResult=s}get result(){return this.privResult}};bt.SpeechRecognitionEventArgs=e;class r extends t.RecognitionEventArgs{constructor(s,a,o){super(a,o),this.privResult=s}get result(){return this.privResult}}bt.ConversationTranscriptionEventArgs=r;class n extends e{}return bt.MeetingTranscriptionEventArgs=n,bt}var gi={},mi={},Kf;function xo(){if(Kf)return mi;Kf=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.CancellationEventArgsBase=void 0;const t=I();let e=class extends t.RecognitionEventArgs{constructor(n,i,s,a,o){super(a,o),this.privReason=n,this.privErrorDetails=i,this.privErrorCode=s}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return mi.CancellationEventArgsBase=e,mi}var Jf;function j0(){if(Jf)return gi;Jf=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.SpeechRecognitionCanceledEventArgs=void 0;const t=xo();let e=class extends t.CancellationEventArgsBase{};return gi.SpeechRecognitionCanceledEventArgs=e,gi}var Si={},Gf;function x0(){if(Gf)return Si;Gf=1,Object.defineProperty(Si,"__esModule",{value:!0}),Si.TranslationRecognitionEventArgs=void 0;const t=I();let e=class extends t.RecognitionEventArgs{constructor(n,i,s){super(i,s),this.privResult=n}get result(){return this.privResult}};return Si.TranslationRecognitionEventArgs=e,Si}var yi={},Qf;function B0(){if(Qf)return yi;Qf=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.TranslationSynthesisEventArgs=void 0;const t=I();let e=class extends t.SessionEventArgs{constructor(n,i){super(i),this.privResult=n}get result(){return this.privResult}};return yi.TranslationSynthesisEventArgs=e,yi}var Ci={},Yf;function Yy(){if(Yf)return Ci;Yf=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.TranslationRecognitionResult=void 0;const t=I();let e=class Qy extends t.SpeechRecognitionResult{constructor(n,i,s,a,o,c,u,l,p,d,h){super(i,s,a,o,c,u,l,void 0,p,d,h),this.privTranslations=n}static fromSpeechRecognitionResult(n){return new Qy(void 0,n.resultId,n.reason,n.text,n.duration,n.offset,n.language,n.languageDetectionConfidence,n.errorDetails,n.json,n.properties)}get translations(){return this.privTranslations}};return Ci.TranslationRecognitionResult=e,Ci}var Gc={};Object.defineProperty(Gc,"__esModule",{value:!0});Gc.TranslationSynthesisResult=void 0;class F0{constructor(e,r){this.privReason=e,this.privAudio=r}get audio(){return this.privAudio}get reason(){return this.privReason}}Gc.TranslationSynthesisResult=F0;var Xy={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ResultReason=void 0,function(e){e[e.NoMatch=0]="NoMatch",e[e.Canceled=1]="Canceled",e[e.RecognizingSpeech=2]="RecognizingSpeech",e[e.RecognizedSpeech=3]="RecognizedSpeech",e[e.RecognizedKeyword=4]="RecognizedKeyword",e[e.RecognizingIntent=5]="RecognizingIntent",e[e.RecognizedIntent=6]="RecognizedIntent",e[e.TranslatingSpeech=7]="TranslatingSpeech",e[e.TranslatedSpeech=8]="TranslatedSpeech",e[e.SynthesizingAudio=9]="SynthesizingAudio",e[e.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",e[e.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",e[e.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",e[e.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",e[e.RecognizedSpeakers=14]="RecognizedSpeakers",e[e.RecognizedSpeaker=15]="RecognizedSpeaker",e[e.ResetVoiceProfile=16]="ResetVoiceProfile",e[e.DeletedVoiceProfile=17]="DeletedVoiceProfile",e[e.VoicesListRetrieved=18]="VoicesListRetrieved",e[e.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",e[e.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",e[e.TranslatedInstantMessage=21]="TranslatedInstantMessage",e[e.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"}(t.ResultReason||(t.ResultReason={}))})(Xy);var wr={},Xf;function q0(){if(Xf)return wr;Xf=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.SpeechConfigImpl=wr.SpeechConfig=void 0;const t=k(),e=z,r=I();let n=class{constructor(){}static fromSubscription(a,o){e.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),e.Contracts.throwIfNullOrWhitespace(o,"region");const c=new i;return c.setProperty(r.PropertyId.SpeechServiceConnection_Region,o),c.setProperty(r.PropertyId.SpeechServiceConnection_IntentRegion,o),c.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),c}static fromEndpoint(a,o){e.Contracts.throwIfNull(a,"endpoint");const c=new i;return c.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,a.href),o!==void 0&&c.setProperty(r.PropertyId.SpeechServiceConnection_Key,o),c}static fromHost(a,o){e.Contracts.throwIfNull(a,"hostName");const c=new i;return c.setProperty(r.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),o!==void 0&&c.setProperty(r.PropertyId.SpeechServiceConnection_Key,o),c}static fromAuthorizationToken(a,o){e.Contracts.throwIfNull(a,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(o,"region");const c=new i;return c.setProperty(r.PropertyId.SpeechServiceConnection_Region,o),c.setProperty(r.PropertyId.SpeechServiceConnection_IntentRegion,o),c.authorizationToken=a,c}close(){}};wr.SpeechConfig=n;class i extends n{constructor(){super(),this.privProperties=new r.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=r.OutputFormat.Simple}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a)}get outputFormat(){return r.OutputFormat[this.privProperties.getProperty(t.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privProperties.setProperty(t.OutputFormatPropertyName,r.OutputFormat[a])}get endpointId(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_EndpointId,a)}setProperty(a,o){e.Contracts.throwIfNull(o,"value"),this.privProperties.setProperty(a,o)}getProperty(a,o){return this.privProperties.getProperty(a,o)}setProxy(a,o,c,u){this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPort],o),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyUserName],c),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPassword],u)}setServiceProperty(a,o){const c=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));c[a]=o,this.privProperties.setProperty(t.ServicePropertiesPropertyName,JSON.stringify(c))}setProfanity(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_ProfanityOption,r.ProfanityOption[a])}enableAudioLogging(){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privProperties.setProperty(t.ForceDictationPropertyName,"true")}clone(){const a=new i;return a.privProperties=this.privProperties.clone(),a}get speechSynthesisLanguage(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return r.SpeechSynthesisOutputFormat[this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,r.SpeechSynthesisOutputFormat[a])}}return wr.SpeechConfigImpl=i,wr}var Ir={},Zf;function U0(){if(Zf)return Ir;Zf=1,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.SpeechTranslationConfigImpl=Ir.SpeechTranslationConfig=void 0;const t=k(),e=z,r=I();let n=class extends r.SpeechConfig{constructor(){super()}static fromSubscription(a,o){e.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),e.Contracts.throwIfNullOrWhitespace(o,"region");const c=new i;return c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Region,o),c}static fromAuthorizationToken(a,o){e.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(o,"region");const c=new i;return c.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a),c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Region,o),c}static fromHost(a,o){e.Contracts.throwIfNull(a,"hostName");const c=new i;return c.setProperty(r.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),o!==void 0&&c.setProperty(r.PropertyId.SpeechServiceConnection_Key,o),c}static fromEndpoint(a,o){e.Contracts.throwIfNull(a,"endpoint"),e.Contracts.throwIfNull(o,"subscriptionKey");const c=new i;return c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,a.href),c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Key,o),c}};Ir.SpeechTranslationConfig=n;class i extends n{constructor(){super(),this.privSpeechProperties=new r.PropertyCollection,this.outputFormat=r.OutputFormat.Simple}set authorizationToken(a){e.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}set speechRecognitionLanguage(a){e.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return r.OutputFormat[this.privSpeechProperties.getProperty(t.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privSpeechProperties.setProperty(t.OutputFormatPropertyName,r.OutputFormat[a])}get endpointId(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_EndpointId,a)}addTargetLanguage(a){e.Contracts.throwIfNullOrWhitespace(a,"value");const o=this.targetLanguages;o.includes(a)||(o.push(a),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,o.join(",")))}get targetLanguages(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(a){e.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,a)}get region(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_Region)}setProxy(a,o,c,u){this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPort],o),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyUserName],c),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPassword],u)}getProperty(a,o){return this.privSpeechProperties.getProperty(a,o)}setProperty(a,o){this.privSpeechProperties.setProperty(a,o)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(a,o){const c=JSON.parse(this.privSpeechProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));c[a]=o,this.privSpeechProperties.setProperty(t.ServicePropertiesPropertyName,JSON.stringify(c))}setProfanity(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceResponse_ProfanityOption,r.ProfanityOption[a])}enableAudioLogging(){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(t.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return r.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,r.SpeechSynthesisOutputFormat[a])}}return Ir.SpeechTranslationConfigImpl=i,Ir}var Pi={},ev;function eC(){if(ev)return Pi;ev=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.PropertyCollection=void 0;const t=I();let e=class Zy{constructor(){this.privKeys=[],this.privValues=[]}getProperty(n,i){let s;typeof n=="string"?s=n:s=t.PropertyId[n];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===s)return this.privValues[a];if(i!==void 0)return String(i)}setProperty(n,i){let s;typeof n=="string"?s=n:s=t.PropertyId[n];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===s){this.privValues[a]=i;return}this.privKeys.push(s),this.privValues.push(i)}clone(){const n=new Zy;for(let i=0;i<this.privKeys.length;i++)n.privKeys.push(this.privKeys[i]),n.privValues.push(this.privValues[i]);return n}mergeTo(n){this.privKeys.forEach(i=>{if(n.getProperty(i,void 0)===void 0){const s=this.getProperty(i);n.setProperty(i,s)}})}get keys(){return this.privKeys}};return Pi.PropertyCollection=e,Pi}var Qc={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyId=void 0,function(e){e[e.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",e[e.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",e[e.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",e[e.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",e[e.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",e[e.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",e[e.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",e[e.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",e[e.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",e[e.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",e[e.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",e[e.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",e[e.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",e[e.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",e[e.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",e[e.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",e[e.Speech_SessionId=16]="Speech_SessionId",e[e.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",e[e.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",e[e.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",e[e.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",e[e.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",e[e.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",e[e.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",e[e.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",e[e.CancellationDetails_Reason=25]="CancellationDetails_Reason",e[e.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",e[e.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",e[e.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",e[e.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",e[e.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",e[e.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",e[e.Speech_SegmentationSilenceTimeoutMs=32]="Speech_SegmentationSilenceTimeoutMs",e[e.SpeechServiceConnection_EnableAudioLogging=33]="SpeechServiceConnection_EnableAudioLogging",e[e.SpeechServiceConnection_LanguageIdMode=34]="SpeechServiceConnection_LanguageIdMode",e[e.SpeechServiceConnection_RecognitionEndpointVersion=35]="SpeechServiceConnection_RecognitionEndpointVersion",e[e.SpeechServiceConnection_SpeakerIdMode=36]="SpeechServiceConnection_SpeakerIdMode",e[e.SpeechServiceResponse_ProfanityOption=37]="SpeechServiceResponse_ProfanityOption",e[e.SpeechServiceResponse_PostProcessingOption=38]="SpeechServiceResponse_PostProcessingOption",e[e.SpeechServiceResponse_RequestWordLevelTimestamps=39]="SpeechServiceResponse_RequestWordLevelTimestamps",e[e.SpeechServiceResponse_StablePartialResultThreshold=40]="SpeechServiceResponse_StablePartialResultThreshold",e[e.SpeechServiceResponse_OutputFormatOption=41]="SpeechServiceResponse_OutputFormatOption",e[e.SpeechServiceResponse_TranslationRequestStablePartialResult=42]="SpeechServiceResponse_TranslationRequestStablePartialResult",e[e.SpeechServiceResponse_RequestWordBoundary=43]="SpeechServiceResponse_RequestWordBoundary",e[e.SpeechServiceResponse_RequestPunctuationBoundary=44]="SpeechServiceResponse_RequestPunctuationBoundary",e[e.SpeechServiceResponse_RequestSentenceBoundary=45]="SpeechServiceResponse_RequestSentenceBoundary",e[e.SpeechServiceResponse_DiarizeIntermediateResults=46]="SpeechServiceResponse_DiarizeIntermediateResults",e[e.Conversation_ApplicationId=47]="Conversation_ApplicationId",e[e.Conversation_DialogType=48]="Conversation_DialogType",e[e.Conversation_Initial_Silence_Timeout=49]="Conversation_Initial_Silence_Timeout",e[e.Conversation_From_Id=50]="Conversation_From_Id",e[e.Conversation_Conversation_Id=51]="Conversation_Conversation_Id",e[e.Conversation_Custom_Voice_Deployment_Ids=52]="Conversation_Custom_Voice_Deployment_Ids",e[e.Conversation_Speech_Activity_Template=53]="Conversation_Speech_Activity_Template",e[e.Conversation_Request_Bot_Status_Messages=54]="Conversation_Request_Bot_Status_Messages",e[e.Conversation_Agent_Connection_Id=55]="Conversation_Agent_Connection_Id",e[e.SpeechServiceConnection_Host=56]="SpeechServiceConnection_Host",e[e.ConversationTranslator_Host=57]="ConversationTranslator_Host",e[e.ConversationTranslator_Name=58]="ConversationTranslator_Name",e[e.ConversationTranslator_CorrelationId=59]="ConversationTranslator_CorrelationId",e[e.ConversationTranslator_Token=60]="ConversationTranslator_Token",e[e.PronunciationAssessment_ReferenceText=61]="PronunciationAssessment_ReferenceText",e[e.PronunciationAssessment_GradingSystem=62]="PronunciationAssessment_GradingSystem",e[e.PronunciationAssessment_Granularity=63]="PronunciationAssessment_Granularity",e[e.PronunciationAssessment_EnableMiscue=64]="PronunciationAssessment_EnableMiscue",e[e.PronunciationAssessment_Json=65]="PronunciationAssessment_Json",e[e.PronunciationAssessment_Params=66]="PronunciationAssessment_Params",e[e.SpeakerRecognition_Api_Version=67]="SpeakerRecognition_Api_Version",e[e.WebWorkerLoadType=68]="WebWorkerLoadType",e[e.TalkingAvatarService_WebRTC_SDP=69]="TalkingAvatarService_WebRTC_SDP"}(t.PropertyId||(t.PropertyId={}))})(Qc);var Ri={},tv;function $0(){if(tv)return Ri;tv=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.Recognizer=void 0;const t=k(),e=M(),r=z,n=I();let i=class tC{constructor(a,o,c){this.audioConfig=a!==void 0?a:n.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=o.clone(),this.privConnectionFactory=c,this.implCommonRecognizerSetup()}close(a,o){r.Contracts.throwIfDisposed(this.privDisposed),e.marshalPromiseToCallbacks(this.dispose(!0),a,o)}get internalData(){return this.privReco}async dispose(a){this.privDisposed||(this.privDisposed=!0,a&&this.privReco&&(await this.privReco.audioSource.turnOff(),await this.privReco.dispose()))}static get telemetryEnabled(){return t.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(a){t.ServiceRecognizerBase.telemetryDataEnabled=a}implCommonRecognizerSetup(){let a=typeof window<"u"?"Browser":"Node",o="unknown",c="unknown";typeof navigator<"u"&&(a=a+"/"+navigator.platform,o=navigator.userAgent,c=navigator.appVersion);const u=this.createRecognizerConfig(new t.SpeechServiceConfig(new t.Context(new t.OS(a,o,c))));this.privReco=this.createServiceRecognizer(tC.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,u)}async recognizeOnceAsyncImpl(a){r.Contracts.throwIfDisposed(this.privDisposed);const o=new e.Deferred;await this.implRecognizerStop(),await this.privReco.recognize(a,o.resolve,o.reject);const c=await o.promise;return await this.implRecognizerStop(),c}async startContinuousRecognitionAsyncImpl(a){r.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop(),await this.privReco.recognize(a,void 0,void 0)}async stopContinuousRecognitionAsyncImpl(){r.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop()}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}static getAuthFromProperties(a){const o=a.getProperty(n.PropertyId.SpeechServiceConnection_Key,void 0);return o&&o!==""?new t.CognitiveSubscriptionKeyAuthentication(o):new t.CognitiveTokenAuthentication(()=>{const u=a.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(u)},()=>{const u=a.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(u)})}};return Ri.Recognizer=i,Ri}var Ei={},rv;function V0(){if(rv)return Ei;rv=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.SpeechRecognizer=void 0;const t=k(),e=M(),r=z,n=I();let i=class rC extends n.Recognizer{constructor(a,o){const c=a;r.Contracts.throwIfNull(c,"speechConfig"),r.Contracts.throwIfNullOrWhitespace(c.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage),n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),super(o,c.properties,new t.SpeechConnectionFactory),this.privDisposedRecognizer=!1}static FromConfig(a,o,c){const u=a;return o.properties.mergeTo(u.properties),new rC(a,c)}get endpointId(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){r.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(t.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple])===n.OutputFormat[n.OutputFormat.Simple]?n.OutputFormat.Simple:n.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(a,o){e.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),a,o)}startContinuousRecognitionAsync(a,o){e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),a,o)}stopContinuousRecognitionAsync(a,o){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,o)}startKeywordRecognitionAsync(a,o,c){r.Contracts.throwIfNull(a,"model"),c&&c("Not yet implemented.")}stopKeywordRecognitionAsync(a){a&&a()}close(a,o){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),a,o)}async dispose(a){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(a))}createRecognizerConfig(a){return new t.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,o,c,u){const l=c;return new t.SpeechServiceRecognizer(a,o,l,u,this)}};return Ei.SpeechRecognizer=i,Ei}var wi={},nv;function W0(){if(nv)return wi;nv=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.IntentRecognizer=void 0;const t=k(),e=M(),r=z,n=I();let i=class extends n.Recognizer{constructor(a,o){r.Contracts.throwIfNullOrUndefined(a,"speechConfig");const c=a;r.Contracts.throwIfNullOrUndefined(c,"speechConfig"),super(o,c.properties,new t.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=c.properties,r.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage),n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}get properties(){return this.privProperties}recognizeOnceAsync(a,o){if(r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const c=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",c.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(c.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}e.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),a,o)}startContinuousRecognitionAsync(a,o){if(Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const c=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",c.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(c.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),a,o)}stopContinuousRecognitionAsync(a,o){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,o)}startKeywordRecognitionAsync(a,o,c){r.Contracts.throwIfNull(a,"model"),c&&c("Not yet implemented.")}stopKeywordRecognitionAsync(a,o){if(a)try{a()}catch(c){o&&o(c)}}addIntent(a,o){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),r.Contracts.throwIfNullOrWhitespace(o,"intentId"),r.Contracts.throwIfNullOrWhitespace(a,"simplePhrase"),this.privAddedIntents.push([o,a])}addIntentWithLanguageModel(a,o,c){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),r.Contracts.throwIfNullOrWhitespace(a,"intentId"),r.Contracts.throwIfNull(o,"model");const u=o;r.Contracts.throwIfNullOrWhitespace(u.appId,"model.appId"),this.privAddedLmIntents[a]=new t.AddedLmIntent(u,c)}addAllIntents(a,o){r.Contracts.throwIfNull(a,"model");const c=a;r.Contracts.throwIfNullOrWhitespace(c.appId,"model.appId"),this.privUmbrellaIntent=new t.AddedLmIntent(c,o)}close(a,o){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),a,o)}createRecognizerConfig(a){return new t.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,o,c,u){const l=c;return new t.IntentServiceRecognizer(a,o,l,u,this)}async dispose(a){this.privDisposedIntentRecognizer||a&&(this.privDisposedIntentRecognizer=!0,await super.dispose(a))}buildSpeechContext(){let a,o,c;const u=[];this.privUmbrellaIntent!==void 0&&(a=this.privUmbrellaIntent.modelImpl.appId,o=this.privUmbrellaIntent.modelImpl.region,c=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(const l of Object.keys(this.privAddedLmIntents)){const p=this.privAddedLmIntents[l];if(a===void 0)a=p.modelImpl.appId;else if(a!==p.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(o===void 0)o=p.modelImpl.region;else if(o!==p.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(c===void 0)c=p.modelImpl.subscriptionKey;else if(c!==p.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");const d="luis/"+a+"-PRODUCTION#"+l;u.push(d)}return{Intent:{id:a,key:c===void 0?this.privProperties.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_Key]):c,provider:"LUIS"},ReferenceGrammars:this.privUmbrellaIntent===void 0?u:["luis/"+a+"-PRODUCTION"]}}};return wi.IntentRecognizer=i,wi}var nC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileType=void 0,function(e){e[e.TextIndependentIdentification=0]="TextIndependentIdentification",e[e.TextDependentVerification=1]="TextDependentVerification",e[e.TextIndependentVerification=2]="TextIndependentVerification"}(t.VoiceProfileType||(t.VoiceProfileType={}))})(nC);var Ii={},Ti={},Tr={},iv;function iC(){if(iv)return Tr;iv=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.ConnectionMessageImpl=Tr.ConnectionMessage=void 0;const t=he,e=M(),r=eC(),n=Qc;let i=class{};Tr.ConnectionMessage=i;class s{constructor(o){this.privConnectionMessage=o,this.privProperties=new r.PropertyCollection,this.privConnectionMessage.headers[t.HeaderNames.ConnectionId]&&this.privProperties.setProperty(n.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[t.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(c=>{this.privProperties.setProperty(c,this.privConnectionMessage.headers[c])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(o=>o.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===e.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===e.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}return Tr.ConnectionMessageImpl=s,Tr}var sv;function sC(){if(sv)return Ti;sv=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.Connection=void 0;const t=k(),e=M(),r=iC(),n=z,i=I();let s=class Ip{static fromRecognizer(o){const c=o.internalData,u=new Ip;return u.privInternalData=c,u.setupEvents(),u}static fromSynthesizer(o){const c=o.internalData,u=new Ip;return u.privInternalData=c,u.setupEvents(),u}openConnection(o,c){e.marshalPromiseToCallbacks(this.privInternalData.connect(),o,c)}closeConnection(o,c){if(this.privInternalData instanceof t.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");e.marshalPromiseToCallbacks(this.privInternalData.disconnect(),o,c)}setMessageProperty(o,c,u){if(n.Contracts.throwIfNullOrWhitespace(c,"propertyName"),this.privInternalData instanceof t.ServiceRecognizerBase){if(o.toLowerCase()!=="speech.context")throw new Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.setSection(c,u)}else if(this.privInternalData instanceof t.SynthesisAdapterBase){if(o.toLowerCase()!=="synthesis.context")throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(c,u)}}sendMessageAsync(o,c,u,l){e.marshalPromiseToCallbacks(this.privInternalData.sendNetworkMessage(o,c),u,l)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(o=>{o.name==="ConnectionEstablishedEvent"?this.connected&&this.connected(new i.ConnectionEventArgs(o.connectionId)):o.name==="ConnectionClosedEvent"?this.disconnected&&this.disconnected(new i.ConnectionEventArgs(o.connectionId)):o.name==="ConnectionMessageSentEvent"?this.messageSent&&this.messageSent(new i.ConnectionMessageEventArgs(new r.ConnectionMessageImpl(o.message))):o.name==="ConnectionMessageReceivedEvent"&&this.messageReceived&&this.messageReceived(new i.ConnectionMessageEventArgs(new r.ConnectionMessageImpl(o.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(o=>{this.receivedServiceMessage&&this.receivedServiceMessage(new i.ServiceEventArgs(o.jsonString,o.name))})}};return Ti.Connection=s,Ti}var ov;function H0(){if(ov)return Ii;ov=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.TranslationRecognizer=void 0;const t=k(),e=M(),r=sC(),n=z,i=I();let s=class oC extends i.Recognizer{constructor(o,c,u){const l=o;n.Contracts.throwIfNull(l,"speechConfig"),super(c,l.properties,u||new t.TranslationConnectionFactory),this.privDisposedTranslationRecognizer=!1,this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&n.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationVoice),i.PropertyId[i.PropertyId.SpeechServiceConnection_TranslationVoice]),n.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages),i.PropertyId[i.PropertyId.SpeechServiceConnection_TranslationToLanguages]),n.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(o,c,u){const l=o;return c.properties.mergeTo(l.properties),new oC(o,u)}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,o)}recognizeOnceAsync(o,c){n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),e.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),o,c)}startContinuousRecognitionAsync(o,c){e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),o,c)}stopContinuousRecognitionAsync(o,c){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),o,c)}removeTargetLanguage(o){if(n.Contracts.throwIfNullOrUndefined(o,"language to be removed"),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0){const c=this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),u=c.indexOf(o);u>-1&&(c.splice(u,1),this.properties.setProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,c.join(",")),this.updateLanguages(c))}}addTargetLanguage(o){n.Contracts.throwIfNullOrUndefined(o,"language to be added");let c=[];this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?(c=this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),c.includes(o)||(c.push(o),this.properties.setProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,c.join(",")))):(this.properties.setProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,o),c=[o]),this.updateLanguages(c)}close(o,c){n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),o,c)}onConnection(){}async dispose(o){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,o&&(await this.implRecognizerStop(),await super.dispose(o)))}createRecognizerConfig(o){return new t.RecognizerConfig(o,this.privProperties)}createServiceRecognizer(o,c,u,l){const p=u;return new t.TranslationServiceRecognizer(o,c,p,l,this)}updateLanguages(o){const c=r.Connection.fromRecognizer(this);c&&(c.setMessageProperty("speech.context","translationcontext",{to:o}),c.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:o})))}};return Ii.TranslationRecognizer=s,Ii}var _i={},av;function K0(){if(av)return _i;av=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.Translations=void 0;const t=I();let e=class{constructor(){this.privMap=new t.PropertyCollection}get languages(){return this.privMap.keys}get(n,i){return this.privMap.getProperty(n,i)}set(n,i){this.privMap.setProperty(n,i)}};return _i.Translations=e,_i}var aC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.NoMatchReason=void 0,function(e){e[e.NotRecognized=0]="NotRecognized",e[e.InitialSilenceTimeout=1]="InitialSilenceTimeout",e[e.InitialBabbleTimeout=2]="InitialBabbleTimeout"}(t.NoMatchReason||(t.NoMatchReason={}))})(aC);var Ai={},cv;function J0(){if(cv)return Ai;cv=1,Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.NoMatchDetails=void 0;const t=k(),e=I();let r=class cC{constructor(i){this.privReason=i}static fromResult(i){const s=t.SimpleSpeechPhrase.fromJSON(i.json);let a=e.NoMatchReason.NotRecognized;switch(s.RecognitionStatus){case t.RecognitionStatus.BabbleTimeout:a=e.NoMatchReason.InitialBabbleTimeout;break;case t.RecognitionStatus.InitialSilenceTimeout:a=e.NoMatchReason.InitialSilenceTimeout;break;default:a=e.NoMatchReason.NotRecognized;break}return new cC(a)}get reason(){return this.privReason}};return Ai.NoMatchDetails=r,Ai}var Yc={};Object.defineProperty(Yc,"__esModule",{value:!0});Yc.TranslationRecognitionCanceledEventArgs=void 0;class G0{constructor(e,r,n,i,s){this.privCancelReason=r,this.privErrorDetails=n,this.privResult=s,this.privSessionId=e,this.privErrorCode=i}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}Yc.TranslationRecognitionCanceledEventArgs=G0;var ki={},uv;function Q0(){if(uv)return ki;uv=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.IntentRecognitionCanceledEventArgs=void 0;const t=I();let e=class extends t.IntentRecognitionEventArgs{constructor(n,i,s,a,o,c){super(a,o,c),this.privReason=n,this.privErrorDetails=i,this.privErrorCode=s}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return ki.IntentRecognitionCanceledEventArgs=e,ki}var Bo={};Object.defineProperty(Bo,"__esModule",{value:!0});Bo.CancellationDetailsBase=void 0;class Y0{constructor(e,r,n){this.privReason=e,this.privErrorDetails=r,this.privErrorCode=n}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}}Bo.CancellationDetailsBase=Y0;var Oi={},lv;function X0(){if(lv)return Oi;lv=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.CancellationDetails=void 0;const t=k(),e=Bo,r=I();let n=class uC extends e.CancellationDetailsBase{constructor(s,a,o){super(s,a,o)}static fromResult(s){let a=r.CancellationReason.Error,o=r.CancellationErrorCode.NoError;if(s instanceof r.RecognitionResult&&s.json){const c=t.SimpleSpeechPhrase.fromJSON(s.json);a=t.EnumTranslation.implTranslateCancelResult(c.RecognitionStatus)}return s.properties&&(o=r.CancellationErrorCode[s.properties.getProperty(t.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new uC(a,s.errorDetails||t.EnumTranslation.implTranslateErrorDetails(o),o)}};return Oi.CancellationDetails=n,Oi}var lC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationErrorCode=void 0,function(e){e[e.NoError=0]="NoError",e[e.AuthenticationFailure=1]="AuthenticationFailure",e[e.BadRequestParameters=2]="BadRequestParameters",e[e.TooManyRequests=3]="TooManyRequests",e[e.ConnectionFailure=4]="ConnectionFailure",e[e.ServiceTimeout=5]="ServiceTimeout",e[e.ServiceError=6]="ServiceError",e[e.RuntimeError=7]="RuntimeError",e[e.Forbidden=8]="Forbidden"}(t.CancellationErrorCode||(t.CancellationErrorCode={}))})(lC);var Mi={},pv;function Z0(){if(pv)return Mi;pv=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.ConnectionEventArgs=void 0;const t=I();let e=class extends t.SessionEventArgs{};return Mi.ConnectionEventArgs=e,Mi}var bi={},dv;function eT(){if(dv)return bi;dv=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.ServiceEventArgs=void 0;const t=I();let e=class extends t.SessionEventArgs{constructor(n,i,s){super(s),this.privJsonResult=n,this.privEventName=i}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}};return bi.ServiceEventArgs=e,bi}var Xc={};Object.defineProperty(Xc,"__esModule",{value:!0});Xc.PhraseListGrammar=void 0;class Md{constructor(e){this.privGrammerBuilder=e.dynamicGrammar}static fromRecognizer(e){const r=e.internalData;return new Md(r)}addPhrase(e){this.privGrammerBuilder.addPhrase(e)}addPhrases(e){this.privGrammerBuilder.addPhrase(e)}clear(){this.privGrammerBuilder.clearPhrases()}}Xc.PhraseListGrammar=Md;var _r={},hv;function bd(){if(hv)return _r;hv=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.DialogServiceConfigImpl=_r.DialogServiceConfig=void 0;const t=z,e=I();let r=class{constructor(){}set applicationId(s){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}};_r.DialogServiceConfig=r;class n extends r{constructor(){super(),this.privSpeechConfig=new e.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(s){t.Contracts.throwIfNullOrWhitespace(s,"value"),this.privSpeechConfig.speechRecognitionLanguage=s}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(s){this.privSpeechConfig.outputFormat=s}setProperty(s,a){this.privSpeechConfig.setProperty(s,a)}getProperty(s,a){return this.privSpeechConfig.getProperty(s)}setProxy(s,a,o,c){this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyHostName,s),this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyPort,`${a}`),o&&this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyUserName,o),c&&this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyPassword,c)}setServiceProperty(s,a,o){this.privSpeechConfig.setServiceProperty(s,a)}close(){}}return _r.DialogServiceConfigImpl=n,_r}var Di={},fv;function tT(){if(fv)return Di;fv=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.BotFrameworkConfig=void 0;const t=z,e=bd(),r=I();let n=class extends e.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(s,a,o){t.Contracts.throwIfNullOrWhitespace(s,"subscription"),t.Contracts.throwIfNullOrWhitespace(a,"region");const c=new e.DialogServiceConfigImpl;return c.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),c.setProperty(r.PropertyId.SpeechServiceConnection_Key,s),c.setProperty(r.PropertyId.SpeechServiceConnection_Region,a),o&&c.setProperty(r.PropertyId.Conversation_ApplicationId,o),c}static fromAuthorizationToken(s,a,o){t.Contracts.throwIfNullOrWhitespace(s,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(a,"region");const c=new e.DialogServiceConfigImpl;return c.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),c.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,s),c.setProperty(r.PropertyId.SpeechServiceConnection_Region,a),o&&c.setProperty(r.PropertyId.Conversation_ApplicationId,o),c}static fromHost(s,a,o){t.Contracts.throwIfNullOrUndefined(s,"host");const c=s instanceof URL?s:new URL(`wss://${s}.convai.speech.azure.us`);t.Contracts.throwIfNullOrUndefined(c,"resolvedHost");const u=new e.DialogServiceConfigImpl;return u.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),u.setProperty(r.PropertyId.SpeechServiceConnection_Host,c.toString()),a!==void 0&&u.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),u}static fromEndpoint(s,a){t.Contracts.throwIfNull(s,"endpoint");const o=new e.DialogServiceConfigImpl;return o.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),o.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,s.toString()),a!==void 0&&o.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),o}};return Di.BotFrameworkConfig=n,Di}var Ni={},vv;function rT(){if(vv)return Ni;vv=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.CustomCommandsConfig=void 0;const t=z,e=bd(),r=I();let n=class extends e.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(s,a,o){t.Contracts.throwIfNullOrWhitespace(s,"applicationId"),t.Contracts.throwIfNullOrWhitespace(a,"subscription"),t.Contracts.throwIfNullOrWhitespace(o,"region");const c=new e.DialogServiceConfigImpl;return c.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.CustomCommands),c.setProperty(r.PropertyId.Conversation_ApplicationId,s),c.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),c.setProperty(r.PropertyId.SpeechServiceConnection_Region,o),c}static fromAuthorizationToken(s,a,o){t.Contracts.throwIfNullOrWhitespace(s,"applicationId"),t.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(o,"region");const c=new e.DialogServiceConfigImpl;return c.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.CustomCommands),c.setProperty(r.PropertyId.Conversation_ApplicationId,s),c.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a),c.setProperty(r.PropertyId.SpeechServiceConnection_Region,o),c}set applicationId(s){t.Contracts.throwIfNullOrWhitespace(s,"value"),this.setProperty(r.PropertyId.Conversation_ApplicationId,s)}get applicationId(){return this.getProperty(r.PropertyId.Conversation_ApplicationId)}};return Ni.CustomCommandsConfig=n,Ni}var zi={},Li={},ji={},St={};Object.defineProperty(St,"__esModule",{value:!0});St.QueryParameterNames=void 0;class ne{}St.QueryParameterNames=ne;ne.BotId="botid";ne.CustomSpeechDeploymentId="cid";ne.CustomVoiceDeploymentId="deploymentId";ne.EnableAudioLogging="storeAudio";ne.EnableLanguageId="lidEnabled";ne.EnableWordLevelTimestamps="wordLevelTimestamps";ne.EndSilenceTimeoutMs="endSilenceTimeoutMs";ne.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs";ne.Format="format";ne.InitialSilenceTimeoutMs="initialSilenceTimeoutMs";ne.Language="language";ne.Profanity="profanity";ne.RequestBotStatusMessages="enableBotMessageStatus";ne.StableIntermediateThreshold="stableIntermediateThreshold";ne.StableTranslation="stableTranslation";ne.TestHooks="testhooks";ne.Postprocessing="postprocessing";ne.CtsMeetingId="meetingId";ne.CtsDeviceId="deviceId";ne.CtsIsParticipant="isParticipant";ne.EnableAvatar="enableTalkingAvatar";var gv;function yt(){if(gv)return ji;gv=1,Object.defineProperty(ji,"__esModule",{value:!0}),ji.ConnectionFactoryBase=void 0;const t=k(),e=I(),r=St;let n=class{static getHostSuffix(s){if(s){if(s.toLowerCase().startsWith("china"))return".azure.cn";if(s.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(s,a,o){new Map([[e.PropertyId.Speech_SegmentationSilenceTimeoutMs,r.QueryParameterNames.SegmentationSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_EnableAudioLogging,r.QueryParameterNames.EnableAudioLogging],[e.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,r.QueryParameterNames.EndSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,r.QueryParameterNames.InitialSilenceTimeoutMs],[e.PropertyId.SpeechServiceResponse_PostProcessingOption,r.QueryParameterNames.Postprocessing],[e.PropertyId.SpeechServiceResponse_ProfanityOption,r.QueryParameterNames.Profanity],[e.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,r.QueryParameterNames.EnableWordLevelTimestamps],[e.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,r.QueryParameterNames.StableIntermediateThreshold]]).forEach((l,p)=>{this.setUrlParameter(p,l,s,a,o)});const u=JSON.parse(s.parameters.getProperty(t.ServicePropertiesPropertyName,"{}"));Object.keys(u).forEach(l=>{a[l]=u[l]})}setUrlParameter(s,a,o,c,u){const l=o.parameters.getProperty(s,void 0);l&&(!u||u.search(a)===-1)&&(c[a]=l.toLocaleLowerCase())}};return ji.ConnectionFactoryBase=n,ji}var mv;function nT(){if(mv)return Li;mv=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.DialogConnectionFactory=void 0;const t=fe(),e=k(),r=I(),n=yt(),i=k(),s=he,a=St;class o extends n.ConnectionFactoryBase{create(u,l,p){const d=u.parameters.getProperty(r.PropertyId.Conversation_ApplicationId,""),h=u.parameters.getProperty(r.PropertyId.Conversation_DialogType),f=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region),m=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),y=u.parameters.getProperty(r.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),v={};v[s.HeaderNames.ConnectionId]=p,v[a.QueryParameterNames.Format]=u.parameters.getProperty(e.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase(),v[a.QueryParameterNames.Language]=m,v[a.QueryParameterNames.RequestBotStatusMessages]=y,d&&(v[a.QueryParameterNames.BotId]=d,h===r.DialogServiceConfig.DialogTypes.CustomCommands&&(v[s.HeaderNames.CustomCommandsAppId]=d));const g=h===r.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",S=h===r.DialogServiceConfig.DialogTypes.CustomCommands?"v1":h===r.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",C={};l.token!=null&&l.token!==""&&(C[l.headerName]=l.token);let P=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,"");if(!P){const w=n.ConnectionFactoryBase.getHostSuffix(f),E=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,`wss://${f}.${o.BaseUrl}${w}`);P=`${E.endsWith("/")?E:E+"/"}${g}${o.ApiKey}/${S}`}this.setCommonUrlParams(u,v,P);const R=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(P,v,C,new i.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),R,p)}}return Li.DialogConnectionFactory=o,o.ApiKey="api",o.BaseUrl="convai.speech",Li}var Sv;function iT(){if(Sv)return zi;Sv=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.DialogServiceConnector=void 0;const t=nT(),e=k(),r=M(),n=z,i=I(),s=Qc;let a=class extends i.Recognizer{constructor(c,u){const l=c;n.Contracts.throwIfNull(c,"dialogConfig"),super(u,l.properties,new t.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=l.properties.clone();const p=this.buildAgentConfig();this.privReco.agentConfig.set(p)}connect(c,u){r.marshalPromiseToCallbacks(this.privReco.connect(),c,u)}disconnect(c,u){r.marshalPromiseToCallbacks(this.privReco.disconnect(),c,u)}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(c){n.Contracts.throwIfNullOrWhitespace(c,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,c)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(s.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(c){this.properties.setProperty(s.PropertyId.Conversation_Speech_Activity_Template,c)}listenOnceAsync(c,u){if(this.isTurnComplete){n.Contracts.throwIfDisposed(this.privIsDisposed);const p=(async()=>{await this.privReco.connect(),await this.implRecognizerStop(),this.isTurnComplete=!1;const d=new r.Deferred;await this.privReco.recognize(e.RecognitionMode.Conversation,d.resolve,d.reject);const h=await d.promise;return await this.implRecognizerStop(),h})();p.catch(()=>{this.dispose(!0).catch(()=>{})}),r.marshalPromiseToCallbacks(p.finally(()=>{this.isTurnComplete=!0}),c,u)}}sendActivityAsync(c,u,l){r.marshalPromiseToCallbacks(this.privReco.sendMessage(c),u,l)}close(c,u){n.Contracts.throwIfDisposed(this.privIsDisposed),r.marshalPromiseToCallbacks(this.dispose(!0),c,u)}async dispose(c){this.privIsDisposed||c&&(this.privIsDisposed=!0,await this.implRecognizerStop(),await super.dispose(c))}createRecognizerConfig(c){return new e.RecognizerConfig(c,this.privProperties)}createServiceRecognizer(c,u,l,p){const d=l;return new e.DialogServiceAdapter(c,u,d,p,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(s.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(s.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(s.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}};return zi.DialogServiceConnector=a,zi}var Zc={};Object.defineProperty(Zc,"__esModule",{value:!0});Zc.ActivityReceivedEventArgs=void 0;class sT{constructor(e,r){this.privActivity=e,this.privAudioStream=r}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}}Zc.ActivityReceivedEventArgs=sT;var eu={},tu={};Object.defineProperty(tu,"__esModule",{value:!0});tu.TurnStatusResponsePayload=void 0;class Dd{constructor(e){this.privMessageStatusResponse=JSON.parse(e)}static fromJSON(e){return new Dd(e)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}tu.TurnStatusResponsePayload=Dd;Object.defineProperty(eu,"__esModule",{value:!0});eu.TurnStatusReceivedEventArgs=void 0;const oT=tu;class aT{constructor(e){this.privTurnStatus=oT.TurnStatusResponsePayload.fromJSON(e)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}}eu.TurnStatusReceivedEventArgs=aT;var pC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ServicePropertyChannel=void 0,function(e){e[e.UriQueryParameter=0]="UriQueryParameter"}(t.ServicePropertyChannel||(t.ServicePropertyChannel={}))})(pC);var dC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ProfanityOption=void 0,function(e){e[e.Masked=0]="Masked",e[e.Removed=1]="Removed",e[e.Raw=2]="Raw"}(t.ProfanityOption||(t.ProfanityOption={}))})(dC);var xi={},yv;function cT(){if(yv)return xi;yv=1,Object.defineProperty(xi,"__esModule",{value:!0}),xi.BaseAudioPlayer=void 0;const t=ye,e=I(),r=Rr;let n=class{constructor(s){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,s===void 0&&(s=e.AudioStreamFormat.getDefaultInputFormat()),this.init(s)}playAudioSample(s,a,o){try{this.ensureInitializedContext();const c=this.formatAudioData(s),u=new Float32Array(this.samples.length+c.length);u.set(this.samples,0),u.set(c,this.samples.length),this.samples=u,a&&a()}catch(c){o&&o(c)}}stopAudio(s,a){this.audioContext!==null&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{s&&s()},o=>{a&&a(o)}),this.audioContext=null)}init(s){this.audioFormat=s,this.samples=new Float32Array}ensureInitializedContext(){if(this.audioContext===null){this.createAudioContext();const s=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},s)}}createAudioContext(){this.audioContext=r.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(s){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(s),128);case 16:return this.formatArrayBuffer(new Int16Array(s),32768);case 32:return this.formatArrayBuffer(new Int32Array(s),2147483648);default:throw new t.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(s,a){const o=new Float32Array(s.length);for(let c=0;c<s.length;c++)o[c]=s[c]/a;return o}updateAudioBuffer(){if(this.samples.length===0)return;const s=this.audioFormat.channels,a=this.audioContext.createBufferSource(),o=this.samples.length/s,c=this.audioContext.createBuffer(s,o,this.audioFormat.samplesPerSec);for(let u=0;u<s;u++){let l=u;const p=c.getChannelData(u);for(let d=0;d<this.samples.length;d++,l+=s)p[d]=this.samples[l]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),a.buffer=c,a.connect(this.gainNode),a.start(this.startTime),this.startTime+=c.duration,this.samples=new Float32Array}async playAudio(s){this.audioContext===null&&this.createAudioContext();const a=this.audioContext.createBufferSource(),o=this.audioContext.destination;await this.audioContext.decodeAudioData(s,c=>{a.buffer=c,a.connect(o),a.start(0)})}};return xi.BaseAudioPlayer=n,xi}var ru={};Object.defineProperty(ru,"__esModule",{value:!0});ru.ConnectionMessageEventArgs=void 0;class uT{constructor(e){this.privConnectionMessage=e}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}}ru.ConnectionMessageEventArgs=uT;var nu={};Object.defineProperty(nu,"__esModule",{value:!0});nu.VoiceProfile=void 0;class lT{constructor(e,r){this.privId=e,this.privProfileType=r}get profileId(){return this.privId}get profileType(){return this.privProfileType}}nu.VoiceProfile=lT;var Ar={},Cv;function pT(){if(Cv)return Ar;Cv=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.VoiceProfileEnrollmentCancellationDetails=Ar.VoiceProfileEnrollmentResult=void 0;const t=k(),e=I();let r=class Tp{constructor(s,a,o){this.privReason=s,this.privProperties=new e.PropertyCollection,this.privReason!==e.ResultReason.Canceled?a&&(this.privDetails=JSON.parse(a),this.privDetails.enrollmentStatus.toLowerCase()==="enrolling"&&(this.privReason=e.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=o,this.privProperties.setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[e.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(s){const a=[];for(const o of s.value){const c=o.enrollmentStatus.toLowerCase()==="enrolling"?e.ResultReason.EnrollingVoiceProfile:o.enrollmentStatus.toLowerCase()==="enrolled"?e.ResultReason.EnrolledVoiceProfile:e.ResultReason.Canceled,u=new Tp(c,null,null);u.privDetails=this.getIdentificationDetails(o),a.push(u)}return a}static FromVerificationProfileList(s){const a=[];for(const o of s.value){const c=o.enrollmentStatus.toLowerCase()==="enrolling"?e.ResultReason.EnrollingVoiceProfile:o.enrollmentStatus.toLowerCase()==="enrolled"?e.ResultReason.EnrolledVoiceProfile:e.ResultReason.Canceled,u=new Tp(c,null,null);u.privDetails=this.getVerificationDetails(o),a.push(u)}return a}static getIdentificationDetails(s){return{audioLength:s.audioLength?parseFloat(s.audioLength):0,audioSpeechLength:s.audioSpeechLength?parseFloat(s.audioSpeechLength):0,enrollmentStatus:s.enrollmentStatus,enrollmentsCount:s.enrollmentsCount||0,enrollmentsLength:s.enrollmentsLength?parseFloat(s.enrollmentsLength):0,enrollmentsSpeechLength:s.enrollmentsSpeechLength?parseFloat(s.enrollmentsSpeechLength):0,profileId:s.profileId||s.identificationProfileId,remainingEnrollmentsSpeechLength:s.remainingEnrollmentsSpeechLength?parseFloat(s.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(s){return{audioLength:s.audioLength?parseFloat(s.audioLength):0,audioSpeechLength:s.audioSpeechLength?parseFloat(s.audioSpeechLength):0,enrollmentStatus:s.enrollmentStatus,enrollmentsCount:s.enrollmentsCount,enrollmentsLength:s.enrollmentsLength?parseFloat(s.enrollmentsLength):0,enrollmentsSpeechLength:s.enrollmentsSpeechLength?parseFloat(s.enrollmentsSpeechLength):0,profileId:s.profileId||s.verificationProfileId,remainingEnrollmentsCount:s.remainingEnrollments||s.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:s.remainingEnrollmentsSpeechLength?parseFloat(s.remainingEnrollmentsSpeechLength):0}}};Ar.VoiceProfileEnrollmentResult=r;class n extends e.CancellationDetailsBase{constructor(s,a,o){super(s,a,o)}static fromResult(s){const a=e.CancellationReason.Error;let o=e.CancellationErrorCode.NoError;return s.properties&&(o=e.CancellationErrorCode[s.properties.getProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[e.CancellationErrorCode.NoError])]),new n(a,s.errorDetails,o)}}return Ar.VoiceProfileEnrollmentCancellationDetails=n,Ar}var kr={},Pv;function dT(){if(Pv)return kr;Pv=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.VoiceProfileCancellationDetails=kr.VoiceProfileResult=void 0;const t=k(),e=z,r=I();let n=class{constructor(a,o){this.privReason=a,this.privProperties=new r.PropertyCollection,a===r.ResultReason.Canceled&&(e.Contracts.throwIfNullOrUndefined(o,"statusText"),this.privErrorDetails=o,this.privProperties.setProperty(t.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}};kr.VoiceProfileResult=n;class i extends r.CancellationDetailsBase{constructor(a,o,c){super(a,o,c)}static fromResult(a){const o=r.CancellationReason.Error;let c=r.CancellationErrorCode.NoError;return a.properties&&(c=r.CancellationErrorCode[a.properties.getProperty(t.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new i(o,a.errorDetails,c)}}return kr.VoiceProfileCancellationDetails=i,kr}var Bi={},Rv;function hT(){if(Rv)return Bi;Rv=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.VoiceProfilePhraseResult=void 0;const t=z,e=I();let r=class extends e.VoiceProfileResult{constructor(i,s,a,o){super(i,s),this.privPhrases=[],t.Contracts.throwIfNullOrUndefined(o,"phrase array"),this.privType=a,o&&o[0]&&(this.privPhrases=o)}get phrases(){return this.privPhrases}get type(){return this.privType}};return Bi.VoiceProfilePhraseResult=r,Bi}var Fi={},Ev;function fT(){if(Ev)return Fi;Ev=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.VoiceProfileClient=void 0;const t=k(),e=Hy(),r=z,n=I();let i=class extends n.Recognizer{constructor(a){r.Contracts.throwIfNullOrUndefined(a,"speechConfig");const o=a;r.Contracts.throwIfNull(o,"speechConfig"),super(e.AudioConfig.fromStreamInput(n.AudioInputStream.createPushStream()),o.properties,new t.VoiceProfileConnectionFactory),this.privProperties=o.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){r.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}async createProfileAsync(a,o){const c=await this.privVoiceAdapter.createProfile(a,o);return new n.VoiceProfile(c[0],a)}async retrieveEnrollmentResultAsync(a){return this.privVoiceAdapter.retrieveEnrollmentResult(a)}async getAllProfilesAsync(a){return this.privVoiceAdapter.getAllProfiles(a)}async getActivationPhrasesAsync(a,o){return this.privVoiceAdapter.getActivationPhrases(a,o)}async enrollProfileAsync(a,o){const c=o;return r.Contracts.throwIfNullOrUndefined(c,"audioConfig"),this.audioConfig=o,this.privVoiceAdapter.SpeakerAudioSource=c,this.privVoiceAdapter.enrollProfile(a)}async deleteProfileAsync(a){return this.privVoiceAdapter.deleteProfile(a)}async resetProfileAsync(a){return this.privVoiceAdapter.resetProfile(a)}async close(){await this.dispose(!0)}createServiceRecognizer(a,o,c,u){const l=c;return new t.VoiceServiceRecognizer(a,o,l,u,this)}async dispose(a){this.privDisposedVoiceAdapter||(this.privDisposedVoiceAdapter=!0,a&&await super.dispose(a))}createRecognizerConfig(a){return new t.RecognizerConfig(a,this.properties)}getResult(a,o){return new n.VoiceProfileResult(a.ok?o:n.ResultReason.Canceled,a.statusText)}};return Fi.VoiceProfileClient=i,Fi}var qi={},wv;function vT(){if(wv)return qi;wv=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.SpeakerRecognizer=void 0;const t=k(),e=z,r=I();let n=class extends r.Recognizer{constructor(s,a){e.Contracts.throwIfNullOrUndefined(s,"speechConfig");const o=s;e.Contracts.throwIfNullOrUndefined(o,"speechConfig"),super(a,o.properties,new t.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=a,e.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=o.properties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){e.Contracts.throwIfNullOrWhitespace(s,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,s)}get properties(){return this.privProperties}async recognizeOnceAsync(s){return e.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(s)}async close(){e.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.dispose(!0)}async recognizeSpeakerOnceAsyncImpl(s){e.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.implRecognizerStop();const a=await this.privReco.recognizeSpeaker(s);return await this.implRecognizerStop(),a}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}createRecognizerConfig(s){return new t.RecognizerConfig(s,this.privProperties)}createServiceRecognizer(s,a,o,c){const u=o;return new t.SpeakerServiceRecognizer(s,a,u,c,this)}async dispose(s){this.privDisposedSpeakerRecognizer||s&&(this.privDisposedSpeakerRecognizer=!0,await super.dispose(s))}};return qi.SpeakerRecognizer=n,qi}var Ui={},Iv;function gT(){if(Iv)return Ui;Iv=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.SpeakerIdentificationModel=void 0;const t=z,e=I();let r=class hC{constructor(i){if(this.privVoiceProfiles=[],this.privProfileIds=[],t.Contracts.throwIfNullOrUndefined(i,"VoiceProfiles"),i.length===0)throw new Error("Empty Voice Profiles array");for(const s of i){if(s.profileType!==e.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+s.profileId);this.privVoiceProfiles.push(s),this.privProfileIds.push(s.profileId)}}static fromProfiles(i){return new hC(i)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}};return Ui.SpeakerIdentificationModel=r,Ui}var $i={},Tv;function mT(){if(Tv)return $i;Tv=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.SpeakerVerificationModel=void 0;const t=z,e=I();let r=class fC{constructor(i){if(t.Contracts.throwIfNullOrUndefined(i,"VoiceProfile"),i.profileType===e.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=i}static fromProfile(i){return new fC(i)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===e.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}};return $i.SpeakerVerificationModel=r,$i}var Vi={},Nd={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageIdMode=void 0,function(e){e[e.AtStart=0]="AtStart",e[e.Continuous=1]="Continuous"}(t.LanguageIdMode||(t.LanguageIdMode={}))})(Nd);var _v;function ST(){if(_v)return Vi;_v=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.AutoDetectSourceLanguageConfig=void 0;const t=k(),e=z,r=I(),n=Nd;let i=class wa{constructor(){this.privProperties=new r.PropertyCollection,this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=n.LanguageIdMode.AtStart}static fromOpenRange(){const a=new wa;return a.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,t.AutoDetectSourceLanguagesOpenRangeOptionName),a}static fromLanguages(a){e.Contracts.throwIfArrayEmptyOrWhitespace(a,"languages");const o=new wa;return o.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a.join()),o}static fromSourceLanguageConfigs(a){if(a.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const o=new wa,c=[];return a.forEach(u=>{if(c.push(u.language),u.endpointId!==void 0&&u.endpointId!==""){const l=u.language+r.PropertyId.SpeechServiceConnection_EndpointId.toString();o.properties.setProperty(l,u.endpointId)}}),o.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,c.join()),o}get properties(){return this.privProperties}set mode(a){a===n.LanguageIdMode.Continuous?(this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=a}};return Vi.AutoDetectSourceLanguageConfig=i,Vi}var iu={};Object.defineProperty(iu,"__esModule",{value:!0});iu.AutoDetectSourceLanguageResult=void 0;const Av=z;class Za{constructor(e,r){Av.Contracts.throwIfNullOrUndefined(e,"language"),Av.Contracts.throwIfNullOrUndefined(r,"languageDetectionConfidence"),this.privLanguage=e,this.privLanguageDetectionConfidence=r}static fromResult(e){return new Za(e.language,e.languageDetectionConfidence)}static fromConversationTranscriptionResult(e){return new Za(e.language,e.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}}iu.AutoDetectSourceLanguageResult=Za;var su={};Object.defineProperty(su,"__esModule",{value:!0});su.SourceLanguageConfig=void 0;const yT=z;class zd{constructor(e,r){yT.Contracts.throwIfNullOrUndefined(e,"language"),this.privLanguage=e,this.privEndpointId=r}static fromLanguage(e,r){return new zd(e,r)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}}su.SourceLanguageConfig=zd;var Cl={},kv;function CT(){return kv||(kv=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerRecognitionCancellationDetails=t.SpeakerRecognitionResult=t.SpeakerRecognitionResultType=void 0;const e=k(),r=I();var n;(function(a){a[a.Verify=0]="Verify",a[a.Identify=1]="Identify"})(n=t.SpeakerRecognitionResultType||(t.SpeakerRecognitionResultType={}));class i{constructor(o,c=r.ResultReason.RecognizedSpeaker,u=r.CancellationErrorCode.NoError,l=""){this.privProperties=new r.PropertyCollection;const p=o.scenario==="TextIndependentIdentification"?n.Identify:n.Verify;this.privReason=c,this.privReason!==r.ResultReason.Canceled?p===n.Identify?(this.privProfileId=o.identificationResult.identifiedProfile.profileId,this.privScore=o.identificationResult.identifiedProfile.score,this.privReason=r.ResultReason.RecognizedSpeakers):(this.privScore=o.verificationResult.score,o.verificationResult.recognitionResult.toLowerCase()!=="accept"&&(this.privReason=r.ResultReason.NoMatch),o.verificationResult.profileId!==void 0&&o.verificationResult.profileId!==""&&(this.privProfileId=o.verificationResult.profileId)):(this.privErrorDetails=l,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,r.CancellationErrorCode[u])),this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(o))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}}t.SpeakerRecognitionResult=i;class s extends r.CancellationDetailsBase{constructor(o,c,u){super(o,c,u)}static fromResult(o){const c=r.CancellationReason.Error;let u=r.CancellationErrorCode.NoError;return o.properties&&(u=r.CancellationErrorCode[o.properties.getProperty(e.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new s(c,o.errorDetails,u)}}t.SpeakerRecognitionCancellationDetails=s}(Cl)),Cl}var Pl={},Or={},Ov;function vC(){if(Ov)return Or;Ov=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.ConversationImpl=Or.Conversation=void 0;const t=k(),e=M(),r=z,n=I();let i=class{constructor(){}static createConversationAsync(o,c,u,l){r.Contracts.throwIfNullOrUndefined(o,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),r.Contracts.throwIfNullOrUndefined(o.region,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),!o.subscriptionKey&&!o.getProperty(n.PropertyId[n.PropertyId.SpeechServiceAuthorization_Token])&&r.Contracts.throwIfNullOrUndefined(o.subscriptionKey,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let p,d,h;return typeof c=="string"?(p=new s(o,c),e.marshalPromiseToCallbacks((async()=>{})(),u,l)):(p=new s(o),d=c,h=u,p.createConversationAsync(()=>{d&&d()},f=>{h&&h(f)})),p}};Or.Conversation=i;class s extends i{constructor(o,c){if(super(),this.privErrors=t.ConversationConnectionConfig.restErrors,this.onConnected=p=>{var d;this.privIsConnected=!0;try{(d=this.privConversationTranslator)!=null&&d.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,p)}catch{}},this.onDisconnected=p=>{var d;try{(d=this.privConversationTranslator)!=null&&d.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,p)}catch{}finally{this.close(!1)}},this.onCanceled=(p,d)=>{var h;try{(h=this.privConversationTranslator)!=null&&h.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,d)}catch{}},this.onParticipantUpdateCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.id);if(h!==void 0){switch(d.key){case t.ConversationTranslatorCommandTypes.changeNickname:h.displayName=d.value;break;case t.ConversationTranslatorCommandTypes.setUseTTS:h.isUsingTts=d.value;break;case t.ConversationTranslatorCommandTypes.setProfanityFiltering:h.profanity=d.value;break;case t.ConversationTranslatorCommandTypes.setMute:h.isMuted=d.value;break;case t.ConversationTranslatorCommandTypes.setTranslateToLanguages:h.translateToLanguages=d.value;break}this.privParticipants.addOrUpdateParticipant(h),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,[this.toParticipant(h)],d.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(p,d)=>{try{this.privParticipants.participants.forEach(h=>h.isMuted=h.isHost?!1:d.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,this.toParticipants(!1),d.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(p,d)=>{try{const h=this.privParticipants.addOrUpdateParticipant(d.participant);h!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,[this.toParticipant(h)],d.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.participant.id);h!==void 0&&(this.privParticipants.deleteParticipant(d.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.LeftConversation,[this.toParticipant(h)],d.sessionId)))}catch{}},this.onTranslationReceived=(p,d)=>{try{switch(d.command){case t.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case t.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case t.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break}}catch{}},this.onParticipantsListReceived=(p,d)=>{var h;try{if(d.sessionToken!==void 0&&d.sessionToken!==null&&(this.privRoom.token=d.sessionToken),this.privParticipants.participants=[...d.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),d.sessionId)),this.me.isHost){const f=(h=this.privConversationTranslator)==null?void 0:h.properties.getProperty(n.PropertyId.ConversationTranslator_Name);f!==void 0&&f.length>0&&f!==this.me.displayName&&this.changeNicknameAsync(f)}}catch{}},this.onConversationExpiration=(p,d)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,d)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new n.PropertyCollection,this.privManager=new t.ConversationManager,o.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])||o.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage],t.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=o.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),c)this.privConversationId=c;else{o.targetLanguages.length===0&&o.addTargetLanguage(this.privLanguage),o.getProperty(n.PropertyId[n.PropertyId.SpeechServiceResponse_ProfanityOption])||o.setProfanity(n.ProfanityOption.Masked);let d=o.getProperty(n.PropertyId[n.PropertyId.ConversationTranslator_Name]);d==null&&(d="Host"),r.Contracts.throwIfNullOrTooLong(d,"nickname",50),r.Contracts.throwIfNullOrTooShort(d,"nickname",2),o.setProperty(n.PropertyId[n.PropertyId.ConversationTranslator_Name],d)}this.privConfig=o;const l=o;r.Contracts.throwIfNull(l,"speechConfig"),this.privProperties=l.properties.clone(),this.privIsConnected=!1,this.privParticipants=new t.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var o,c;return(o=this.privParticipants.me)!=null&&o.isHost?!1:(c=this.privParticipants.me)==null?void 0:c.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const o=this.conversationId,c=this.participants.map(p=>({id:p.id,preferredLanguage:p.preferredLanguage,voice:p.voice})),u={};for(const p of t.ConversationConnectionConfig.transcriptionEventKeys){const d=this.properties.getProperty(p,"");d!==""&&(u[p]=d)}return{id:o,participants:c,conversationProperties:u}}get canSend(){var o;return this.privIsConnected&&!((o=this.privParticipants.me)!=null&&o.isMuted)}get canSendAsHost(){var o;return this.privIsConnected&&((o=this.privParticipants.me)==null?void 0:o.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(o){r.Contracts.throwIfNullOrWhitespace(o,"authorizationToken"),this.privToken=o}set conversationTranslator(o){this.privConversationTranslator=o}onToken(o){this.privConversationTranslator.onToken(o)}createConversationAsync(o,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),this.privManager.createOrJoin(this.privProperties,void 0,u=>{u||this.handleError(new Error(this.privErrors.permissionDeniedConnect),c),this.privRoom=u,this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}startConversationAsync(o,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=t.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}addParticipantAsync(o,c,u){r.Contracts.throwIfNullOrUndefined(o,"Participant"),e.marshalPromiseToCallbacks(this.addParticipantImplAsync(o),c,u)}joinConversationAsync(o,c,u,l,p){try{r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","conversationId")),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,o,d=>{r.Contracts.throwIfNullOrUndefined(d,this.privErrors.permissionDeniedConnect),this.privRoom=d,this.privConfig.authorizationToken=d.cognitiveSpeechAuthToken,l&&l(d.cognitiveSpeechAuthToken)},d=>{this.handleError(d,p)})}catch(d){this.handleError(d,p)}}deleteConversationAsync(o,c){e.marshalPromiseToCallbacks(this.deleteConversationImplAsync(),o,c)}async deleteConversationImplAsync(){r.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),r.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endConversationAsync(o,c){e.marshalPromiseToCallbacks(this.endConversationImplAsync(),o,c)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(o,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteAllParticipantsAsync(o,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteParticipantAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!0),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}removeParticipantAsync(o,c,u){try{if(r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&o.hasOwnProperty("id"))e.marshalPromiseToCallbacks(this.removeParticipantImplAsync(o),c,u);else{r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),u);let l="";typeof o=="string"?l=o:o.hasOwnProperty("id")?l=o.id:o.hasOwnProperty("userId")&&(l=o.userId),r.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(d=>d.id===l)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(l),()=>{this.handleCallback(c,u)},d=>{this.handleError(d,u)})}}catch(l){this.handleError(l,u)}}unlockConversationAsync(o,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteAllParticipantsAsync(o,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteParticipantAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!1),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}sendTextMessageAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","message")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),o.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(o),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}setTranslatedLanguagesAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfArrayEmptyOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","languages")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(o),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}changeNicknameAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(o),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(o){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await o.enforceAudioGating(),this.privTranscriberRecognizer=o,this.privTranscriberRecognizer.conversation=this}getKeepAlive(){const o=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:o,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(o){if(this.privParticipants.addOrUpdateParticipant(o)!==void 0&&this.privTranscriberRecognizer){const u=this.conversationInfo;return u.participants=[o],this.privTranscriberRecognizer.pushConversationEvent(u,"join")}}removeParticipantImplAsync(o){this.privParticipants.deleteParticipant(o.id);const c=this.conversationInfo;return c.participants=[o],this.privTranscriberRecognizer.pushConversationEvent(c,"leave")}async close(o){var c;try{this.privIsConnected=!1,await((c=this.privConversationRecognizer)==null?void 0:c.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(u){throw u}o&&this.dispose()}handleCallback(o,c){if(o){try{o()}catch(u){c&&c(u)}o=void 0}}handleError(o,c){if(c)if(o instanceof Error){const u=o;c(u.name+": "+u.message)}else c(o)}toParticipants(o){const c=this.privParticipants.participants.map(u=>this.toParticipant(u));return o?c:c.filter(u=>u.isHost===!1)}toParticipant(o){return new n.Participant(o.id,o.avatar,o.displayName,o.isHost,o.isMuted,o.isUsingTts,o.preferredLanguage,o.voice)}getMuteAllCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMuteCommand(o,c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMute,participantId:o,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:c})}getLockCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:o})}getEjectCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.ejectParticipant,participantId:o,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:o})}getChangeNicknameCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(o,"nickname"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.changeNickname,nickname:o,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMessageCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),r.Contracts.throwIfNullOrWhitespace(o,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:o,type:t.ConversationTranslatorMessageTypes.instantMessage})}}return Or.ConversationImpl=s,Or}var ou={};Object.defineProperty(ou,"__esModule",{value:!0});ou.ConversationCommon=void 0;class PT{constructor(e){this.privAudioConfig=e}handleCallback(e,r){if(e){try{e()}catch(n){r&&r(n)}e=void 0}}handleError(e,r){if(r)if(e instanceof Error){const n=e;r(n.name+": "+n.message)}else r(e)}}ou.ConversationCommon=PT;var Wi={},Mv;function RT(){if(Mv)return Wi;Mv=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.ConversationExpirationEventArgs=void 0;const t=I();let e=class extends t.SessionEventArgs{constructor(n,i){super(i),this.privExpirationTime=n}get expirationTime(){return this.privExpirationTime}};return Wi.ConversationExpirationEventArgs=e,Wi}var Hi={},bv;function ET(){if(bv)return Hi;bv=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.ConversationParticipantsChangedEventArgs=void 0;const t=I();let e=class extends t.SessionEventArgs{constructor(n,i,s){super(s),this.privReason=n,this.privParticipant=i}get reason(){return this.privReason}get participants(){return this.privParticipant}};return Hi.ConversationParticipantsChangedEventArgs=e,Hi}var Ki={},Dv;function wT(){if(Dv)return Ki;Dv=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.ConversationTranslationCanceledEventArgs=void 0;const t=xo();let e=class extends t.CancellationEventArgsBase{};return Ki.ConversationTranslationCanceledEventArgs=e,Ki}var Ji={},Nv;function IT(){if(Nv)return Ji;Nv=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.ConversationTranslationEventArgs=void 0;const t=I();let e=class extends t.RecognitionEventArgs{constructor(n,i,s){super(i,s),this.privResult=n}get result(){return this.privResult}};return Ji.ConversationTranslationEventArgs=e,Ji}var Gi={},zv;function TT(){if(zv)return Gi;zv=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.ConversationTranslationResult=void 0;const t=Yy();let e=class extends t.TranslationRecognitionResult{constructor(n,i,s,a,o,c,u,l,p,d,h){super(i,a,o,c,u,l,void 0,void 0,p,d,h),this.privId=n,this.privOrigLang=s}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}};return Gi.ConversationTranslationResult=e,Gi}var Rl={},Qi={},Fo={};Object.defineProperty(Fo,"__esModule",{value:!0});Fo.StringUtils=void 0;class _T{static formatString(e,r){if(!e)return"";if(!r)return e;let n="",i="";const s=c=>{n+=c},a=c=>{i+=c};let o=s;for(let c=0;c<e.length;c++){const u=e[c],l=c+1<e.length?e[c+1]:"";switch(u){case"{":l==="{"?(o("{"),c++):o=a;break;case"}":l==="}"?(o("}"),c++):(r.hasOwnProperty(i)&&(n+=r[i]),o=s,i="");break;default:o(u);break}}return n}}Fo.StringUtils=_T;var Lv;function AT(){if(Lv)return Qi;Lv=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.ConversationTranslatorConnectionFactory=void 0;const t=fe(),e=Fo,r=z,n=I(),i=he,s=St,a=yt(),o=k();let c=class gC extends a.ConnectionFactoryBase{constructor(l){super(),r.Contracts.throwIfNullOrUndefined(l,"convGetter"),this.privConvGetter=l}create(l,p,d){const h=l.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase()==="TRUE",f=this.privConvGetter().room,m=f.cognitiveSpeechRegion||l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region,""),y={hostSuffix:a.ConnectionFactoryBase.getHostSuffix(m),path:gC.CTS_VIRT_MIC_PATH,region:encodeURIComponent(m)};y[s.QueryParameterNames.Language]=encodeURIComponent(l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,"")),y[s.QueryParameterNames.CtsMeetingId]=encodeURIComponent(f.roomId),y[s.QueryParameterNames.CtsDeviceId]=encodeURIComponent(f.participantId),y[s.QueryParameterNames.CtsIsParticipant]=f.isHost?"":"&"+s.QueryParameterNames.CtsIsParticipant;let v="";const g={},S={};if(h){v=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint),v||(v="wss://"+l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),v=e.StringUtils.formatString(v,y);const P=new URL(v);P.searchParams.forEach((w,E)=>{g[E]=w}),new o.TranscriberConnectionFactory().setQueryParams(g,l,v),g[s.QueryParameterNames.CtsMeetingId]=y[s.QueryParameterNames.CtsMeetingId],g[s.QueryParameterNames.CtsDeviceId]=y[s.QueryParameterNames.CtsDeviceId],f.isHost||(g[s.QueryParameterNames.CtsIsParticipant]=""),s.QueryParameterNames.Format in g||(g[s.QueryParameterNames.Format]="simple"),P.searchParams.forEach((w,E)=>{P.searchParams.set(E,g[E]),delete g[E]}),v=P.toString()}else{const P=new o.TranslationConnectionFactory;v=P.getEndpointUrl(l,!0),v=e.StringUtils.formatString(v,y),P.setQueryParams(g,l,v)}S[i.HeaderNames.ConnectionId]=d,S[t.RestConfigBase.configParams.token]=f.token,p.token&&(S[p.headerName]=p.token);const C=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase()==="TRUE";return new t.WebsocketConnection(v,g,S,new o.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(l),C,d)}};return Qi.ConversationTranslatorConnectionFactory=c,c.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio",Qi}var jv;function kT(){return jv||(jv=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslator=t.SpeechState=void 0;const e=k(),r=AT(),n=M(),i=z,s=I(),a=vC(),o=Ld();var c;(function(p){p[p.Inactive=0]="Inactive",p[p.Connecting=1]="Connecting",p[p.Connected=2]="Connected"})(c=t.SpeechState||(t.SpeechState={}));class u extends s.TranslationRecognizer{constructor(d,h,f,m){super(d,h,new r.ConversationTranslatorConnectionFactory(m)),this.privSpeechState=c.Inactive,f&&(this.privTranslator=f,this.sessionStarted=()=>{this.privSpeechState=c.Connected},this.sessionStopped=()=>{this.privSpeechState=c.Inactive},this.recognizing=(y,v)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,v)},this.recognized=async(y,v)=>{var g;(g=v.result)!=null&&g.errorDetails?(await this.cancelSpeech(),this.fireCancelEvent(v.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,v)},this.canceled=async()=>{if(this.privSpeechState!==c.Inactive)try{await this.cancelSpeech()}catch{this.privSpeechState=c.Inactive}})}get state(){return this.privSpeechState}set state(d){this.privSpeechState=d}set authentication(d){this.privReco.authentication=d}onConnection(){this.privSpeechState=c.Connected}async onCancelSpeech(){this.privSpeechState=c.Inactive,await this.cancelSpeech()}fireCancelEvent(d){try{if(this.privTranslator.canceled){const h=new o.ConversationTranslationCanceledEventArgs(s.CancellationReason.Error,d,s.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,h)}}catch{}}async cancelSpeech(){var d;try{this.stopContinuousRecognitionAsync(),await((d=this.privReco)==null?void 0:d.disconnect()),this.privSpeechState=c.Inactive}catch{}}}class l extends o.ConversationCommon{constructor(d){super(d),this.privErrors=e.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new s.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){var d;return(d=this.privConversation)==null?void 0:d.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===c.Connected||this.privCTRecognizer.state===c.Connecting||this.privConversation.isMutedByHost)}onToken(d){this.privCTRecognizer.authentication=d}setServiceProperty(d,h){const f=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));f[d]=h,this.privProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(f))}joinConversationAsync(d,h,f,m,y){try{if(typeof d=="string"){i.Contracts.throwIfNullOrUndefined(d,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),y);let v=f;(v==null||v==="")&&(v=e.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=s.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(s.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(v),this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage],v),this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.ConversationTranslator_Name],h);const g=[s.PropertyId.SpeechServiceConnection_Host,s.PropertyId.ConversationTranslator_Host,s.PropertyId.SpeechServiceConnection_Endpoint,s.PropertyId.SpeechServiceConnection_ProxyHostName,s.PropertyId.SpeechServiceConnection_ProxyPassword,s.PropertyId.SpeechServiceConnection_ProxyPort,s.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(const C of g){const P=this.privProperties.getProperty(C);if(P){const R=typeof C=="string"?C:s.PropertyId[C];this.privSpeechTranslationConfig.setProperty(R,P)}}const S=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));for(const C of Object.keys(S))this.privSpeechTranslationConfig.setServiceProperty(C,S[C],s.ServicePropertyChannel.UriQueryParameter);this.privConversation=new a.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(d,h,v,C=>{C||this.handleError(new Error(this.privErrors.permissionDeniedConnect),y),this.privSpeechTranslationConfig.authorizationToken=C,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync(()=>{this.handleCallback(m,y)},P=>{this.handleError(P,y)})},C=>{this.handleError(C,y)})}else typeof d=="object"?(i.Contracts.throwIfNullOrUndefined(d,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(s.PropertyId.ConversationTranslator_Name,h),this.privConversation=d,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=d.config,this.handleCallback(f,m)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),m)}catch(v){this.handleError(v,typeof f=="string"?y:m)}}leaveConversationAsync(d,h){n.marshalPromiseToCallbacks((async()=>{await this.cancelSpeech(),await this.privConversation.endConversationImplAsync(),await this.privConversation.deleteConversationImplAsync(),this.dispose()})(),d,h)}sendTextMessageAsync(d,h,f){try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrWhitespace(d,this.privErrors.invalidArgs.replace("{arg}",d)),this.privConversation.sendTextMessageAsync(d,h,f)}catch(m){this.handleError(m,f)}}startTranscribingAsync(d,h){n.marshalPromiseToCallbacks((async()=>{try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privCTRecognizer===void 0&&await this.connectTranslatorRecognizer(),i.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),h),await this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(f){throw this.privIsSpeaking=!1,await this.cancelSpeech(),f}})(),d,h)}stopTranscribingAsync(d,h){n.marshalPromiseToCallbacks((async()=>{try{if(!this.privIsSpeaking){await this.cancelSpeech();return}this.privIsSpeaking=!1,await new Promise((f,m)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(f,m)})}catch{await this.cancelSpeech()}})(),d,h)}isDisposed(){return this.privIsDisposed}dispose(d,h,f){n.marshalPromiseToCallbacks((async()=>{this.isDisposed&&!this.privIsSpeaking||(await this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)})(),h,f)}async cancelSpeech(){var d;try{this.privIsSpeaking=!1,await((d=this.privCTRecognizer)==null?void 0:d.onCancelSpeech()),this.privCTRecognizer=void 0}catch{}}async connectTranslatorRecognizer(){try{this.privAudioConfig===void 0&&(this.privAudioConfig=s.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key],"");const d=()=>this.privConversation;this.privCTRecognizer=new u(this.privSpeechTranslationConfig,this.privAudioConfig,this,d)}catch(d){throw await this.cancelSpeech(),d}}startContinuousRecognition(){return new Promise((d,h)=>{this.privCTRecognizer.startContinuousRecognitionAsync(d,h)})}}t.ConversationTranslator=l}(Rl)),Rl}var Yi={},xv;function OT(){if(xv)return Yi;xv=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.ConversationTranscriber=void 0;const t=k(),e=M(),r=z,n=I();let i=class mC extends n.Recognizer{constructor(a,o){const c=a;r.Contracts.throwIfNull(c,"speechConfig"),r.Contracts.throwIfNullOrWhitespace(c.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage),n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),super(o,c.properties,new t.ConversationTranscriberConnectionFactory),this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(a,o,c){const u=a;return o.properties.mergeTo(u.properties),new mC(a,c)}get endpointId(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){r.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(t.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple])===n.OutputFormat[n.OutputFormat.Simple]?n.OutputFormat.Simple:n.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(a,o){e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),a,o)}stopTranscribingAsync(a,o){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,o)}close(a,o){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),a,o)}async dispose(a){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(a))}createRecognizerConfig(a){return new t.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,o,c,u){const l=c;return u.isSpeakerDiarizationEnabled=!0,new t.ConversationTranscriptionServiceRecognizer(a,o,l,u,this)}};return Yi.ConversationTranscriber=i,Yi}var Mr={},Bv;function MT(){if(Bv)return Mr;Bv=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.Participant=Mr.User=void 0;const t=I();class e{constructor(i){this.privUserId=i}get userId(){return this.privUserId}}Mr.User=e;class r{constructor(i,s,a,o,c,u,l,p){this.privId=i,this.privAvatar=s,this.privDisplayName=a,this.privIsHost=o,this.privIsMuted=c,this.privIsUsingTts=u,this.privPreferredLanguage=l,this.privVoice=p,this.privProperties=new t.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(i,s,a){return new r(i,"",i,!1,!1,!1,s,a)}}return Mr.Participant=r,Mr}var SC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ParticipantChangedReason=void 0,function(e){e[e.JoinedConversation=0]="JoinedConversation",e[e.LeftConversation=1]="LeftConversation",e[e.Updated=2]="Updated"}(t.ParticipantChangedReason||(t.ParticipantChangedReason={}))})(SC);var br={},Fv;function bT(){if(Fv)return br;Fv=1,Object.defineProperty(br,"__esModule",{value:!0}),br.MeetingImpl=br.Meeting=void 0;const t=k(),e=M(),r=z,n=I();let i=class{constructor(){}static createMeetingAsync(o,c,u,l){if(r.Contracts.throwIfNullOrUndefined(o,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),r.Contracts.throwIfNullOrUndefined(o.region,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),r.Contracts.throwIfNull(c,"meetingId"),c.length===0)throw new Error("meetingId cannot be empty");!o.subscriptionKey&&!o.getProperty(n.PropertyId[n.PropertyId.SpeechServiceAuthorization_Token])&&r.Contracts.throwIfNullOrUndefined(o.subscriptionKey,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));const p=new s(o,c);return e.marshalPromiseToCallbacks((async()=>{})(),u,l),p}};br.Meeting=i;class s extends i{constructor(o,c){super(),this.privErrors=t.ConversationConnectionConfig.restErrors,this.onConnected=p=>{var d;this.privIsConnected=!0;try{(d=this.privConversationTranslator)!=null&&d.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,p)}catch{}},this.onDisconnected=p=>{var d;try{(d=this.privConversationTranslator)!=null&&d.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,p)}catch{}finally{this.close(!1)}},this.onCanceled=(p,d)=>{var h;try{(h=this.privConversationTranslator)!=null&&h.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,d)}catch{}},this.onParticipantUpdateCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.id);if(h!==void 0){switch(d.key){case t.ConversationTranslatorCommandTypes.changeNickname:h.displayName=d.value;break;case t.ConversationTranslatorCommandTypes.setUseTTS:h.isUsingTts=d.value;break;case t.ConversationTranslatorCommandTypes.setProfanityFiltering:h.profanity=d.value;break;case t.ConversationTranslatorCommandTypes.setMute:h.isMuted=d.value;break;case t.ConversationTranslatorCommandTypes.setTranslateToLanguages:h.translateToLanguages=d.value;break}this.privParticipants.addOrUpdateParticipant(h),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,[this.toParticipant(h)],d.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(p,d)=>{try{this.privParticipants.participants.forEach(h=>h.isMuted=h.isHost?!1:d.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,this.toParticipants(!1),d.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(p,d)=>{try{const h=this.privParticipants.addOrUpdateParticipant(d.participant);h!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,[this.toParticipant(h)],d.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.participant.id);h!==void 0&&(this.privParticipants.deleteParticipant(d.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.LeftConversation,[this.toParticipant(h)],d.sessionId)))}catch{}},this.onTranslationReceived=(p,d)=>{try{switch(d.command){case t.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case t.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case t.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break}}catch{}},this.onParticipantsListReceived=(p,d)=>{var h;try{if(d.sessionToken!==void 0&&d.sessionToken!==null&&(this.privRoom.token=d.sessionToken),this.privParticipants.participants=[...d.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),d.sessionId)),this.me.isHost){const f=(h=this.privConversationTranslator)==null?void 0:h.properties.getProperty(n.PropertyId.ConversationTranslator_Name);f!==void 0&&f.length>0&&f!==this.me.displayName&&this.changeNicknameAsync(f)}}catch{}},this.onConversationExpiration=(p,d)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,d)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new n.PropertyCollection,this.privManager=new t.ConversationManager,o.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])||o.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage],t.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=o.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=c,this.privConfig=o;const l=o;r.Contracts.throwIfNull(l,"speechConfig"),this.privProperties=l.properties.clone(),this.privIsConnected=!1,this.privParticipants=new t.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var o,c;return(o=this.privParticipants.me)!=null&&o.isHost?!1:(c=this.privParticipants.me)==null?void 0:c.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){const o=this.meetingId,c=this.participants.map(p=>({id:p.id,preferredLanguage:p.preferredLanguage,voice:p.voice})),u={};for(const p of t.ConversationConnectionConfig.transcriptionEventKeys){const d=this.properties.getProperty(p,"");d!==""&&(u[p]=d)}return{id:o,participants:c,meetingProperties:u}}get canSend(){var o;return this.privIsConnected&&!((o=this.privParticipants.me)!=null&&o.isMuted)}get canSendAsHost(){var o;return this.privIsConnected&&((o=this.privParticipants.me)==null?void 0:o.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(o){r.Contracts.throwIfNullOrWhitespace(o,"authorizationToken"),this.privToken=o}createMeetingAsync(o,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),this.privManager.createOrJoin(this.privProperties,void 0,u=>{u||this.handleError(new Error(this.privErrors.permissionDeniedConnect),c),this.privRoom=u,this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}startMeetingAsync(o,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}addParticipantAsync(o,c,u){r.Contracts.throwIfNullOrUndefined(o,"Participant"),e.marshalPromiseToCallbacks(this.addParticipantImplAsync(o),c,u)}joinMeetingAsync(o,c,u,l,p){try{r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","conversationId")),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,o,d=>{r.Contracts.throwIfNullOrUndefined(d,this.privErrors.permissionDeniedConnect),this.privRoom=d,this.privConfig.authorizationToken=d.cognitiveSpeechAuthToken,l&&l(d.cognitiveSpeechAuthToken)},d=>{this.handleError(d,p)})}catch(d){this.handleError(d,p)}}deleteMeetingAsync(o,c){e.marshalPromiseToCallbacks(this.deleteMeetingImplAsync(),o,c)}async deleteMeetingImplAsync(){r.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),r.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endMeetingAsync(o,c){e.marshalPromiseToCallbacks(this.endMeetingImplAsync(),o,c)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(o,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteAllParticipantsAsync(o,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteParticipantAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!0),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}removeParticipantAsync(o,c,u){try{if(r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&o.hasOwnProperty("id"))e.marshalPromiseToCallbacks(this.removeParticipantImplAsync(o),c,u);else{r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),u);let l="";typeof o=="string"?l=o:o.hasOwnProperty("id")?l=o.id:o.hasOwnProperty("userId")&&(l=o.userId),r.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(d=>d.id===l)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(l),()=>{this.handleCallback(c,u)},d=>{this.handleError(d,u)})}}catch(l){this.handleError(l,u)}}unlockMeetingAsync(o,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteAllParticipantsAsync(o,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteParticipantAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!1),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}sendTextMessageAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","message")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),o.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(o),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}setTranslatedLanguagesAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfArrayEmptyOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","languages")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(o),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}changeNicknameAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(o),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(o){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await o.enforceAudioGating(),this.privTranscriberRecognizer=o,this.privTranscriberRecognizer.meeting=this}getKeepAlive(){const o=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:o,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(o){if(this.privParticipants.addOrUpdateParticipant(o)!==void 0&&this.privTranscriberRecognizer){const u=this.meetingInfo;return u.participants=[o],this.privTranscriberRecognizer.pushMeetingEvent(u,"join")}}removeParticipantImplAsync(o){this.privParticipants.deleteParticipant(o.id);const c=this.meetingInfo;return c.participants=[o],this.privTranscriberRecognizer.pushMeetingEvent(c,"leave")}async close(o){var c;try{this.privIsConnected=!1,await((c=this.privConversationRecognizer)==null?void 0:c.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(u){throw u}o&&this.dispose()}handleCallback(o,c){if(o){try{o()}catch(u){c&&c(u)}o=void 0}}handleError(o,c){if(c)if(o instanceof Error){const u=o;c(u.name+": "+u.message)}else c(o)}toParticipants(o){const c=this.privParticipants.participants.map(u=>this.toParticipant(u));return o?c:c.filter(u=>u.isHost===!1)}toParticipant(o){return new n.Participant(o.id,o.avatar,o.displayName,o.isHost,o.isMuted,o.isUsingTts,o.preferredLanguage,o.voice)}getMuteAllCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMuteCommand(o,c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMute,participantId:o,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:c})}getLockCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:o})}getEjectCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.ejectParticipant,participantId:o,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:o})}getChangeNicknameCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(o,"nickname"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.changeNickname,nickname:o,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMessageCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),r.Contracts.throwIfNullOrWhitespace(o,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:o,type:t.ConversationTranslatorMessageTypes.instantMessage})}}return br.MeetingImpl=s,br}var Xi={},qv;function DT(){if(qv)return Xi;qv=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.MeetingTranscriptionCanceledEventArgs=void 0;const t=xo();class e extends t.CancellationEventArgsBase{}return Xi.MeetingTranscriptionCanceledEventArgs=e,Xi}var Zi={},Uv;function NT(){if(Uv)return Zi;Uv=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.MeetingTranscriber=void 0;const t=k(),e=M(),r=z,n=I(),i=Ld();let s=class{constructor(o){this.privAudioConfig=o,this.privProperties=new n.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return n.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){r.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,o)}joinMeetingAsync(o,c,u){const l=o;r.Contracts.throwIfNullOrUndefined(i.MeetingImpl,"Meeting"),this.privRecognizer=new t.TranscriberRecognizer(o.config,this.privAudioConfig),r.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),e.marshalPromiseToCallbacks(l.connectTranscriberRecognizer(this.privRecognizer),c,u)}startTranscribingAsync(o,c){this.privRecognizer.startContinuousRecognitionAsync(o,c)}stopTranscribingAsync(o,c){this.privRecognizer.stopContinuousRecognitionAsync(o,c)}leaveMeetingAsync(o,c){this.privRecognizer.disconnectCallbacks(),e.marshalPromiseToCallbacks((async()=>{})(),o,c)}close(o,c){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),o,c)}async dispose(o){this.privDisposedRecognizer||(this.privRecognizer&&(await this.privRecognizer.close(),this.privRecognizer=void 0),o&&(this.privDisposedRecognizer=!0))}};return Zi.MeetingTranscriber=s,Zi}var es={},$v;function zT(){if($v)return es;$v=1,Object.defineProperty(es,"__esModule",{value:!0}),es.ConversationTranscriptionResult=void 0;const t=I();let e=class extends t.RecognitionResult{constructor(n,i,s,a,o,c,u,l,p,d,h){super(n,i,s,a,o,c,u,p,d,h),this.privSpeakerId=l}get speakerId(){return this.privSpeakerId}};return es.ConversationTranscriptionResult=e,es}var Vv;function Ld(){return Vv||(Vv=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=vC();Object.defineProperty(t,"Conversation",{enumerable:!0,get:function(){return e.Conversation}}),Object.defineProperty(t,"ConversationImpl",{enumerable:!0,get:function(){return e.ConversationImpl}});var r=ou;Object.defineProperty(t,"ConversationCommon",{enumerable:!0,get:function(){return r.ConversationCommon}});var n=RT();Object.defineProperty(t,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return n.ConversationExpirationEventArgs}});var i=ET();Object.defineProperty(t,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return i.ConversationParticipantsChangedEventArgs}});var s=wT();Object.defineProperty(t,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return s.ConversationTranslationCanceledEventArgs}});var a=IT();Object.defineProperty(t,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return a.ConversationTranslationEventArgs}});var o=TT();Object.defineProperty(t,"ConversationTranslationResult",{enumerable:!0,get:function(){return o.ConversationTranslationResult}});var c=kT();Object.defineProperty(t,"ConversationTranslator",{enumerable:!0,get:function(){return c.ConversationTranslator}});var u=OT();Object.defineProperty(t,"ConversationTranscriber",{enumerable:!0,get:function(){return u.ConversationTranscriber}});var l=MT();Object.defineProperty(t,"Participant",{enumerable:!0,get:function(){return l.Participant}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return l.User}});var p=SC;Object.defineProperty(t,"ParticipantChangedReason",{enumerable:!0,get:function(){return p.ParticipantChangedReason}});var d=bT();Object.defineProperty(t,"Meeting",{enumerable:!0,get:function(){return d.Meeting}}),Object.defineProperty(t,"MeetingImpl",{enumerable:!0,get:function(){return d.MeetingImpl}});var h=DT();Object.defineProperty(t,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return h.MeetingTranscriptionCanceledEventArgs}});var f=NT();Object.defineProperty(t,"MeetingTranscriber",{enumerable:!0,get:function(){return f.MeetingTranscriber}});var m=zT();Object.defineProperty(t,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return m.ConversationTranscriptionResult}})}(Pl)),Pl}var Dr={},Wv;function jd(){if(Wv)return Dr;Wv=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.SynthesisRequest=Dr.Synthesizer=void 0;const t=k(),e=M(),r=z,n=I();let i=class yC{constructor(o){const c=o;r.Contracts.throwIfNull(c,"speechConfig"),this.privProperties=c.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new e.Queue}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){r.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,o)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===t.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(o){const c={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-AvaMultilingualNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let u=this.properties.getProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),l=this.properties.getProperty(n.PropertyId.SpeechServiceConnection_SynthVoice,""),p=yC.XMLEncode(o);return this.autoDetectSourceLanguage?u="en-US":l=l||c[u],l&&(p=`<voice name='${l}'>${p}</voice>`),p=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${u}'>${p}</speak>`,p}async dispose(o){this.privDisposed||(o&&this.privAdapter&&await this.privAdapter.dispose(),this.privDisposed=!0)}async adapterSpeak(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const o=await this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(o.text,o.isSSML,o.requestId,o.cb,o.err,o.dataStream)}}createSynthesizerConfig(o){return new t.SynthesizerConfig(o,this.privProperties)}implCommonSynthesizeSetup(){let o=typeof window<"u"?"Browser":"Node",c="unknown",u="unknown";typeof navigator<"u"&&(o=o+"/"+navigator.platform,c=navigator.userAgent,u=navigator.appVersion);const l=this.createSynthesizerConfig(new t.SpeechServiceConfig(new t.Context(new t.OS(o,c,u)))),p=this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Key,void 0),d=p&&p!==""?new t.CognitiveSubscriptionKeyAuthentication(p):new t.CognitiveTokenAuthentication(()=>{const h=this.privProperties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(h)},()=>{const h=this.privProperties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(h)});this.privAdapter=this.createSynthesisAdapter(d,this.privConnectionFactory,l),this.privRestAdapter=this.createRestSynthesisAdapter(d,l)}static XMLEncode(o){return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};Dr.Synthesizer=i;class s{constructor(o,c,u,l,p,d){this.requestId=o,this.text=c,this.isSSML=u,this.cb=l,this.err=p,this.dataStream=d}}return Dr.SynthesisRequest=s,Dr}var ts={},Hv;function LT(){if(Hv)return ts;Hv=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.SpeechSynthesizer=void 0;const t=k(),e=M(),r=jo,n=Er,i=me,s=z,a=I(),o=jd();let c=class CC extends a.Synthesizer{constructor(l,p){super(l),p!==null&&(p===void 0?this.audioConfig=typeof window>"u"?void 0:a.AudioConfig.fromDefaultSpeakerOutput():this.audioConfig=p),this.privConnectionFactory=new t.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(l,p,d){const h=l;return p.properties.mergeTo(h.properties),new CC(l,d)}speakTextAsync(l,p,d,h){this.speakImpl(l,!1,p,d,h)}speakSsmlAsync(l,p,d,h){this.speakImpl(l,!0,p,d,h)}async getVoicesAsync(l=""){return this.getVoices(l)}close(l,p){s.Contracts.throwIfDisposed(this.privDisposed),e.marshalPromiseToCallbacks(this.dispose(!0),l,p)}get internalData(){return this.privAdapter}createSynthesisAdapter(l,p,d){return new t.SpeechSynthesisAdapter(l,p,d,this,this.audioConfig)}createRestSynthesisAdapter(l,p){return new t.SynthesisRestAdapter(p,l)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(a.SpeechSynthesisOutputFormat[this.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(l,p,d,h,f){try{s.Contracts.throwIfDisposed(this.privDisposed);const m=e.createNoDashGuid();let y;f instanceof a.PushAudioOutputStreamCallback?y=new i.PushAudioOutputStreamImpl(f):f instanceof a.PullAudioOutputStream?y=f:f!==void 0?y=new r.AudioFileWriter(f):y=void 0,this.synthesisRequestQueue.enqueue(new o.SynthesisRequest(m,l,p,v=>{if(this.privSynthesizing=!1,d)try{d(v)}catch(g){h&&h(g)}d=void 0,this.adapterSpeak().catch(()=>{})},v=>{h&&h(v)},y)),this.adapterSpeak().catch(()=>{})}catch(m){if(h)if(m instanceof Error){const y=m;h(y.name+": "+y.message)}else h(m);this.dispose(!0).catch(()=>{})}}async getVoices(l){const p=e.createNoDashGuid(),d=await this.privRestAdapter.getVoicesList(p);if(d.ok&&Array.isArray(d.json)){let h=d.json;return l&&l.length>0&&(h=h.filter(f=>!!f.Locale&&f.Locale.toLowerCase()===l.toLowerCase())),new a.SynthesisVoicesResult(p,h,void 0)}else return new a.SynthesisVoicesResult(p,void 0,`Error: ${d.status}: ${d.statusText}`)}};return ts.SpeechSynthesizer=c,ts}var au={};Object.defineProperty(au,"__esModule",{value:!0});au.SynthesisResult=void 0;class jT{constructor(e,r,n,i){this.privResultId=e,this.privReason=r,this.privErrorDetails=n,this.privProperties=i}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}}au.SynthesisResult=jT;var rs={},Kv;function xT(){if(Kv)return rs;Kv=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.SpeechSynthesisResult=void 0;const t=I();let e=class extends t.SynthesisResult{constructor(n,i,s,a,o,c){super(n,i,a,o),this.privAudioData=s,this.privAudioDuration=c}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}};return rs.SpeechSynthesisResult=e,rs}var cu={};Object.defineProperty(cu,"__esModule",{value:!0});cu.SpeechSynthesisEventArgs=void 0;class BT{constructor(e){this.privResult=e}get result(){return this.privResult}}cu.SpeechSynthesisEventArgs=BT;var uu={};Object.defineProperty(uu,"__esModule",{value:!0});uu.SpeechSynthesisWordBoundaryEventArgs=void 0;class FT{constructor(e,r,n,i,s,a){this.privAudioOffset=e,this.privDuration=r,this.privText=n,this.privWordLength=i,this.privTextOffset=s,this.privBoundaryType=a}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}}uu.SpeechSynthesisWordBoundaryEventArgs=FT;var lu={};Object.defineProperty(lu,"__esModule",{value:!0});lu.SpeechSynthesisBookmarkEventArgs=void 0;class qT{constructor(e,r){this.privAudioOffset=e,this.privText=r}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}}lu.SpeechSynthesisBookmarkEventArgs=qT;var pu={};Object.defineProperty(pu,"__esModule",{value:!0});pu.SpeechSynthesisVisemeEventArgs=void 0;class UT{constructor(e,r,n){this.privAudioOffset=e,this.privVisemeId=r,this.privAnimation=n}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}}pu.SpeechSynthesisVisemeEventArgs=UT;var PC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisBoundaryType=void 0,function(e){e.Word="WordBoundary",e.Punctuation="PunctuationBoundary",e.Sentence="SentenceBoundary"}(t.SpeechSynthesisBoundaryType||(t.SpeechSynthesisBoundaryType={}))})(PC);var ns={},Jv;function $T(){if(Jv)return ns;Jv=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.SynthesisVoicesResult=void 0;const t=I();let e=class extends t.SynthesisResult{constructor(n,i,s){if(Array.isArray(i)){super(n,t.ResultReason.VoicesListRetrieved,void 0,new t.PropertyCollection),this.privVoices=[];for(const a of i)this.privVoices.push(new t.VoiceInfo(a))}else super(n,t.ResultReason.Canceled,s||"Error information unavailable",new t.PropertyCollection)}get voices(){return this.privVoices}};return ns.SynthesisVoicesResult=e,ns}var RC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceInfo=t.SynthesisVoiceType=t.SynthesisVoiceGender=void 0;var e;(function(s){s[s.Unknown=0]="Unknown",s[s.Female=1]="Female",s[s.Male=2]="Male",s[s.Neutral=3]="Neutral"})(e=t.SynthesisVoiceGender||(t.SynthesisVoiceGender={}));var r;(function(s){s[s.OnlineNeural=1]="OnlineNeural",s[s.OnlineStandard=2]="OnlineStandard",s[s.OfflineNeural=3]="OfflineNeural",s[s.OfflineStandard=4]="OfflineStandard"})(r=t.SynthesisVoiceType||(t.SynthesisVoiceType={}));const n={[e[e.Neutral]]:e.Neutral,[e[e.Male]]:e.Male,[e[e.Female]]:e.Female};class i{constructor(a){if(this.privStyleList=[],a){if(this.privName=a.Name,this.privLocale=a.Locale,this.privShortName=a.ShortName,this.privLocaleName=a.LocaleName,this.privDisplayName=a.DisplayName,this.privLocalName=a.LocalName,this.privVoiceType=a.VoiceType.endsWith("Standard")?r.OnlineStandard:r.OnlineNeural,this.privGender=n[a.Gender]||e.Unknown,a.StyleList&&Array.isArray(a.StyleList))for(const o of a.StyleList)this.privStyleList.push(o);this.privSampleRateHertz=a.SampleRateHertz,this.privStatus=a.Status,a.ExtendedPropertyMap&&(this.privExtendedPropertyMap=a.ExtendedPropertyMap),this.privWordsPerMinute=a.WordsPerMinute,Array.isArray(a.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...a.SecondaryLocaleList]),Array.isArray(a.RolePlayList)&&(this.privRolePlayList=[...a.RolePlayList])}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}}t.VoiceInfo=i})(RC);var du={};Object.defineProperty(du,"__esModule",{value:!0});du.SpeakerAudioDestination=void 0;const Nr=M(),VT=me,Fe=Rr,WT=60*30,Gv={[Fe.AudioFormatTag.PCM]:"audio/wav",[Fe.AudioFormatTag.MuLaw]:"audio/x-wav",[Fe.AudioFormatTag.MP3]:"audio/mpeg",[Fe.AudioFormatTag.OGG_OPUS]:"audio/ogg",[Fe.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[Fe.AudioFormatTag.ALaw]:"audio/x-wav",[Fe.AudioFormatTag.FLAC]:"audio/flac",[Fe.AudioFormatTag.AMR_WB]:"audio/amr-wb",[Fe.AudioFormatTag.G722]:"audio/G722"};class HT{constructor(e){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=e||Nr.createNoDashGuid(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(e,r,n){this.privAudioBuffer!==void 0?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then(()=>{r&&r()},i=>{n&&n(i)})):this.privAudioOutputStream!==void 0&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)}close(e,r){if(this.privIsClosed=!0,this.privSourceBuffer!==void 0)this.handleSourceBufferUpdateEnd().then(()=>{e&&e()},n=>{r&&r(n)});else if(this.privAudioOutputStream!==void 0&&typeof window<"u")if((this.privFormat.formatTag===Fe.AudioFormatTag.PCM||this.privFormat.formatTag===Fe.AudioFormatTag.MuLaw||this.privFormat.formatTag===Fe.AudioFormatTag.ALaw)&&this.privFormat.hasHeader===!1)console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else{let n=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(n).then(()=>{n=this.privFormat.addHeader(n);const i=new Blob([n],{type:Gv[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(i),this.notifyPlayback().then(()=>{e&&e()},s=>{r&&r(s)})},i=>{r&&r(i)})}else this.onAudioEnd&&this.onAudioEnd(this)}set format(e){if(typeof AudioContext<"u"||typeof window<"u"&&typeof window.webkitAudioContext<"u"){this.privFormat=e;const r=Gv[this.privFormat.formatTag];r===void 0?console.warn(`Unknown mimeType for format ${Fe.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):typeof MediaSource<"u"&&MediaSource.isTypeSupported(r)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=WT,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(r),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(n=>{Nr.Events.instance.onEvent(new Nr.BackgroundEvent(n))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(n=>{Nr.Events.instance.onEvent(new Nr.BackgroundEvent(n))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(n=>{Nr.Events.instance.onEvent(new Nr.BackgroundEvent(n))})):(console.warn(`Format ${Fe.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new VT.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){var e;return((e=this.privAudio)==null?void 0:e.volume)??-1}set volume(e){this.privAudio&&(this.privAudio.volume=e)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return this.privAudio!==void 0?this.privAudio.currentTime:-1}pause(){!this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.pause(),this.privIsPaused=!0)}resume(e,r){this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.play().then(()=>{e&&e()},n=>{r&&r(n)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}async updateSourceBuffer(){if(this.privAudioBuffer!==void 0&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const e=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(e)}catch{this.privAudioBuffer.unshift(e),console.log("buffer filled, pausing addition of binaries until space is made");return}await this.notifyPlayback()}else this.canEndStream()&&await this.handleSourceBufferUpdateEnd()}async handleSourceBufferUpdateEnd(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),await this.notifyPlayback())}async notifyPlayback(){!this.privPlaybackStarted&&this.privAudio!==void 0&&(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||await this.privAudio.play())}canEndStream(){return this.isClosed&&this.privSourceBuffer!==void 0&&this.privAudioBuffer.length===0&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&this.privMediaSource.readyState==="open"}sourceBufferAvailable(){return this.privSourceBuffer!==void 0&&!this.privSourceBuffer.updating}}du.SpeakerAudioDestination=HT;var is={},Qv;function KT(){if(Qv)return is;Qv=1,Object.defineProperty(is,"__esModule",{value:!0}),is.ConversationTranscriptionCanceledEventArgs=void 0;const t=xo();let e=class extends t.CancellationEventArgsBase{};return is.ConversationTranscriptionCanceledEventArgs=e,is}var ss={},Yv;function JT(){if(Yv)return ss;Yv=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.MeetingTranscriptionCanceledEventArgs=void 0;const t=xo();let e=class extends t.CancellationEventArgsBase{};return ss.MeetingTranscriptionCanceledEventArgs=e,ss}var EC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentGradingSystem=void 0,function(e){e[e.FivePoint=1]="FivePoint",e[e.HundredMark=2]="HundredMark"}(t.PronunciationAssessmentGradingSystem||(t.PronunciationAssessmentGradingSystem={}))})(EC);var wC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentGranularity=void 0,function(e){e[e.Phoneme=1]="Phoneme",e[e.Word=2]="Word",e[e.FullText=3]="FullText"}(t.PronunciationAssessmentGranularity||(t.PronunciationAssessmentGranularity={}))})(wC);var os={},Xv;function GT(){if(Xv)return os;Xv=1,Object.defineProperty(os,"__esModule",{value:!0}),os.PronunciationAssessmentConfig=void 0;const t=z,e=I();let r=class IC{constructor(i,s=e.PronunciationAssessmentGradingSystem.FivePoint,a=e.PronunciationAssessmentGranularity.Phoneme,o=!1){t.Contracts.throwIfNullOrUndefined(i,"referenceText"),this.privProperties=new e.PropertyCollection,this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_ReferenceText,i),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_GradingSystem,e.PronunciationAssessmentGradingSystem[s]),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_Granularity,e.PronunciationAssessmentGranularity[a]),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,String(o))}static fromJSON(i){t.Contracts.throwIfNullOrUndefined(i,"json");const s=new IC("");return s.privProperties=new e.PropertyCollection,s.properties.setProperty(e.PropertyId.PronunciationAssessment_Json,i),s}toJSON(){return this.updateJson(),this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Params)}applyTo(i){this.updateJson();const s=i.internalData;s.expectContentAssessmentResponse=!!this.privContentAssessmentTopic,s.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(e.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,s.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(e.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(i){t.Contracts.throwIfNullOrWhitespace(i,"referenceText"),this.properties.setProperty(e.PropertyId.PronunciationAssessment_ReferenceText,i)}set phonemeAlphabet(i){t.Contracts.throwIfNullOrWhitespace(i,"phonemeAlphabet"),this.privPhonemeAlphabet=i}set enableMiscue(i){const s=i?"true":"false";this.properties.setProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,s)}get enableMiscue(){return this.properties.getProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()==="true"}set nbestPhonemeCount(i){this.privNBestPhonemeCount=i}set enableProsodyAssessment(i){this.privEnableProsodyAssessment=i}enableContentAssessmentWithTopic(i){this.privContentAssessmentTopic=i}get properties(){return this.privProperties}updateJson(){const i=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Json,"{}"),s=JSON.parse(i),a=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_ReferenceText);a&&(s.referenceText=a);const o=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_GradingSystem);o&&(s.gradingSystem=o);const c=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Granularity);c&&(s.granularity=c),this.privPhonemeAlphabet&&(s.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(s.nbestPhonemeCount=this.privNBestPhonemeCount),s.enableProsodyAssessment=this.privEnableProsodyAssessment,s.dimension="Comprehensive",this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_EnableMiscue)&&(s.enableMiscue=this.enableMiscue),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_Params,JSON.stringify(s))}};return os.PronunciationAssessmentConfig=r,os}var zr={},Zv;function QT(){if(Zv)return zr;Zv=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.PronunciationAssessmentResult=zr.ContentAssessmentResult=void 0;const t=z,e=I();class r{constructor(s){this.privPronJson=s}get grammarScore(){return this.privPronJson.ContentAssessment.GrammarScore}get vocabularyScore(){return this.privPronJson.ContentAssessment.VocabularyScore}get topicScore(){return this.privPronJson.ContentAssessment.TopicScore}}zr.ContentAssessmentResult=r;let n=class TC{constructor(s){const a=JSON.parse(s);t.Contracts.throwIfNullOrUndefined(a.NBest[0],"NBest"),this.privPronJson=a.NBest[0]}static fromResult(s){t.Contracts.throwIfNullOrUndefined(s,"result");const a=s.properties.getProperty(e.PropertyId.SpeechServiceResponse_JsonResult);return t.Contracts.throwIfNullOrUndefined(a,"json"),new TC(a)}get detailResult(){return this.privPronJson}get accuracyScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.AccuracyScore}get pronunciationScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.PronScore}get completenessScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.CompletenessScore}get fluencyScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.FluencyScore}get prosodyScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.ProsodyScore}get contentAssessmentResult(){if(this.detailResult.ContentAssessment!==void 0)return new r(this.detailResult)}};return zr.PronunciationAssessmentResult=n,zr}var as={},eg;function YT(){if(eg)return as;eg=1,Object.defineProperty(as,"__esModule",{value:!0}),as.AvatarConfig=void 0;const t=z,e=I();let r=class{constructor(i,s,a){this.privCustomized=!1,t.Contracts.throwIfNullOrWhitespace(i,"character"),this.character=i,this.style=s,a===void 0&&(a=new e.AvatarVideoFormat),this.videoFormat=a}get customized(){return this.privCustomized}set customized(i){this.privCustomized=i}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(i){this.privBackgroundColor=i}get backgroundImage(){return this.privBackgroundImage}set backgroundImage(i){this.privBackgroundImage=i}get remoteIceServers(){return this.privRemoteIceServers}set remoteIceServers(i){this.privRemoteIceServers=i}};return as.AvatarConfig=r,as}var _C={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarEventArgs=t.AvatarEventTypes=void 0,function(r){r.SwitchedToSpeaking="SwitchedToSpeaking",r.SwitchedToIdle="SwitchedToIdle",r.SessionClosed="SessionClosed"}(t.AvatarEventTypes||(t.AvatarEventTypes={}));class e{constructor(n,i){this.privOffset=n,this.privDescription=i}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}t.AvatarEventArgs=e})(_C);var cs={},us={},tg;function AC(){if(tg)return us;tg=1,Object.defineProperty(us,"__esModule",{value:!0}),us.SpeechSynthesisConnectionFactory=void 0;const t=fe(),e=I(),r=yt(),n=k(),i=he,s=St;let a=class{constructor(){this.synthesisUri="/cognitiveservices/websocket/v1"}create(c,u,l){let p=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);const d=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,void 0),h=r.ConnectionFactoryBase.getHostSuffix(d),f=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),m=f===void 0?"tts":"voice",y=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+d+"."+m+".speech"+h),v={},g={};u.token!==void 0&&u.token!==""&&(g[u.headerName]=u.token),g[i.HeaderNames.ConnectionId]=l,f!==void 0&&f!==""&&(!p||p.search(s.QueryParameterNames.CustomVoiceDeploymentId)===-1)&&(v[s.QueryParameterNames.CustomVoiceDeploymentId]=f),c.avatarEnabled&&(!p||p.search(s.QueryParameterNames.EnableAvatar)===-1)&&(v[s.QueryParameterNames.EnableAvatar]="true"),p||(p=y+this.synthesisUri),c.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,p);const S=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(p,v,g,new n.WebsocketMessageFormatter,t.ProxyInfo.fromParameters(c.parameters),S,l)}};return us.SpeechSynthesisConnectionFactory=a,us}var rg;function XT(){if(rg)return cs;rg=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.AvatarSynthesizer=void 0;const t=AC(),e=k(),r=M(),n=Er,i=I(),s=z,a=jd();let o=class extends i.Synthesizer{constructor(u,l){super(u),s.Contracts.throwIfNullOrUndefined(l,"avatarConfig"),this.privConnectionFactory=new t.SpeechSynthesisConnectionFactory,this.privAvatarConfig=l,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(i.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}async startAvatarAsync(u){s.Contracts.throwIfNullOrUndefined(u,"peerConnection"),this.privIceServers=u.getConfiguration().iceServers,s.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");const l=new r.Deferred;u.onicegatheringstatechange=()=>{r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering state: "+u.iceGatheringState,r.EventType.Debug)),u.iceGatheringState==="complete"&&(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering complete.",r.EventType.Info)),l.resolve())},u.onicecandidate=m=>{m.candidate?r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice candidate: "+m.candidate.candidate,r.EventType.Debug)):(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice candidate: complete",r.EventType.Debug)),l.resolve())},setTimeout(()=>{u.iceGatheringState!=="complete"&&(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering timeout.",r.EventType.Warning)),l.resolve())},2e3);const p=await u.createOffer();await u.setLocalDescription(p),await l.promise,r.Events.instance.onEvent(new r.PlatformEvent("peer connection: got local SDP.",r.EventType.Info)),this.privProperties.setProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(u.localDescription));const d=await this.speak("",!1);if(d.reason!==i.ResultReason.SynthesizingAudioCompleted)return new i.SynthesisResult(d.resultId,d.reason,d.errorDetails,d.properties);const h=atob(d.properties.getProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP)),f=new RTCSessionDescription(JSON.parse(h));return await u.setRemoteDescription(f),new i.SynthesisResult(d.resultId,d.reason,void 0,d.properties)}async speakTextAsync(u){const l=await this.speak(u,!1);return new i.SynthesisResult(l.resultId,l.reason,l.errorDetails,l.properties)}async speakSsmlAsync(u){const l=await this.speak(u,!0);return new i.SynthesisResult(l.resultId,l.reason,l.errorDetails,l.properties)}async stopSpeakingAsync(){for(;this.synthesisRequestQueue.length()>0;)(await this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()}async stopAvatarAsync(){return s.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)}async close(){if(!this.privDisposed)return this.dispose(!0)}get iceServers(){return this.privIceServers}createSynthesisAdapter(u,l,p){return new e.AvatarSynthesisAdapter(u,l,p,this,this.privAvatarConfig)}createRestSynthesisAdapter(u,l){}createSynthesizerConfig(u){const l=super.createSynthesizerConfig(u);return l.avatarEnabled=!0,l}async speak(u,l){const p=r.createNoDashGuid(),d=new r.Deferred;return this.synthesisRequestQueue.enqueue(new a.SynthesisRequest(p,u,l,h=>{d.resolve(h),this.privSynthesizing=!1,this.adapterSpeak()},h=>{d.reject(h),this.privSynthesizing=!1})),this.adapterSpeak(),d.promise}};return cs.AvatarSynthesizer=o,cs}var xn={};Object.defineProperty(xn,"__esModule",{value:!0});xn.AvatarVideoFormat=xn.Coordinate=void 0;class ZT{constructor(e,r){this.x=e,this.y=r}}xn.Coordinate=ZT;class e_{constructor(e="H264",r=2e6,n=1920,i=1080){this.codec=e,this.bitrate=r,this.width=n,this.height=i}setCropRange(e,r){this.cropRange={bottomRight:r,topLeft:e}}}xn.AvatarVideoFormat=e_;var ls={},ng;function t_(){if(ng)return ls;ng=1,Object.defineProperty(ls,"__esModule",{value:!0}),ls.AvatarWebRTCConnectionResult=void 0;const t=I();let e=class extends t.SynthesisResult{constructor(n,i,s,a,o){super(i,s,a,o),this.privSDPAnswer=n}get SDPAnswer(){return this.privSDPAnswer}};return ls.AvatarWebRTCConnectionResult=e,ls}var ps={},ig;function r_(){if(ig)return ps;ig=1,Object.defineProperty(ps,"__esModule",{value:!0}),ps.Diagnostics=void 0;const t=fe(),e=M();let r=class{static SetLoggingLevel(i){this.privListener=new t.ConsoleLoggingListener(i),e.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(i){if(typeof window>"u")this.privListener&&(this.privListener.logPath=i);else throw new Error("File system logging not available in browser.")}static set onLogOutput(i){this.privListener&&(this.privListener.logCallback=i)}};return ps.Diagnostics=r,r.privListener=void 0,ps}var sg;function I(){return sg||(sg=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Hy();Object.defineProperty(t,"AudioConfig",{enumerable:!0,get:function(){return e.AudioConfig}});var r=Rr;Object.defineProperty(t,"AudioStreamFormat",{enumerable:!0,get:function(){return r.AudioStreamFormat}}),Object.defineProperty(t,"AudioFormatTag",{enumerable:!0,get:function(){return r.AudioFormatTag}});var n=qy();Object.defineProperty(t,"AudioInputStream",{enumerable:!0,get:function(){return n.AudioInputStream}}),Object.defineProperty(t,"PullAudioInputStream",{enumerable:!0,get:function(){return n.PullAudioInputStream}}),Object.defineProperty(t,"PushAudioInputStream",{enumerable:!0,get:function(){return n.PushAudioInputStream}});var i=me;Object.defineProperty(t,"AudioOutputStream",{enumerable:!0,get:function(){return i.AudioOutputStream}}),Object.defineProperty(t,"PullAudioOutputStream",{enumerable:!0,get:function(){return i.PullAudioOutputStream}}),Object.defineProperty(t,"PushAudioOutputStream",{enumerable:!0,get:function(){return i.PushAudioOutputStream}});var s=Ky;Object.defineProperty(t,"CancellationReason",{enumerable:!0,get:function(){return s.CancellationReason}});var a=Vc;Object.defineProperty(t,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return a.PullAudioInputStreamCallback}});var o=Wc;Object.defineProperty(t,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return o.PushAudioOutputStreamCallback}});var c=Hc;Object.defineProperty(t,"KeywordRecognitionModel",{enumerable:!0,get:function(){return c.KeywordRecognitionModel}});var u=Kc;Object.defineProperty(t,"SessionEventArgs",{enumerable:!0,get:function(){return u.SessionEventArgs}});var l=M0();Object.defineProperty(t,"RecognitionEventArgs",{enumerable:!0,get:function(){return l.RecognitionEventArgs}});var p=Jy;Object.defineProperty(t,"OutputFormat",{enumerable:!0,get:function(){return p.OutputFormat}});var d=b0();Object.defineProperty(t,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return d.IntentRecognitionEventArgs}});var h=Jc;Object.defineProperty(t,"RecognitionResult",{enumerable:!0,get:function(){return h.RecognitionResult}});var f=N0();Object.defineProperty(t,"SpeechRecognitionResult",{enumerable:!0,get:function(){return f.SpeechRecognitionResult}});var m=z0();Object.defineProperty(t,"IntentRecognitionResult",{enumerable:!0,get:function(){return m.IntentRecognitionResult}});var y=jn;Object.defineProperty(t,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return y.LanguageUnderstandingModel}});var v=L0();Object.defineProperty(t,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return v.SpeechRecognitionEventArgs}}),Object.defineProperty(t,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return v.ConversationTranscriptionEventArgs}}),Object.defineProperty(t,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return v.MeetingTranscriptionEventArgs}});var g=j0();Object.defineProperty(t,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return g.SpeechRecognitionCanceledEventArgs}});var S=x0();Object.defineProperty(t,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return S.TranslationRecognitionEventArgs}});var C=B0();Object.defineProperty(t,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return C.TranslationSynthesisEventArgs}});var P=Yy();Object.defineProperty(t,"TranslationRecognitionResult",{enumerable:!0,get:function(){return P.TranslationRecognitionResult}});var R=Gc;Object.defineProperty(t,"TranslationSynthesisResult",{enumerable:!0,get:function(){return R.TranslationSynthesisResult}});var w=Xy;Object.defineProperty(t,"ResultReason",{enumerable:!0,get:function(){return w.ResultReason}});var E=q0();Object.defineProperty(t,"SpeechConfig",{enumerable:!0,get:function(){return E.SpeechConfig}}),Object.defineProperty(t,"SpeechConfigImpl",{enumerable:!0,get:function(){return E.SpeechConfigImpl}});var N=U0();Object.defineProperty(t,"SpeechTranslationConfig",{enumerable:!0,get:function(){return N.SpeechTranslationConfig}}),Object.defineProperty(t,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return N.SpeechTranslationConfigImpl}});var O=eC();Object.defineProperty(t,"PropertyCollection",{enumerable:!0,get:function(){return O.PropertyCollection}});var W=Qc;Object.defineProperty(t,"PropertyId",{enumerable:!0,get:function(){return W.PropertyId}});var ct=$0();Object.defineProperty(t,"Recognizer",{enumerable:!0,get:function(){return ct.Recognizer}});var ie=V0();Object.defineProperty(t,"SpeechRecognizer",{enumerable:!0,get:function(){return ie.SpeechRecognizer}});var ut=W0();Object.defineProperty(t,"IntentRecognizer",{enumerable:!0,get:function(){return ut.IntentRecognizer}});var At=nC;Object.defineProperty(t,"VoiceProfileType",{enumerable:!0,get:function(){return At.VoiceProfileType}});var Ct=H0();Object.defineProperty(t,"TranslationRecognizer",{enumerable:!0,get:function(){return Ct.TranslationRecognizer}});var Jt=K0();Object.defineProperty(t,"Translations",{enumerable:!0,get:function(){return Jt.Translations}});var _=aC;Object.defineProperty(t,"NoMatchReason",{enumerable:!0,get:function(){return _.NoMatchReason}});var b=J0();Object.defineProperty(t,"NoMatchDetails",{enumerable:!0,get:function(){return b.NoMatchDetails}});var L=Yc;Object.defineProperty(t,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return L.TranslationRecognitionCanceledEventArgs}});var K=Q0();Object.defineProperty(t,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return K.IntentRecognitionCanceledEventArgs}});var oe=Bo;Object.defineProperty(t,"CancellationDetailsBase",{enumerable:!0,get:function(){return oe.CancellationDetailsBase}});var sn=X0();Object.defineProperty(t,"CancellationDetails",{enumerable:!0,get:function(){return sn.CancellationDetails}});var kt=lC;Object.defineProperty(t,"CancellationErrorCode",{enumerable:!0,get:function(){return kt.CancellationErrorCode}});var Jn=Z0();Object.defineProperty(t,"ConnectionEventArgs",{enumerable:!0,get:function(){return Jn.ConnectionEventArgs}});var Ot=eT();Object.defineProperty(t,"ServiceEventArgs",{enumerable:!0,get:function(){return Ot.ServiceEventArgs}});var on=sC();Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return on.Connection}});var qC=Xc;Object.defineProperty(t,"PhraseListGrammar",{enumerable:!0,get:function(){return qC.PhraseListGrammar}});var UC=bd();Object.defineProperty(t,"DialogServiceConfig",{enumerable:!0,get:function(){return UC.DialogServiceConfig}});var $C=tT();Object.defineProperty(t,"BotFrameworkConfig",{enumerable:!0,get:function(){return $C.BotFrameworkConfig}});var VC=rT();Object.defineProperty(t,"CustomCommandsConfig",{enumerable:!0,get:function(){return VC.CustomCommandsConfig}});var WC=iT();Object.defineProperty(t,"DialogServiceConnector",{enumerable:!0,get:function(){return WC.DialogServiceConnector}});var HC=Zc;Object.defineProperty(t,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return HC.ActivityReceivedEventArgs}});var KC=eu;Object.defineProperty(t,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return KC.TurnStatusReceivedEventArgs}});var JC=pC;Object.defineProperty(t,"ServicePropertyChannel",{enumerable:!0,get:function(){return JC.ServicePropertyChannel}});var GC=dC;Object.defineProperty(t,"ProfanityOption",{enumerable:!0,get:function(){return GC.ProfanityOption}});var QC=cT();Object.defineProperty(t,"BaseAudioPlayer",{enumerable:!0,get:function(){return QC.BaseAudioPlayer}});var YC=ru;Object.defineProperty(t,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return YC.ConnectionMessageEventArgs}});var XC=iC();Object.defineProperty(t,"ConnectionMessage",{enumerable:!0,get:function(){return XC.ConnectionMessage}});var ZC=nu;Object.defineProperty(t,"VoiceProfile",{enumerable:!0,get:function(){return ZC.VoiceProfile}});var Yd=pT();Object.defineProperty(t,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return Yd.VoiceProfileEnrollmentResult}}),Object.defineProperty(t,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return Yd.VoiceProfileEnrollmentCancellationDetails}});var Xd=dT();Object.defineProperty(t,"VoiceProfileResult",{enumerable:!0,get:function(){return Xd.VoiceProfileResult}}),Object.defineProperty(t,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return Xd.VoiceProfileCancellationDetails}});var eP=hT();Object.defineProperty(t,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return eP.VoiceProfilePhraseResult}});var tP=fT();Object.defineProperty(t,"VoiceProfileClient",{enumerable:!0,get:function(){return tP.VoiceProfileClient}});var rP=vT();Object.defineProperty(t,"SpeakerRecognizer",{enumerable:!0,get:function(){return rP.SpeakerRecognizer}});var nP=gT();Object.defineProperty(t,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return nP.SpeakerIdentificationModel}});var iP=mT();Object.defineProperty(t,"SpeakerVerificationModel",{enumerable:!0,get:function(){return iP.SpeakerVerificationModel}});var sP=ST();Object.defineProperty(t,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return sP.AutoDetectSourceLanguageConfig}});var oP=iu;Object.defineProperty(t,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return oP.AutoDetectSourceLanguageResult}});var aP=su;Object.defineProperty(t,"SourceLanguageConfig",{enumerable:!0,get:function(){return aP.SourceLanguageConfig}});var bu=CT();Object.defineProperty(t,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return bu.SpeakerRecognitionResult}}),Object.defineProperty(t,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return bu.SpeakerRecognitionResultType}}),Object.defineProperty(t,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return bu.SpeakerRecognitionCancellationDetails}});var Be=Ld();Object.defineProperty(t,"Conversation",{enumerable:!0,get:function(){return Be.Conversation}}),Object.defineProperty(t,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return Be.ConversationExpirationEventArgs}}),Object.defineProperty(t,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return Be.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(t,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return Be.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(t,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return Be.ConversationTranslationEventArgs}}),Object.defineProperty(t,"ConversationTranslationResult",{enumerable:!0,get:function(){return Be.ConversationTranslationResult}}),Object.defineProperty(t,"ConversationTranslator",{enumerable:!0,get:function(){return Be.ConversationTranslator}}),Object.defineProperty(t,"ConversationTranscriber",{enumerable:!0,get:function(){return Be.ConversationTranscriber}}),Object.defineProperty(t,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return Be.ConversationTranscriptionResult}}),Object.defineProperty(t,"Meeting",{enumerable:!0,get:function(){return Be.Meeting}}),Object.defineProperty(t,"MeetingTranscriber",{enumerable:!0,get:function(){return Be.MeetingTranscriber}}),Object.defineProperty(t,"Participant",{enumerable:!0,get:function(){return Be.Participant}}),Object.defineProperty(t,"ParticipantChangedReason",{enumerable:!0,get:function(){return Be.ParticipantChangedReason}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return Be.User}});var cP=jd();Object.defineProperty(t,"Synthesizer",{enumerable:!0,get:function(){return cP.Synthesizer}});var uP=Ad;Object.defineProperty(t,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return uP.SpeechSynthesisOutputFormat}});var lP=LT();Object.defineProperty(t,"SpeechSynthesizer",{enumerable:!0,get:function(){return lP.SpeechSynthesizer}});var pP=au;Object.defineProperty(t,"SynthesisResult",{enumerable:!0,get:function(){return pP.SynthesisResult}});var dP=xT();Object.defineProperty(t,"SpeechSynthesisResult",{enumerable:!0,get:function(){return dP.SpeechSynthesisResult}});var hP=cu;Object.defineProperty(t,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return hP.SpeechSynthesisEventArgs}});var fP=uu;Object.defineProperty(t,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return fP.SpeechSynthesisWordBoundaryEventArgs}});var vP=lu;Object.defineProperty(t,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return vP.SpeechSynthesisBookmarkEventArgs}});var gP=pu;Object.defineProperty(t,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return gP.SpeechSynthesisVisemeEventArgs}});var mP=PC;Object.defineProperty(t,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return mP.SpeechSynthesisBoundaryType}});var SP=$T();Object.defineProperty(t,"SynthesisVoicesResult",{enumerable:!0,get:function(){return SP.SynthesisVoicesResult}});var yP=RC;Object.defineProperty(t,"VoiceInfo",{enumerable:!0,get:function(){return yP.VoiceInfo}});var CP=du;Object.defineProperty(t,"SpeakerAudioDestination",{enumerable:!0,get:function(){return CP.SpeakerAudioDestination}});var PP=KT();Object.defineProperty(t,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return PP.ConversationTranscriptionCanceledEventArgs}});var RP=JT();Object.defineProperty(t,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return RP.MeetingTranscriptionCanceledEventArgs}});var EP=EC;Object.defineProperty(t,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return EP.PronunciationAssessmentGradingSystem}});var wP=wC;Object.defineProperty(t,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return wP.PronunciationAssessmentGranularity}});var IP=GT();Object.defineProperty(t,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return IP.PronunciationAssessmentConfig}});var TP=QT();Object.defineProperty(t,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return TP.PronunciationAssessmentResult}});var _P=Nd;Object.defineProperty(t,"LanguageIdMode",{enumerable:!0,get:function(){return _P.LanguageIdMode}});var AP=YT();Object.defineProperty(t,"AvatarConfig",{enumerable:!0,get:function(){return AP.AvatarConfig}});var kP=_C;Object.defineProperty(t,"AvatarEventArgs",{enumerable:!0,get:function(){return kP.AvatarEventArgs}});var OP=XT();Object.defineProperty(t,"AvatarSynthesizer",{enumerable:!0,get:function(){return OP.AvatarSynthesizer}});var Zd=xn;Object.defineProperty(t,"AvatarVideoFormat",{enumerable:!0,get:function(){return Zd.AvatarVideoFormat}}),Object.defineProperty(t,"Coordinate",{enumerable:!0,get:function(){return Zd.Coordinate}});var MP=t_();Object.defineProperty(t,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return MP.AvatarWebRTCConnectionResult}});var bP=r_();Object.defineProperty(t,"Diagnostics",{enumerable:!0,get:function(){return bP.Diagnostics}});var DP=Td;Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return DP.LogLevel}})}(Sl)),Sl}var og;function n_(){if(og)return li;og=1,Object.defineProperty(li,"__esModule",{value:!0}),li.ProxyInfo=void 0;const t=I();let e=class kC{constructor(n,i,s,a){this.privProxyHostName=n,this.privProxyPort=i,this.privProxyUserName=s,this.privProxyPassword=a}static fromParameters(n){return new kC(n.getProperty(t.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(n.getProperty(t.PropertyId.SpeechServiceConnection_ProxyPort),10),n.getProperty(t.PropertyId.SpeechServiceConnection_ProxyUserName),n.getProperty(t.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(n){return this.fromParameters(n.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}};return li.ProxyInfo=e,li}var OC={};const i_=new Set(["json","buffer","string"]);var s_=t=>(...e)=>{const r=new Set;let n,i,s,a="";return e.forEach(o=>{if(typeof o=="string")if(o.toUpperCase()===o)if(n){const c=`Can't set method to ${o}, already set to ${n}.`;throw new Error(c)}else n=o;else if(o.startsWith("http:")||o.startsWith("https:"))a=o;else if(i_.has(o))i=o;else throw new Error(`Unknown encoding, ${o}`);else if(typeof o=="number")r.add(o);else if(typeof o=="object")if(Array.isArray(o)||o instanceof Set)o.forEach(c=>r.add(c));else{if(s)throw new Error("Cannot set headers twice.");s=o}else throw new Error(`Unknown type: ${typeof o}`)}),n||(n="GET"),r.size===0&&r.add(200),t(r,n,i,s,a)};const o_=s_;class xd extends Error{constructor(e,...r){super(...r),Error.captureStackTrace&&Error.captureStackTrace(this,xd),this.name="StatusError",this.message=e.statusMessage,this.statusCode=e.status,this.res=e,this.json=e.json.bind(e),this.text=e.text.bind(e),this.arrayBuffer=e.arrayBuffer.bind(e);let n;Object.defineProperty(this,"responseBody",{get:()=>(n||(n=this.arrayBuffer()),n)}),this.headers={};for(const[s,a]of e.headers.entries())this.headers[s.toLowerCase()]=a}}const a_=(t,e,r,n,i)=>async(s,a,o={})=>{s=i+(s||"");let c=new URL(s);if(n||(n={}),c.username&&(n.Authorization="Basic "+btoa(c.username+":"+c.password),c=new URL(c.protocol+"//"+c.host+c.pathname+c.search)),c.protocol!=="https:"&&c.protocol!=="http:")throw new Error(`Unknown protocol, ${c.protocol}`);if(a&&!(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||typeof a=="string"))if(typeof a=="object")a=JSON.stringify(a),n["Content-Type"]="application/json";else throw new Error("Unknown body type.");o=new Headers({...n||{},...o});const u=await fetch(c,{method:e,headers:o,body:a});if(u.statusCode=u.status,!t.has(u.status))throw new xd(u);return r==="json"?u.json():r==="buffer"?u.arrayBuffer():r==="string"?u.text():u};var c_=o_(a_);(function(t){var e=q&&q.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(t,"__esModule",{value:!0}),t.RestMessageAdapter=t.RestRequestType=void 0;const r=e(c_),n=M();var i;(function(a){a.Get="GET",a.Post="POST",a.Delete="DELETE",a.File="file"})(i=t.RestRequestType||(t.RestRequestType={}));class s{constructor(o){if(!o)throw new n.ArgumentNullError("configParams");this.privHeaders=o.headers,this.privIgnoreCache=o.ignoreCache}static extractHeaderValue(o,c){let u="";try{const l=c.trim().split(/[\r\n]+/),p={};l.forEach(d=>{const h=d.split(": "),f=h.shift().toLowerCase(),m=h.join(": ");p[f]=m}),u=p[o.toLowerCase()]}catch{}return u}set options(o){this.privHeaders=o.headers,this.privIgnoreCache=o.ignoreCache}setHeaders(o,c){this.privHeaders[o]=c}request(o,c,u={},l=null){const p=new n.Deferred,d=o===i.File?"POST":o,h=(m,y={})=>{const v=m;return{data:JSON.stringify(y),headers:JSON.stringify(m.headers),json:y,ok:m.statusCode>=200&&m.statusCode<300,status:m.statusCode,statusText:y.error?y.error.message:v.statusText?v.statusText:v.statusMessage}},f=m=>{const y=r.default(c,d,this.privHeaders,200,201,202,204,400,401,402,403,404),v=this.queryParams(u)===""?"":`?${this.queryParams(u)}`;y(v,m).then(async g=>{if(o===i.Delete||g.statusCode===204)p.resolve(h(g));else try{const S=await g.json();p.resolve(h(g,S))}catch{p.resolve(h(g))}}).catch(g=>{p.reject(g)})};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),o===i.Post&&l&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),f(l),p.promise}queryParams(o={}){return Object.keys(o).map(c=>encodeURIComponent(c)+"="+encodeURIComponent(o[c])).join("&")}}t.RestMessageAdapter=s})(OC);var qo={};Object.defineProperty(qo,"__esModule",{value:!0});qo.RestConfigBase=void 0;class hr{static get requestOptions(){return hr.privDefaultRequestOptions}static get configParams(){return hr.privDefaultParams}static get restErrors(){return hr.privRestErrors}}qo.RestConfigBase=hr;hr.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4};hr.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."};hr.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"};var ag;function fe(){return ag||(ag=1,function(t){var e=q&&q.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s),Object.defineProperty(n,a,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),r=q&&q.__exportStar||function(n,i){for(var s in n)s!=="default"&&!i.hasOwnProperty(s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Fc,t),r(By,t),r(s0(),t),r(o0(),t),r(qc,t),r(Uc,t),r(Lo,t),r($c,t),r(n_(),t),r(OC,t),r(qo,t)}(vl)),vl}var cg;function u_(){if(cg)return ai;cg=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.IntentConnectionFactory=void 0;const t=fe(),e=I(),r=yt(),n=k(),i=he;let s=class extends r.ConnectionFactoryBase{create(o,c,u){let l=o.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint);if(!l){const f=o.parameters.getProperty(e.PropertyId.SpeechServiceConnection_IntentRegion),m=r.ConnectionFactoryBase.getHostSuffix(f);l=o.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+f+".sr.speech"+m)+"/speech/recognition/interactive/cognitiveservices/v1"}const p={format:"simple",language:o.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(o,p,l);const d={};c.token!==void 0&&c.token!==""&&(d[c.headerName]=c.token),d[i.HeaderNames.ConnectionId]=u,o.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,l);const h=o.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(l,p,d,new n.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(o),h,u)}getSpeechRegionFromIntentRegion(o){switch(o){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return o}}};return ai.IntentConnectionFactory=s,ai}var Lr={},ug;function l_(){if(ug)return Lr;ug=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.VoiceProfileConnectionFactory=Lr.SpeakerRecognitionConnectionFactory=void 0;const t=fe(),e=I(),r=yt(),n=k(),i=he;class s extends r.ConnectionFactoryBase{create(u,l,p,d){let h=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint);if(!h){const v=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region),g=r.ConnectionFactoryBase.getHostSuffix(v),S=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,`wss://${v}.spr-frontend.speech${g}`),C=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");h=`${S}/speaker/ws/${this.scenarioToPath(C)}/${p}`}const f={format:"simple",language:u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(u,f,h);const m={};l.token!==void 0&&l.token!==""&&(m[l.headerName]=l.token),m[i.HeaderNames.ConnectionId]=d,m[i.HeaderNames.SpIDAuthKey]=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Key),u.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,h);const y=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(h,f,m,new n.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),y,d)}scenarioToPath(u){switch(u){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}}let a=class extends s{create(u,l,p){return super.create(u,l,"recognition",p)}};Lr.SpeakerRecognitionConnectionFactory=a;class o extends s{create(u,l,p){return super.create(u,l,"profile",p)}}return Lr.VoiceProfileConnectionFactory=o,Lr}var hu={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionEndedEvent=t.RecognitionCompletionStatus=t.RecognitionStartedEvent=t.ConnectingToServiceEvent=t.ListeningStartedEvent=t.RecognitionTriggeredEvent=t.SpeechRecognitionEvent=void 0;const e=M();class r extends e.PlatformEvent{constructor(l,p,d,h=e.EventType.Info){super(l,h),this.privRequestId=p,this.privSessionId=d}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}t.SpeechRecognitionEvent=r;class n extends r{constructor(l,p,d,h){super("RecognitionTriggeredEvent",l,p),this.privAudioSourceId=d,this.privAudioNodeId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}t.RecognitionTriggeredEvent=n;class i extends r{constructor(l,p,d,h){super("ListeningStartedEvent",l,p),this.privAudioSourceId=d,this.privAudioNodeId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}t.ListeningStartedEvent=i;class s extends r{constructor(l,p,d){super("ConnectingToServiceEvent",l,d),this.privAuthFetchEventid=p}get authFetchEventid(){return this.privAuthFetchEventid}}t.ConnectingToServiceEvent=s;class a extends r{constructor(l,p,d,h,f){super("RecognitionStartedEvent",l,f),this.privAudioSourceId=p,this.privAudioNodeId=d,this.privAuthFetchEventId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}}t.RecognitionStartedEvent=a;var o;(function(u){u[u.Success=0]="Success",u[u.AudioSourceError=1]="AudioSourceError",u[u.AudioSourceTimeout=2]="AudioSourceTimeout",u[u.AuthTokenFetchError=3]="AuthTokenFetchError",u[u.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",u[u.UnAuthorized=5]="UnAuthorized",u[u.ConnectTimeout=6]="ConnectTimeout",u[u.ConnectError=7]="ConnectError",u[u.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",u[u.UnknownError=9]="UnknownError"})(o=t.RecognitionCompletionStatus||(t.RecognitionCompletionStatus={}));class c extends r{constructor(l,p,d,h,f,m,y,v){super("RecognitionEndedEvent",l,f,y===o.Success?e.EventType.Info:e.EventType.Error),this.privAudioSourceId=p,this.privAudioNodeId=d,this.privAuthFetchEventId=h,this.privStatus=y,this.privError=v,this.privServiceTag=m}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}t.RecognitionEndedEvent=c})(hu);var ds={},Kt={};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.SpeechConnectionMessage=void 0;const El=M(),Dt=he;class Bd extends El.ConnectionMessage{constructor(e,r,n,i,s,a,o,c){if(!r)throw new El.ArgumentNullError("path");if(!n)throw new El.ArgumentNullError("requestId");const u={};if(u[Dt.HeaderNames.Path]=r,u[Dt.HeaderNames.RequestId]=n,u[Dt.HeaderNames.RequestTimestamp]=new Date().toISOString(),i&&(u[Dt.HeaderNames.ContentType]=i),a&&(u[Dt.HeaderNames.RequestStreamId]=a),o)for(const l in o)l&&(u[l]=o[l]);c?super(e,s,u,c):super(e,s,u),this.privPath=r,this.privRequestId=n,this.privContentType=i,this.privStreamId=a,this.privAdditionalHeaders=o}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(e){let r=null,n=null,i=null,s=null;const a={};if(e.headers)for(const o in e.headers)o&&(o.toLowerCase()===Dt.HeaderNames.Path.toLowerCase()?r=e.headers[o]:o.toLowerCase()===Dt.HeaderNames.RequestId.toLowerCase()?n=e.headers[o]:o.toLowerCase()===Dt.HeaderNames.ContentType.toLowerCase()?i=e.headers[o]:o.toLowerCase()===Dt.HeaderNames.RequestStreamId.toLowerCase()?s=e.headers[o]:a[o]=e.headers[o]);return new Bd(e.messageType,r,n,i,e.body,s,a,e.id)}}Kt.SpeechConnectionMessage=Bd;var lg;function p_(){if(lg)return ds;lg=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.ServiceRecognizerBase=void 0;const t=fe(),e=M(),r=I(),n=k(),i=Kt;let s=class Hs{constructor(o,c,u,l,p){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!o)throw new e.ArgumentNullError("authentication");if(!c)throw new e.ArgumentNullError("connectionFactory");if(!u)throw new e.ArgumentNullError("audioSource");if(!l)throw new e.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=l.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=o,this.privConnectionFactory=c,this.privAudioSource=u,this.privRecognizerConfig=l,this.privIsDisposed=!1,this.privRecognizer=p,this.privRequestSession=new n.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new e.EventSource,this.privServiceEvents=new e.EventSource,this.privDynamicGrammar=new n.DynamicGrammarBuilder,this.privSpeechContext=new n.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new n.AgentConfig,this.privRecognizerConfig.parameters.getProperty(r.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?this.privSetTimeout=e.Timeout.setTimeout:(typeof window<"u"&&(this.privSetTimeout=window.setTimeout.bind(window)),typeof globalThis<"u"&&(this.privSetTimeout=globalThis.setTimeout.bind(globalThis))),this.connectionEvents.attach(h=>{if(h.name==="ConnectionClosedEvent"){const f=h;(f.statusCode===1003||f.statusCode===1007||f.statusCode===1002||f.statusCode===4e3||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(r.CancellationReason.Error,f.statusCode===1007?r.CancellationErrorCode.BadRequestParameters:r.CancellationErrorCode.ConnectionFailure,`${f.reason} websocket error code: ${f.statusCode}`)}}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=e.createNoDashGuid()),this.setLanguageIdJson(),this.setOutputDetailLevelJson()}setTranslationJson(){const o=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(o!==void 0){const c=o.split(","),u=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),l=u!==void 0?"Synthesize":"None";if(this.privSpeechContext.setSection("translation",{onSuccess:{action:l},output:{interimResults:{mode:"Always"}},targetLanguages:c}),u!==void 0){const p={};for(const d of c)p[d]=u;this.privSpeechContext.setSection("synthesis",{defaultVoices:p})}}}setSpeechSegmentationTimeoutJson(){const o=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0);if(o!==void 0){const c=this.recognitionMode===n.RecognitionMode.Conversation?"CONVERSATION":this.recognitionMode===n.RecognitionMode.Dictation?"DICTATION":"INTERACTIVE",u=parseInt(o,10),l=this.privSpeechContext.getSection("phraseDetection");l.mode=c,l[c]={segmentation:{mode:"Custom",segmentationSilenceTimeoutMs:u}},this.privSpeechContext.setSection("phraseDetection",l)}}setLanguageIdJson(){const o=this.privSpeechContext.getSection("phraseDetection");if(this.privRecognizerConfig.autoDetectSourceLanguages!==void 0){const u=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");let l;this.privRecognizerConfig.languageIdMode==="Continuous"?l="DetectContinuous":l="DetectAtAudioStart",this.privSpeechContext.setSection("languageId",{Priority:"PrioritizeLatency",languages:u,mode:l,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}});const p=this.privRecognizerConfig.sourceLanguageModels;p!==void 0&&(o.customModels=p,o.onInterim={action:"None"},o.onSuccess={action:"None"})}this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0&&(o.onInterim={action:"Translate"},o.onSuccess={action:"Translate"},this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"None"},phraseResults:{resultType:"None"}})),this.privSpeechContext.setSection("phraseDetection",o)}setOutputDetailLevelJson(){this.privEnableSpeakerId&&(this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true"?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(n.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase()===r.OutputFormat[r.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(o){this.privRecognizerConfig.parameters.setProperty(r.PropertyId.ConversationTranslator_Token,o)}set voiceProfileType(o){this.privRecognizerConfig.parameters.setProperty(r.PropertyId.SpeechServiceConnection_SpeakerIdMode,o)}set authentication(o){this.privAuthentication=o}isDisposed(){return this.privIsDisposed}async dispose(o){if(this.privIsDisposed=!0,this.privConnectionConfigurationPromise!==void 0)try{await(await this.privConnectionConfigurationPromise).dispose(o)}catch{return}}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}async recognize(o,c,u){if(this.recognizeOverride!==void 0){await this.recognizeOverride(o,c,u);return}this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=o,this.setSpeechSegmentationTimeoutJson(),this.setTranslationJson(),this.privSuccessCallback=c,this.privErrorCallback=u,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const l=this.connectImpl();let p;try{const f=await this.audioSource.attach(this.privRequestSession.audioNodeId),m=await this.audioSource.format,y=await this.audioSource.deviceInfo;this.privIsLiveAudio=y.type&&y.type===n.type.Microphones,p=new t.ReplayableAudioNode(f,m.avgBytesPerSec),await this.privRequestSession.onAudioSourceAttachCompleted(p,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:y}}catch(f){throw await this.privRequestSession.onStopRecognizing(),f}try{await l}catch(f){await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,f);return}const d=new r.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,d),this.receiveMessage(),this.sendAudio(p).catch(async f=>{await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,f)})}async stopRecognizing(){if(this.privRequestSession.isRecognizing)try{await this.audioSource.turnOff(),await this.sendFinalAudio(),await this.privRequestSession.onStopRecognizing(),await this.privRequestSession.turnCompletionPromise}finally{await this.privRequestSession.dispose()}}async connect(){return await this.connectImpl(),Promise.resolve()}connectAsync(o,c){this.connectImpl().then(()=>{try{o&&o()}catch(u){c&&c(u)}},u=>{try{c&&c(u)}catch{}})}async disconnect(){if(await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.NoError,"Disconnecting"),this.disconnectOverride!==void 0&&await this.disconnectOverride(),this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose()}catch{}this.privConnectionPromise=void 0}sendMessage(o){}async sendNetworkMessage(o,c){const u=typeof c=="string"?e.MessageType.Text:e.MessageType.Binary,l=typeof c=="string"?"application/json":"";return(await this.fetchConnection()).send(new i.SpeechConnectionMessage(u,o,this.privRequestSession.requestId,l,c))}set activityTemplate(o){this.privActivityTemplate=o}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(o){this.privExpectContentAssessmentResponse=o}async sendTelemetryData(){const o=this.privRequestSession.getTelemetry();if(Hs.telemetryDataEnabled!==!0||this.privIsDisposed||o===null)return;if(Hs.telemetryData)try{Hs.telemetryData(o)}catch{}await(await this.fetchConnection()).send(new i.SpeechConnectionMessage(e.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",o))}async cancelRecognitionLocal(o,c,u){this.privRequestSession.isRecognizing&&(await this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,o,c,u))}async receiveMessage(){try{if(this.privIsDisposed)return;let o=await this.fetchConnection();const c=await o.read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(!c)return this.receiveMessage();this.privServiceHasSentMessage=!0;const u=i.SpeechConnectionMessage.fromConnectionMessage(c);if(u.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(u.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const l=n.SpeechDetected.fromJSON(u.textBody),p=new r.RecognitionEventArgs(l.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,p);break;case"speech.enddetected":let d;u.textBody.length>0?d=u.textBody:d="{ Offset: 0 }";const h=n.SpeechDetected.fromJSON(d),f=new r.RecognitionEventArgs(h.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,f);break;case"turn.end":await this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,await this.cancelRecognitionLocal(r.CancellationReason.EndOfStream,r.CancellationErrorCode.NoError,void 0));const m=new r.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing){this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,m);return}else o=await this.fetchConnection(),await this.sendPrePayloadJSON(o);break;default:await this.processTypeSpecificMessages(u)||this.privServiceEvents&&this.serviceEvents.onEvent(new e.ServiceEvent(u.path.toLowerCase(),u.textBody))}return this.receiveMessage()}catch{return null}}updateSpeakerDiarizationAudioOffset(){const o=this.privRequestSession.recognitionBytesSent,c=this.privAverageBytesPerMs!==0?o/this.privAverageBytesPerMs:0;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(c)}sendSpeechContext(o,c){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();const u=this.speechContext.toJSON();if(c&&this.privRequestSession.onSpeechContext(),u)return o.send(new i.SpeechConnectionMessage(e.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",u))}noOp(){}async sendPrePayloadJSON(o,c=!0){if(this.sendPrePayloadJSONOverride!==void 0)return this.sendPrePayloadJSONOverride(o);await this.sendSpeechContext(o,c),await this.sendWaveHeader(o)}async sendWaveHeader(o){const c=await this.audioSource.format;return o.send(new i.SpeechConnectionMessage(e.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",c.header))}connectImpl(){return this.privConnectionPromise!==void 0?this.privConnectionPromise.then(o=>o.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),this.postConnectImplOverride!==void 0?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(o,c,u){if(c.onSpeechContext(),Hs.telemetryDataEnabled!==!0){const p={context:{system:JSON.parse(u).context.system}};u=JSON.stringify(p)}if(this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()==="true"){const l=JSON.parse(u);l.context.DisableReferenceChannel="True",l.context.MicSpec="1_0_0",u=JSON.stringify(l)}if(u)return o.send(new i.SpeechConnectionMessage(e.MessageType.Text,"speech.config",c.requestId,"application/json",u))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(o=>o.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async sendAudio(o){const c=await this.audioSource.format;this.privAverageBytesPerMs=c.avgBytesPerSec/1e3;let u=Date.now();const l=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),p=c.avgBytesPerSec/1e3*parseInt(l,10),d=this.privRequestSession.recogNumber,h=async()=>{if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===d){const f=await this.fetchConnection(),m=await o.read();if(this.privRequestSession.isSpeechEnded)return;let y,v;if(!m||m.isEnd?(y=null,v=0):(y=m.buffer,this.privRequestSession.onAudioSent(y.byteLength),p>=this.privRequestSession.bytesSent?v=0:v=Math.max(0,u-Date.now())),v!==0&&await this.delay(v),y!==null&&(u=Date.now()+y.byteLength*1e3/(c.avgBytesPerSec*2)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===d)if(f.send(new i.SpeechConnectionMessage(e.MessageType.Binary,"audio",this.privRequestSession.requestId,null,y)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),m!=null&&m.isEnd)this.privIsLiveAudio||this.privRequestSession.onSpeechEnded();else return h()}};return h()}async retryableConnect(){let o=!1;this.privAuthFetchEventId=e.createNoDashGuid();const c=this.privRequestSession.sessionId;this.privConnectionId=c!==void 0?c:e.createNoDashGuid(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let u=0,l="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){const d=await(o?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId));await this.privRequestSession.onAuthCompleted(!1);const h=this.privConnectionFactory.create(this.privRecognizerConfig,d,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(h.events),h.events.attach(m=>{this.connectionEvents.onEvent(m)});const f=await h.open();if(f.statusCode===200)return await this.privRequestSession.onConnectionEstablishCompleted(f.statusCode),Promise.resolve(h);f.statusCode===1006&&(o=!0),u=f.statusCode,l=f.reason,this.privRequestSession.onRetryConnection()}return await this.privRequestSession.onConnectionEstablishCompleted(u,l),Promise.reject(`Unable to contact server. StatusCode: ${u}, ${this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${l}`)}delay(o){return new Promise(c=>this.privSetTimeout(c,o))}writeBufferToConsole(o){let c="Buffer Size: ";if(o===null)c+="null";else{const u=new Uint8Array(o);c+=`${o.byteLength}\r
`;for(let l=0;l<o.byteLength;l++)c+=u[l].toString(16).padStart(2,"0")+" ",(l+1)%16===0&&(console.info(c),c="")}console.info(c)}async sendFinalAudio(){await(await this.fetchConnection()).send(new i.SpeechConnectionMessage(e.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))}async configureConnection(){const o=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(o):(await this.sendSpeechServiceConfig(o,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendPrePayloadJSON(o,!1),o)}};return ds.ServiceRecognizerBase=s,s.telemetryDataEnabled=!0,ds}var hs={},pg;function d_(){if(pg)return hs;pg=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.ConversationServiceRecognizer=void 0;const t=I(),e=k();let r=class extends e.ServiceRecognizerBase{constructor(i,s,a,o,c){super(i,s,a,o,c),this.handleSpeechPhraseMessage=async u=>this.handleSpeechPhrase(u),this.handleSpeechHypothesisMessage=u=>this.handleSpeechHypothesis(u)}processTypeSpecificMessages(i){}handleRecognizedCallback(i,s,a){}handleRecognizingCallback(i,s,a){}async processSpeechMessages(i){let s=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(i.textBody),s=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&await this.handleSpeechPhraseMessage(i.textBody),s=!0;break}return s}cancelRecognition(i,s,a,o,c){}async handleSpeechPhrase(i){const s=e.SimpleSpeechPhrase.fromJSON(i),a=e.EnumTranslation.implTranslateRecognitionResult(s.RecognitionStatus);let o;const c=new t.PropertyCollection;c.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,i);const u=s.Offset+this.privRequestSession.currentTurnAudioOffset;let l=u;if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+s.Offset+s.Duration),t.ResultReason.Canceled===a){const p=e.EnumTranslation.implTranslateCancelResult(s.RecognitionStatus),d=e.EnumTranslation.implTranslateCancelErrorCode(s.RecognitionStatus);await this.cancelRecognitionLocal(p,d,e.EnumTranslation.implTranslateErrorDetails(d))}else if(!(this.privRequestSession.isSpeechEnded&&a===t.ResultReason.NoMatch&&s.RecognitionStatus!==e.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(e.OutputFormatPropertyName)===t.OutputFormat[t.OutputFormat.Simple])o=new t.SpeechRecognitionResult(this.privRequestSession.requestId,a,s.DisplayText,s.Duration,u,s.Language,s.LanguageDetectionConfidence,s.SpeakerId,void 0,i,c);else{const p=e.DetailedSpeechPhrase.fromJSON(i),d=p.Offset+this.privRequestSession.currentTurnAudioOffset,h=p.getJsonWithCorrectedOffsets(d);o=new t.SpeechRecognitionResult(this.privRequestSession.requestId,a,p.Text,p.Duration,d,p.Language,p.LanguageDetectionConfidence,p.SpeakerId,void 0,h,c),l=o.offset}this.handleRecognizedCallback(o,l,this.privRequestSession.sessionId)}}handleSpeechHypothesis(i){const s=e.SpeechHypothesis.fromJSON(i),a=s.Offset+this.privRequestSession.currentTurnAudioOffset,o=new t.PropertyCollection;o.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,i);const c=new t.SpeechRecognitionResult(this.privRequestSession.requestId,t.ResultReason.RecognizingSpeech,s.Text,s.Duration,a,s.Language,s.LanguageDetectionConfidence,s.SpeakerId,void 0,i,o);this.privRequestSession.onHypothesis(a),this.handleRecognizingCallback(c,s.Duration,this.privRequestSession.sessionId)}};return hs.ConversationServiceRecognizer=r,hs}var wl={},dg;function h_(){return dg||(dg=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RecognizerConfig=t.SpeechResultFormat=t.RecognitionMode=void 0;const e=I(),r=k();var n;(function(s){s[s.Interactive=0]="Interactive",s[s.Conversation=1]="Conversation",s[s.Dictation=2]="Dictation"})(n=t.RecognitionMode||(t.RecognitionMode={})),function(s){s[s.Simple=0]="Simple",s[s.Detailed=1]="Detailed"}(t.SpeechResultFormat||(t.SpeechResultFormat={}));class i{constructor(a,o){this.privSpeechServiceConfig=a||new r.SpeechServiceConfig(new r.Context(null)),this.privParameters=o,this.privMaxRetryCount=parseInt(o.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=o.getProperty(e.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(a){this.privRecognitionMode=a,this.privRecognitionActivityTimeout=a===n.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=n[a]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==n.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(e.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,void 0)}get sourceLanguageModels(){const a=[];let o=!1;if(this.autoDetectSourceLanguages!==void 0)for(const c of this.autoDetectSourceLanguages.split(",")){const u=c+e.PropertyId.SpeechServiceConnection_EndpointId.toString(),l=this.parameters.getProperty(u,void 0);l!==void 0?(a.push({language:c,endpoint:l}),o=!0):a.push({language:c,endpoint:""})}return o?a:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(a){this.privEnableSpeakerId=a}}t.RecognizerConfig=i}(wl)),wl}var MC={};Object.defineProperty(MC,"__esModule",{value:!0});var fu={};Object.defineProperty(fu,"__esModule",{value:!0});fu.WebsocketMessageFormatter=void 0;const et=M(),hg=`\r
`;class f_{toConnectionMessage(e){const r=new et.Deferred;try{if(e.messageType===et.MessageType.Text){const n=e.textContent;let i={},s=null;if(n){const a=n.split(`\r
\r
`);a&&a.length>0&&(i=this.parseHeaders(a[0]),a.length>1&&(s=a[1]))}r.resolve(new et.ConnectionMessage(e.messageType,s,i,e.id))}else if(e.messageType===et.MessageType.Binary){const n=e.binaryContent;let i={},s=null;if(!n||n.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const a=new DataView(n),o=a.getInt16(0);if(n.byteLength<o+2)throw new Error("Invalid binary message format. Header content missing.");let c="";for(let u=0;u<o;u++)c+=String.fromCharCode(a.getInt8(u+2));i=this.parseHeaders(c),n.byteLength>o+2&&(s=n.slice(2+o)),r.resolve(new et.ConnectionMessage(e.messageType,s,i,e.id))}}catch(n){r.reject(`Error formatting the message. Error: ${n}`)}return r.promise}fromConnectionMessage(e){const r=new et.Deferred;try{if(e.messageType===et.MessageType.Text){const n=`${this.makeHeaders(e)}${hg}${e.textBody?e.textBody:""}`;r.resolve(new et.RawWebsocketMessage(et.MessageType.Text,n,e.id))}else if(e.messageType===et.MessageType.Binary){const n=this.makeHeaders(e),i=e.binaryBody,s=this.stringToArrayBuffer(n),a=new Int8Array(s),o=a.byteLength,c=new Int8Array(2+o+(i?i.byteLength:0));if(c[0]=o>>8&255,c[1]=o&255,c.set(a,2),i){const l=new Int8Array(i);c.set(l,2+o)}const u=c.buffer;r.resolve(new et.RawWebsocketMessage(et.MessageType.Binary,u,e.id))}}catch(n){r.reject(`Error formatting the message. ${n}`)}return r.promise}makeHeaders(e){let r="";if(e.headers)for(const n in e.headers)n&&(r+=`${n}: ${e.headers[n]}${hg}`);return r}parseHeaders(e){const r={};if(e){const n=e.match(/[^\r\n]+/g);if(r){for(const i of n)if(i){const s=i.indexOf(":"),a=s>0?i.substr(0,s).trim().toLowerCase():i,o=s>0&&i.length>s+1?i.substr(s+1).trim():"";r[a]=o}}}return r}stringToArrayBuffer(e){const r=new ArrayBuffer(e.length),n=new DataView(r);for(let i=0;i<e.length;i++)n.setUint8(i,e.charCodeAt(i));return r}}fu.WebsocketMessageFormatter=f_;var fs={},fg;function v_(){if(fg)return fs;fg=1,Object.defineProperty(fs,"__esModule",{value:!0}),fs.SpeechConnectionFactory=void 0;const t=fe(),e=k(),r=I(),n=yt(),i=k(),s=he,a=St;let o=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/speech/universal/v"}create(u,l,p){let d=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);const h=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region,void 0),f=n.ConnectionFactoryBase.getHostSuffix(h),m=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://"+h+".stt.speech"+f),y={},v=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId,void 0),g=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(v?(!d||d.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(y[a.QueryParameterNames.CustomSpeechDeploymentId]=v):g&&(!d||d.search(a.QueryParameterNames.Language)===-1)&&(y[a.QueryParameterNames.Language]=g),(!d||d.search(a.QueryParameterNames.Format)===-1)&&(y[a.QueryParameterNames.Format]=u.parameters.getProperty(e.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase()),u.autoDetectSourceLanguages!==void 0&&(y[a.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(u,y,d),!d)switch(u.recognitionMode){case i.RecognitionMode.Conversation:u.parameters.getProperty(e.ForceDictationPropertyName,"false")==="true"?d=m+this.dictationRelativeUri:u.recognitionEndpointVersion!==void 0&&parseInt(u.recognitionEndpointVersion,10)>1?d=`${m}${this.universalUri}${u.recognitionEndpointVersion}`:d=m+this.conversationRelativeUri;break;case i.RecognitionMode.Dictation:d=m+this.dictationRelativeUri;break;default:u.recognitionEndpointVersion!==void 0&&parseInt(u.recognitionEndpointVersion,10)>1?d=`${m}${this.universalUri}${u.recognitionEndpointVersion}`:d=m+this.interactiveRelativeUri;break}const S={};l.token!==void 0&&l.token!==""&&(S[l.headerName]=l.token),S[s.HeaderNames.ConnectionId]=p;const C=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",P=new t.WebsocketConnection(d,y,S,new i.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),C,p),R=P.uri;return u.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,R),P}};return fs.SpeechConnectionFactory=o,fs}var vs={},vg;function g_(){if(vg)return vs;vg=1,Object.defineProperty(vs,"__esModule",{value:!0}),vs.ConversationTranscriberConnectionFactory=void 0;const t=fe(),e=I(),r=k(),n=yt(),i=k(),s=he,a=St;let o=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/speech/universal/v2"}create(u,l,p){let d=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);const h=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,void 0),f=n.ConnectionFactoryBase.getHostSuffix(h),m=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+h+".stt.speech"+f),y={},v=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),g=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);v?(!d||d.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(y[a.QueryParameterNames.CustomSpeechDeploymentId]=v):g&&(!d||d.search(a.QueryParameterNames.Language)===-1)&&(y[a.QueryParameterNames.Language]=g),u.autoDetectSourceLanguages!==void 0&&(y[a.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(u,y,d),d||(d=`${m}${this.universalUri}`);const S={};l.token!==void 0&&l.token!==""&&(S[l.headerName]=l.token),S[s.HeaderNames.ConnectionId]=p;const C=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",P=new t.WebsocketConnection(d,y,S,new i.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),C,p),R=P.uri;return u.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,R),P}setV2UrlParams(u,l,p){new Map([[e.PropertyId.Speech_SegmentationSilenceTimeoutMs,a.QueryParameterNames.SegmentationSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_EnableAudioLogging,a.QueryParameterNames.EnableAudioLogging],[e.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,a.QueryParameterNames.EndSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,a.QueryParameterNames.InitialSilenceTimeoutMs],[e.PropertyId.SpeechServiceResponse_PostProcessingOption,a.QueryParameterNames.Postprocessing],[e.PropertyId.SpeechServiceResponse_ProfanityOption,a.QueryParameterNames.Profanity],[e.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,a.QueryParameterNames.StableIntermediateThreshold]]).forEach((f,m)=>{this.setUrlParameter(m,f,u,l,p)});const h=JSON.parse(u.parameters.getProperty(r.ServicePropertiesPropertyName,"{}"));Object.keys(h).forEach(f=>{l[f]=h[f]})}};return vs.ConversationTranscriberConnectionFactory=o,vs}var gs={},gg;function m_(){if(gg)return gs;gg=1,Object.defineProperty(gs,"__esModule",{value:!0}),gs.TranscriberConnectionFactory=void 0;const t=fe(),e=I(),r=yt(),n=k(),i=he,s=St;let a=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(c,u,l){let p=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);const d=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,"centralus"),h=r.ConnectionFactoryBase.getHostSuffix(d),f="wss://transcribe."+d+".cts.speech"+h+this.multiaudioRelativeUri,m=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,f),y={};this.setQueryParams(y,c,p),p||(p=m);const v={};u.token!==void 0&&u.token!==""&&(v[u.headerName]=u.token),v[i.HeaderNames.ConnectionId]=l,c.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,p);const g=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(p,y,v,new n.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(c),g,l)}setQueryParams(c,u,l){const p=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),d=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);p&&!(s.QueryParameterNames.CustomSpeechDeploymentId in c)&&(c[s.QueryParameterNames.CustomSpeechDeploymentId]=p),d&&!(s.QueryParameterNames.Language in c)&&(c[s.QueryParameterNames.Language]=d);const h=u.parameters.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true",f=u.parameters.getProperty(n.OutputFormatPropertyName,e.OutputFormat[e.OutputFormat.Simple])!==e.OutputFormat[e.OutputFormat.Simple];(h||f)&&(c[s.QueryParameterNames.Format]=e.OutputFormat[e.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(u,c,l)}};return gs.TranscriberConnectionFactory=a,gs}var ms={},mg;function S_(){if(mg)return ms;mg=1,Object.defineProperty(ms,"__esModule",{value:!0}),ms.TranslationConnectionFactory=void 0;const t=fe(),e=Fo,r=I(),n=yt(),i=k(),s=he,a=St;let o=class extends n.ConnectionFactoryBase{create(u,l,p){const d=this.getEndpointUrl(u),h={};u.autoDetectSourceLanguages!==void 0&&(h[a.QueryParameterNames.EnableLanguageId]="true"),this.setQueryParams(h,u,d);const f={};l.token!==void 0&&l.token!==""&&(f[l.headerName]=l.token),f[s.HeaderNames.ConnectionId]=p,u.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,d);const m=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(d,h,f,new i.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),m,p)}getEndpointUrl(u,l){const p=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region),d=n.ConnectionFactoryBase.getHostSuffix(p);let h=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);return h||(u.autoDetectSourceLanguages!==void 0?h=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+d)+"/speech/universal/v2":h=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+d)+"/speech/translation/cognitiveservices/v1"),l===!0?h:e.StringUtils.formatString(h,{region:p})}setQueryParams(u,l,p){u.from=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage),u.to=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages),u.scenario=l.recognitionMode===i.RecognitionMode.Interactive?"interactive":l.recognitionMode===i.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(l,u,p),this.setUrlParameter(r.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,a.QueryParameterNames.StableTranslation,l,u,p);const d=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);d!==void 0&&(u.voice=d,u.features="texttospeech")}};return ms.TranslationConnectionFactory=o,ms}var Ss={},Sg;function y_(){if(Sg)return Ss;Sg=1,Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.EnumTranslation=void 0;const t=I(),e=k();let r=class{static implTranslateRecognitionResult(i,s=!1){let a=t.ResultReason.Canceled;switch(i){case e.RecognitionStatus.Success:a=t.ResultReason.RecognizedSpeech;break;case e.RecognitionStatus.EndOfDictation:a=s?t.ResultReason.RecognizedSpeech:t.ResultReason.NoMatch;break;case e.RecognitionStatus.NoMatch:case e.RecognitionStatus.InitialSilenceTimeout:case e.RecognitionStatus.BabbleTimeout:a=t.ResultReason.NoMatch;break;case e.RecognitionStatus.Error:case e.RecognitionStatus.BadRequest:case e.RecognitionStatus.Forbidden:default:a=t.ResultReason.Canceled;break}return a}static implTranslateCancelResult(i){let s=t.CancellationReason.EndOfStream;switch(i){case e.RecognitionStatus.Success:case e.RecognitionStatus.EndOfDictation:case e.RecognitionStatus.NoMatch:s=t.CancellationReason.EndOfStream;break;case e.RecognitionStatus.InitialSilenceTimeout:case e.RecognitionStatus.BabbleTimeout:case e.RecognitionStatus.Error:case e.RecognitionStatus.BadRequest:case e.RecognitionStatus.Forbidden:default:s=t.CancellationReason.Error;break}return s}static implTranslateCancelErrorCode(i){let s=t.CancellationErrorCode.NoError;switch(i){case e.RecognitionStatus.Error:s=t.CancellationErrorCode.ServiceError;break;case e.RecognitionStatus.TooManyRequests:s=t.CancellationErrorCode.TooManyRequests;break;case e.RecognitionStatus.BadRequest:s=t.CancellationErrorCode.BadRequestParameters;break;case e.RecognitionStatus.Forbidden:s=t.CancellationErrorCode.Forbidden;break;default:s=t.CancellationErrorCode.NoError;break}return s}static implTranslateErrorDetails(i){let s="The speech service encountered an internal error and could not continue.";switch(i){case t.CancellationErrorCode.Forbidden:s="The recognizer is using a free subscription that ran out of quota.";break;case t.CancellationErrorCode.BadRequestParameters:s="Invalid parameter or unsupported audio format in the request.";break;case t.CancellationErrorCode.TooManyRequests:s="The number of parallel requests exceeded the number of allowed concurrent transcriptions.";break}return s}};return Ss.EnumTranslation=r,Ss}var bC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionStatus=t.SynthesisStatus=void 0,function(e){e[e.Success=0]="Success",e[e.SynthesisEnd=1]="SynthesisEnd",e[e.Error=2]="Error"}(t.SynthesisStatus||(t.SynthesisStatus={})),function(e){e[e.Success=0]="Success",e[e.NoMatch=1]="NoMatch",e[e.InitialSilenceTimeout=2]="InitialSilenceTimeout",e[e.BabbleTimeout=3]="BabbleTimeout",e[e.Error=4]="Error",e[e.EndOfDictation=5]="EndOfDictation",e[e.TooManyRequests=6]="TooManyRequests",e[e.BadRequest=7]="BadRequest",e[e.Forbidden=8]="Forbidden"}(t.RecognitionStatus||(t.RecognitionStatus={}))})(bC);var ys={},yg;function C_(){if(yg)return ys;yg=1,Object.defineProperty(ys,"__esModule",{value:!0}),ys.TranslationSynthesisEnd=void 0;const t=k();let e=class DC{constructor(n){this.privSynthesisEnd=JSON.parse(n),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=t.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=t.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(n){return new DC(n)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}};return ys.TranslationSynthesisEnd=e,ys}var vu={};Object.defineProperty(vu,"__esModule",{value:!0});vu.TranslationHypothesis=void 0;const P_=z,R_=jc;class ec{constructor(e){this.privTranslationHypothesis=e,this.privTranslationHypothesis.Translation.TranslationStatus=R_.TranslationStatus[this.privTranslationHypothesis.Translation.TranslationStatus]}static fromJSON(e){return new ec(JSON.parse(e))}static fromTranslationResponse(e){P_.Contracts.throwIfNullOrUndefined(e,"translationHypothesis");const r=e.SpeechHypothesis;return e.SpeechHypothesis=void 0,r.Translation=e,new ec(r)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){var e;return(e=this.privTranslationHypothesis.PrimaryLanguage)==null?void 0:e.Language}}vu.TranslationHypothesis=ec;var Cs={},Cg;function E_(){if(Cg)return Cs;Cg=1,Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.TranslationPhrase=void 0;const t=z,e=k(),r=jc;let n=class _p{constructor(s){this.privTranslationPhrase=s,this.privTranslationPhrase.RecognitionStatus=e.RecognitionStatus[this.privTranslationPhrase.RecognitionStatus],this.privTranslationPhrase.Translation!==void 0&&(this.privTranslationPhrase.Translation.TranslationStatus=r.TranslationStatus[this.privTranslationPhrase.Translation.TranslationStatus])}static fromJSON(s){return new _p(JSON.parse(s))}static fromTranslationResponse(s){t.Contracts.throwIfNullOrUndefined(s,"translationResponse");const a=s.SpeechPhrase;return s.SpeechPhrase=void 0,a.Translation=s,a.Text=a.DisplayText,new _p(a)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){var s;return(s=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:s.Language}get Confidence(){var s;return(s=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:s.Confidence}get Translation(){return this.privTranslationPhrase.Translation}};return Cs.TranslationPhrase=n,Cs}var Ps={},Pg;function w_(){if(Pg)return Ps;Pg=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.TranslationServiceRecognizer=void 0;const t=M(),e=I(),r=k();let n=class extends r.ConversationServiceRecognizer{constructor(s,a,o,c,u){super(s,a,o,c,u),this.privTranslationRecognizer=u,this.connectionEvents.attach(l=>{l.name==="ConnectionEstablishedEvent"&&this.privTranslationRecognizer.onConnection()})}async processTypeSpecificMessages(s){const a=new e.PropertyCollection;let o=await this.processSpeechMessages(s);if(o)return!0;const c=async l=>{if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+l.Offset+l.Duration),l.RecognitionStatus===r.RecognitionStatus.Success){const p=this.fireEventForResult(l,a);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,p)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(p.result)}catch(d){this.privErrorCallback&&this.privErrorCallback(d)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const p=r.EnumTranslation.implTranslateRecognitionResult(l.RecognitionStatus),d=new e.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,p,l.Text,l.Duration,this.privRequestSession.currentTurnAudioOffset+l.Offset,l.Language,l.Confidence,void 0,s.textBody,a);if(p===e.ResultReason.Canceled){const h=r.EnumTranslation.implTranslateCancelResult(l.RecognitionStatus),f=r.EnumTranslation.implTranslateCancelErrorCode(l.RecognitionStatus);await this.cancelRecognitionLocal(h,f,r.EnumTranslation.implTranslateErrorDetails(f))}else{if(!(this.privRequestSession.isSpeechEnded&&p===e.ResultReason.NoMatch&&l.RecognitionStatus!==r.RecognitionStatus.InitialSilenceTimeout)){const h=new e.TranslationRecognitionEventArgs(d,d.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,h)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(d)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}o=!0}},u=(l,p)=>{const d=this.fireEventForResult(l,p);if(this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset+d.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,d)}catch{}o=!0};switch(s.messageType===t.MessageType.Text&&a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,s.textBody),s.path.toLowerCase()){case"translation.hypothesis":u(r.TranslationHypothesis.fromJSON(s.textBody),a);break;case"translation.response":const l=JSON.parse(s.textBody);if(l.SpeechPhrase)await c(r.TranslationPhrase.fromTranslationResponse(l));else{const d=JSON.parse(s.textBody);d.SpeechHypothesis&&u(r.TranslationHypothesis.fromTranslationResponse(d),a)}break;case"translation.phrase":await c(r.TranslationPhrase.fromJSON(s.textBody));break;case"translation.synthesis":this.sendSynthesisAudio(s.binaryBody,this.privRequestSession.sessionId),o=!0;break;case"audio.end":case"translation.synthesis.end":const p=r.TranslationSynthesisEnd.fromJSON(s.textBody);switch(p.SynthesisStatus){case r.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const d=new e.TranslationSynthesisResult(e.ResultReason.Canceled,void 0),h=new e.TranslationSynthesisEventArgs(d,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,h)}catch{}}if(this.privTranslationRecognizer.canceled){const d=new e.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,e.CancellationReason.Error,p.FailureReason,e.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,d)}catch{}}break;case r.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId);break}o=!0;break}return o}cancelRecognition(s,a,o,c,u){const l=new e.PropertyCollection;if(l.setProperty(r.CancellationErrorCodePropertyName,e.CancellationErrorCode[c]),this.privTranslationRecognizer.canceled){const p=new e.TranslationRecognitionCanceledEventArgs(s,o,u,c,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,p)}catch{}}if(this.privSuccessCallback){const p=new e.TranslationRecognitionResult(void 0,a,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,u,void 0,l);try{this.privSuccessCallback(p),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(s,a,o){try{const c=new e.TranslationRecognitionEventArgs(e.TranslationRecognitionResult.fromSpeechRecognitionResult(s),a,o);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,c)}catch{}}handleRecognizedCallback(s,a,o){try{const c=new e.TranslationRecognitionEventArgs(e.TranslationRecognitionResult.fromSpeechRecognitionResult(s),a,o);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,c)}catch{}}fireEventForResult(s,a){let o;if(s.Translation.Translations!==void 0){o=new e.Translations;for(const f of s.Translation.Translations)o.set(f.Language,f.Text||f.DisplayText)}let c,u;s instanceof r.TranslationPhrase?(s.Translation&&s.Translation.TranslationStatus===t.TranslationStatus.Success?c=e.ResultReason.TranslatedSpeech:c=e.ResultReason.RecognizedSpeech,u=s.Confidence):c=e.ResultReason.TranslatingSpeech;const l=s.Language,p=s.Offset+this.privRequestSession.currentTurnAudioOffset,d=new e.TranslationRecognitionResult(o,this.privRequestSession.requestId,c,s.Text,s.Duration,p,l,u,s.Translation.FailureReason,JSON.stringify(s),a);return new e.TranslationRecognitionEventArgs(d,p,this.privRequestSession.sessionId)}sendSynthesisAudio(s,a){const o=s===void 0?e.ResultReason.SynthesizingAudioCompleted:e.ResultReason.SynthesizingAudio,c=new e.TranslationSynthesisResult(o,s),u=new e.TranslationSynthesisEventArgs(c,a);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,u)}catch{}}};return Ps.TranslationServiceRecognizer=n,Ps}var gu={};Object.defineProperty(gu,"__esModule",{value:!0});gu.SpeechDetected=void 0;class Fd{constructor(e){this.privSpeechStartDetected=JSON.parse(e)}static fromJSON(e){return new Fd(e)}get Offset(){return this.privSpeechStartDetected.Offset}}gu.SpeechDetected=Fd;var mu={};Object.defineProperty(mu,"__esModule",{value:!0});mu.SpeechHypothesis=void 0;class qd{constructor(e){this.privSpeechHypothesis=JSON.parse(e)}static fromJSON(e){return new qd(e)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}}mu.SpeechHypothesis=qd;var Su={};Object.defineProperty(Su,"__esModule",{value:!0});Su.SpeechKeyword=void 0;class Ud{constructor(e){this.privSpeechKeyword=JSON.parse(e)}static fromJSON(e){return new Ud(e)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}}Su.SpeechKeyword=Ud;var Rs={},Rg;function I_(){if(Rg)return Rs;Rg=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.SpeechServiceRecognizer=void 0;const t=I(),e=k();let r=class extends e.ServiceRecognizerBase{constructor(i,s,a,o,c){super(i,s,a,o,c),this.privSpeechRecognizer=c}async processTypeSpecificMessages(i){let s;const a=new t.PropertyCollection;a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,i.textBody);let o=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const c=e.SpeechHypothesis.fromJSON(i.textBody),u=c.Offset+this.privRequestSession.currentTurnAudioOffset;s=new t.SpeechRecognitionResult(this.privRequestSession.requestId,t.ResultReason.RecognizingSpeech,c.Text,c.Duration,u,c.Language,c.LanguageDetectionConfidence,void 0,void 0,i.textBody,a),this.privRequestSession.onHypothesis(u);const l=new t.SpeechRecognitionEventArgs(s,c.Duration,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,l)}catch{}o=!0;break;case"speech.phrase":const p=e.SimpleSpeechPhrase.fromJSON(i.textBody),d=e.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+p.Offset+p.Duration),t.ResultReason.Canceled===d){const h=e.EnumTranslation.implTranslateCancelResult(p.RecognitionStatus),f=e.EnumTranslation.implTranslateCancelErrorCode(p.RecognitionStatus);await this.cancelRecognitionLocal(h,f,e.EnumTranslation.implTranslateErrorDetails(f))}else{if(!(this.privRequestSession.isSpeechEnded&&d===t.ResultReason.NoMatch&&p.RecognitionStatus!==e.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(e.OutputFormatPropertyName)===t.OutputFormat[t.OutputFormat.Simple])s=new t.SpeechRecognitionResult(this.privRequestSession.requestId,d,p.DisplayText,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,void 0,void 0,i.textBody,a);else{const f=e.DetailedSpeechPhrase.fromJSON(i.textBody),m=f.Offset+this.privRequestSession.currentTurnAudioOffset,y=f.getJsonWithCorrectedOffsets(m);s=new t.SpeechRecognitionResult(this.privRequestSession.requestId,d,f.RecognitionStatus===e.RecognitionStatus.Success?f.NBest[0].Display:void 0,f.Duration,m,f.Language,f.LanguageDetectionConfidence,void 0,void 0,y,a)}const h=new t.SpeechRecognitionEventArgs(s,s.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,h)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(s)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}o=!0;break}return o}cancelRecognition(i,s,a,o,c){const u=new t.PropertyCollection;if(u.setProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[o]),this.privSpeechRecognizer.canceled){const l=new t.SpeechRecognitionCanceledEventArgs(a,c,o,void 0,i);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,l)}catch{}}if(this.privSuccessCallback){const l=new t.SpeechRecognitionResult(s,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,c,void 0,u);try{this.privSuccessCallback(l),this.privSuccessCallback=void 0}catch{}}}};return Rs.SpeechServiceRecognizer=r,Rs}var Es={},Eg;function T_(){if(Eg)return Es;Eg=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.ConversationTranscriptionServiceRecognizer=void 0;const t=I(),e=k();let r=class extends e.ServiceRecognizerBase{constructor(i,s,a,o,c){super(i,s,a,o,c),this.privConversationTranscriber=c,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){const i=this.privSpeechContext.getSection("phraseDetection");i.mode="Conversation";const s={};s.mode="Anonymous",s.audioSessionId=this.privDiarizationSessionId,s.audioOffsetMs=0,s.diarizeIntermediates=this.privRecognizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceResponse_DiarizeIntermediateResults,"false")==="true",i.speakerDiarization=s,this.privSpeechContext.setSection("phraseDetection",i)}}async processTypeSpecificMessages(i){let s;const a=new t.PropertyCollection;a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,i.textBody);let o=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const c=e.SpeechHypothesis.fromJSON(i.textBody),u=c.Offset+this.privRequestSession.currentTurnAudioOffset;s=new t.ConversationTranscriptionResult(this.privRequestSession.requestId,t.ResultReason.RecognizingSpeech,c.Text,c.Duration,u,c.Language,c.LanguageDetectionConfidence,c.SpeakerId,void 0,i.textBody,a),this.privRequestSession.onHypothesis(u);const l=new t.ConversationTranscriptionEventArgs(s,c.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,l)}catch{}o=!0;break;case"speech.phrase":const p=e.SimpleSpeechPhrase.fromJSON(i.textBody),d=e.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+p.Offset+p.Duration),t.ResultReason.Canceled===d){const h=e.EnumTranslation.implTranslateCancelResult(p.RecognitionStatus),f=e.EnumTranslation.implTranslateCancelErrorCode(p.RecognitionStatus);await this.cancelRecognitionLocal(h,f,e.EnumTranslation.implTranslateErrorDetails(f))}else if(!(this.privRequestSession.isSpeechEnded&&d===t.ResultReason.NoMatch&&p.RecognitionStatus!==e.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(e.OutputFormatPropertyName)===t.OutputFormat[t.OutputFormat.Simple])s=new t.ConversationTranscriptionResult(this.privRequestSession.requestId,d,p.DisplayText,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,p.SpeakerId,void 0,i.textBody,a);else{const f=e.DetailedSpeechPhrase.fromJSON(i.textBody),m=f.Offset+this.privRequestSession.currentTurnAudioOffset,y=f.getJsonWithCorrectedOffsets(m);s=new t.ConversationTranscriptionResult(this.privRequestSession.requestId,d,f.RecognitionStatus===e.RecognitionStatus.Success?f.NBest[0].Display:void 0,f.Duration,m,f.Language,f.LanguageDetectionConfidence,p.SpeakerId,void 0,y,a)}const h=new t.ConversationTranscriptionEventArgs(s,s.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,h)}catch{}}o=!0;break}return o}cancelRecognition(i,s,a,o,c){if(new t.PropertyCollection().setProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[o]),this.privConversationTranscriber.canceled){const l=new t.ConversationTranscriptionCanceledEventArgs(a,c,o,void 0,i);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,l)}catch{}}}};return Es.ConversationTranscriptionServiceRecognizer=r,Es}var ws={},wg;function __(){if(wg)return ws;wg=1,Object.defineProperty(ws,"__esModule",{value:!0}),ws.TranscriptionServiceRecognizer=void 0;const t=M(),e=I(),r=k(),n=Kt;let i=class extends r.ConversationServiceRecognizer{constructor(a,o,c,u,l){super(a,o,c,u,l),this.privTranscriberRecognizer=l,this.sendPrePayloadJSONOverride=p=>this.sendTranscriptionStartJSON(p),this.privRecognizerConfig.parameters.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)==="true"&&this.privSpeechContext.setWordLevelTimings()}async sendSpeechEventAsync(a,o){if(this.privRequestSession.isRecognizing){const c=await this.fetchConnection();await this.sendSpeechEvent(c,this.createSpeechEventPayload(a,o))}}async sendMeetingSpeechEventAsync(a,o){if(this.privRequestSession.isRecognizing){const c=await this.fetchConnection();await this.sendSpeechEvent(c,this.createMeetingSpeechEventPayload(a,o))}}processTypeSpecificMessages(a){return this.processSpeechMessages(a)}handleRecognizedCallback(a,o,c){try{const u=new e.SpeechRecognitionEventArgs(a,o,c);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,u),this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(l){this.privErrorCallback&&this.privErrorCallback(l)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch{}}handleRecognizingCallback(a,o,c){try{const u=new e.SpeechRecognitionEventArgs(a,o,c);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,u)}catch{}}cancelRecognition(a,o,c,u,l){const p=new e.PropertyCollection;if(p.setProperty(r.CancellationErrorCodePropertyName,e.CancellationErrorCode[u]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){const d=new e.MeetingTranscriptionCanceledEventArgs(c,l,u,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,d)}catch{}}}else if(this.privTranscriberRecognizer.canceled){const d=new e.ConversationTranscriptionCanceledEventArgs(c,l,u,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,d)}catch{}}if(this.privSuccessCallback){const d=new e.SpeechRecognitionResult(o,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,l,void 0,p);try{this.privSuccessCallback(d),this.privSuccessCallback=void 0}catch{}}}async sendTranscriptionStartJSON(a){if(await this.sendSpeechContext(a,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){const o=this.privTranscriberRecognizer.getMeetingInfo(),c=this.createMeetingSpeechEventPayload(o,"start");await this.sendSpeechEvent(a,c)}else{const o=this.privTranscriberRecognizer.getConversationInfo(),c=this.createSpeechEventPayload(o,"start");await this.sendSpeechEvent(a,c)}await this.sendWaveHeader(a)}sendSpeechEvent(a,o){const c=JSON.stringify(o);if(c)return a.send(new n.SpeechConnectionMessage(t.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",c))}createSpeechEventPayload(a,o){const c={id:"meeting",name:o,meeting:a.conversationProperties};return c.meeting.id=a.id,c.meeting.attendees=a.participants,c}createMeetingSpeechEventPayload(a,o){const c={id:"meeting",name:o,meeting:a.meetingProperties};return c.meeting.id=a.id,c.meeting.attendees=a.participants,c}};return ws.TranscriptionServiceRecognizer=i,ws}var Is={},Ig;function A_(){if(Ig)return Is;Ig=1,Object.defineProperty(Is,"__esModule",{value:!0}),Is.DetailedSpeechPhrase=void 0;const t=k();let e=class NC{constructor(n){this.privDetailedSpeechPhrase=JSON.parse(n),this.privDetailedSpeechPhrase.RecognitionStatus=t.RecognitionStatus[this.privDetailedSpeechPhrase.RecognitionStatus]}static fromJSON(n){return new NC(n)}getJsonWithCorrectedOffsets(n){if(this.privDetailedSpeechPhrase.NBest){let i;for(const s of this.privDetailedSpeechPhrase.NBest)if(s.Words&&s.Words[0]){i=s.Words[0].Offset;break}if(i&&i<n){const s=n-i;for(const a of this.privDetailedSpeechPhrase.NBest){if(a.Words)for(const o of a.Words)o.Offset+=s;if(a.DisplayWords)for(const o of a.DisplayWords)o.Offset+=s}}}return JSON.stringify(this.privDetailedSpeechPhrase)}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}};return Is.DetailedSpeechPhrase=e,Is}var Ts={},Tg;function k_(){if(Tg)return Ts;Tg=1,Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.SimpleSpeechPhrase=void 0;const t=k();let e=class zC{constructor(n){this.privSimpleSpeechPhrase=JSON.parse(n),this.privSimpleSpeechPhrase.RecognitionStatus=t.RecognitionStatus[this.privSimpleSpeechPhrase.RecognitionStatus]}static fromJSON(n){return new zC(n)}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}};return Ts.SimpleSpeechPhrase=e,Ts}var yu={};Object.defineProperty(yu,"__esModule",{value:!0});yu.AddedLmIntent=void 0;class O_{constructor(e,r){this.modelImpl=e,this.intentName=r}}yu.AddedLmIntent=O_;var _s={},_g;function M_(){if(_g)return _s;_g=1,Object.defineProperty(_s,"__esModule",{value:!0}),_s.IntentServiceRecognizer=void 0;const t=M(),e=I(),r=k();let n=class extends r.ServiceRecognizerBase{constructor(s,a,o,c,u){super(s,a,o,c,u),this.privIntentRecognizer=u,this.privIntentDataSent=!1}setIntents(s,a){this.privAddedLmIntents=s,this.privUmbrellaIntent=a,this.privIntentDataSent=!0}processTypeSpecificMessages(s){let a,o,c=!1;const u=new e.PropertyCollection;switch(s.messageType===t.MessageType.Text&&u.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,s.textBody),s.path.toLowerCase()){case"speech.hypothesis":const p=r.SpeechHypothesis.fromJSON(s.textBody);if(a=new e.IntentRecognitionResult(void 0,this.privRequestSession.requestId,e.ResultReason.RecognizingIntent,p.Text,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,void 0,s.textBody,u),this.privRequestSession.onHypothesis(a.offset),o=new e.IntentRecognitionEventArgs(a,p.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,o)}catch{}c=!0;break;case"speech.phrase":const d=r.SimpleSpeechPhrase.fromJSON(s.textBody);a=new e.IntentRecognitionResult(void 0,this.privRequestSession.requestId,r.EnumTranslation.implTranslateRecognitionResult(d.RecognitionStatus),d.DisplayText,d.Duration,d.Offset+this.privRequestSession.currentTurnAudioOffset,d.Language,d.LanguageDetectionConfidence,void 0,s.textBody,u),o=new e.IntentRecognitionEventArgs(a,a.offset,this.privRequestSession.sessionId);const h=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,o)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(m){this.privErrorCallback&&this.privErrorCallback(m)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};this.privIntentDataSent===!1||e.ResultReason.NoMatch===o.result.reason?(this.privRequestSession.onPhraseRecognized(o.offset+o.result.duration),h()):this.privPendingIntentArgs=o,c=!0;break;case"response":if(o=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,o===void 0){if(s.textBody==="")return;o=new e.IntentRecognitionEventArgs(new e.IntentRecognitionResult,0,this.privRequestSession.sessionId)}const f=r.IntentResponse.fromJSON(s.textBody);if(f!==null&&f.topScoringIntent&&f.topScoringIntent.intent){let m=this.privAddedLmIntents[f.topScoringIntent.intent];if(this.privUmbrellaIntent!==void 0&&(m=this.privUmbrellaIntent),m){const y=m===void 0||m.intentName===void 0?f.topScoringIntent.intent:m.intentName;let v=o.result.reason;y!==void 0&&(v=e.ResultReason.RecognizedIntent);const g=o.result.properties!==void 0?o.result.properties:new e.PropertyCollection;g.setProperty(e.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,s.textBody),o=new e.IntentRecognitionEventArgs(new e.IntentRecognitionResult(y,o.result.resultId,v,o.result.text,o.result.duration,o.result.offset,void 0,void 0,o.result.errorDetails,o.result.json,g),o.offset,o.sessionId)}}if(this.privRequestSession.onPhraseRecognized(o.offset+o.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,o)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(o.result)}catch(m){this.privErrorCallback&&this.privErrorCallback(m)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}c=!0;break}const l=new t.Deferred;return l.resolve(c),l.promise}cancelRecognition(s,a,o,c,u){const l=new e.PropertyCollection;if(l.setProperty(r.CancellationErrorCodePropertyName,e.CancellationErrorCode[c]),this.privIntentRecognizer.canceled){const p=new e.IntentRecognitionCanceledEventArgs(o,u,c,void 0,void 0,s);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,p)}catch{}}if(this.privSuccessCallback){const p=new e.IntentRecognitionResult(void 0,a,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,u,void 0,l);try{this.privSuccessCallback(p),this.privSuccessCallback=void 0}catch{}}}};return _s.IntentServiceRecognizer=n,_s}var Cu={};Object.defineProperty(Cu,"__esModule",{value:!0});Cu.IntentResponse=void 0;class $d{constructor(e){e===""?this.privIntentResponse={}:this.privIntentResponse=JSON.parse(e)}static fromJSON(e){return new $d(e)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}}Cu.IntentResponse=$d;var LC={};Object.defineProperty(LC,"__esModule",{value:!0});var Pu={},Ru={};Object.defineProperty(Ru,"__esModule",{value:!0});Ru.ServiceTelemetryListener=void 0;const Nt=M(),Ag=hu;class b_{constructor(e,r,n){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=e,this.privAudioSourceId=r,this.privAudioNodeId=n,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(e){e>0&&this.privPhraseLatencies.push(Date.now()-e)}hypothesisReceived(e){e>0&&this.privHypothesisLatencies.push(Date.now()-e)}onEvent(e){this.privIsDisposed||(e instanceof Ag.RecognitionTriggeredEvent&&e.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof Nt.AudioStreamNodeAttachingEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof Nt.AudioStreamNodeAttachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof Nt.AudioSourceErrorEvent&&e.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof Nt.AudioStreamNodeErrorEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof Nt.AudioStreamNodeDetachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Name:"Microphone",Start:this.privMicStartTime})),e instanceof Ag.ConnectingToServiceEvent&&e.requestId===this.privRequestId&&(this.privConnectionId=e.sessionId),e instanceof Nt.ConnectionStartEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionStartTime=e.eventTime),e instanceof Nt.ConnectionEstablishedEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof Nt.ConnectionEstablishErrorEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Error:this.getConnectionError(e.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof Nt.ConnectionMessageReceivedEvent&&e.connectionId===this.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path&&(this.privReceivedMessages[e.message.headers.path]||(this.privReceivedMessages[e.message.headers.path]=new Array),this.privReceivedMessages[e.message.headers.path].length<50&&this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime)))}getTelemetry(){const e=new Array;this.privListeningTriggerMetric&&e.push(this.privListeningTriggerMetric),this.privMicMetric&&e.push(this.privMicMetric),this.privConnectionEstablishMetric&&e.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&e.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&e.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const r={Metrics:e,ReceivedMessages:this.privReceivedMessages},n=JSON.stringify(r);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],n}get hasTelemetry(){return Object.keys(this.privReceivedMessages).length!==0||this.privListeningTriggerMetric!==null||this.privMicMetric!==null||this.privConnectionEstablishMetric!==null||this.privPhraseLatencies.length!==0||this.privHypothesisLatencies.length!==0}dispose(){this.privIsDisposed=!0}getConnectionError(e){switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}}}Ru.ServiceTelemetryListener=b_;Object.defineProperty(Pu,"__esModule",{value:!0});Pu.RequestSession=void 0;const pn=M(),ua=hu,D_=Ru;class N_{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=e,this.privRequestId=pn.createNoDashGuid(),this.privAudioNodeId=pn.createNoDashGuid(),this.privTurnDeferral=new pn.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(e){this.privServiceTelemetryListener&&this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new D_.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new ua.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}async onAudioSourceAttachCompleted(e,r){this.privAudioNode=e,this.privIsAudioNodeDetached=!1,r?await this.onComplete():this.onEvent(new ua.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onPreConnectionStart(e,r){this.privAuthFetchEventId=e,this.privSessionId=r,this.onEvent(new ua.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}async onAuthCompleted(e){e&&await this.onComplete()}async onConnectionEstablishCompleted(e,r){if(e===200){this.onEvent(new ua.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0;return}else e===403&&await this.onComplete()}async onServiceTurnEndResponse(e){this.privTurnDeferral.resolve(),!e||this.isSpeechEnded?(await this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())}onSpeechContext(){this.privRequestId=pn.createNoDashGuid()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new pn.Deferred}onHypothesis(e){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(e)))}onPhraseRecognized(e){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(e)),this.onServiceRecognized(e)}onServiceRecognized(e){this.privLastRecoOffset=e,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(e),this.privConnectionAttempts=0}onAudioSent(e){this.privBytesSent+=e,this.privRecognitionBytesSent+=e}onRetryConnection(){this.privConnectionAttempts++}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)await e.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}async onStopRecognizing(){await this.onComplete()}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(e){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(e),pn.Events.instance.onEvent(e)}async onComplete(){this.privIsRecognizing&&(this.privIsRecognizing=!1,await this.detachAudioNode())}async detachAudioNode(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&await this.privAudioNode.detach())}}Pu.RequestSession=N_;var Eu={};Object.defineProperty(Eu,"__esModule",{value:!0});Eu.SpeechContext=void 0;class z_{constructor(e){this.privContext={},this.privDynamicGrammar=e}getSection(e){return this.privContext[e]||{}}setSection(e,r){this.privContext[e]=r}setPronunciationAssessmentParams(e,r,n=!1){this.privContext.phraseDetection===void 0&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment===void 0&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(e),n&&(this.privContext.phraseDetection.mode="Conversation"),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),this.privContext.phraseOutput.detailed.options.indexOf("SNR")===-1&&this.privContext.phraseOutput.detailed.options.push("SNR"),r&&(this.privContext.phraseDetection.enrichment.contentAssessment={topic:r},this.privContext.phraseOutput.detailed.options.push("ContentAssessment"))}setDetailedOutputFormat(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed"}setWordLevelTimings(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed",this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")===-1&&this.privContext.phraseOutput.detailed.options.push("WordTimings")}setSpeakerDiarizationAudioOffsetMs(e){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=e}toJSON(){const e=this.privDynamicGrammar.generateGrammarObject();return this.setSection("dgi",e),JSON.stringify(this.privContext)}}Eu.SpeechContext=z_;var wu={};Object.defineProperty(wu,"__esModule",{value:!0});wu.DynamicGrammarBuilder=void 0;class L_{addPhrase(e){this.privPhrases||(this.privPhrases=[]),e instanceof Array?this.privPhrases=this.privPhrases.concat(e):this.privPhrases.push(e)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(e){this.privGrammars||(this.privGrammars=[]),e instanceof Array?this.privGrammars=this.privGrammars.concat(e):this.privGrammars.push(e)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(this.privGrammars===void 0&&this.privPhrases===void 0)return;const e={};if(e.ReferenceGrammars=this.privGrammars,this.privPhrases!==void 0&&this.privPhrases.length!==0){const r=[];this.privPhrases.forEach(n=>{r.push({Text:n})}),e.Groups=[{Type:"Generic",Items:r}]}return e}}wu.DynamicGrammarBuilder=L_;var jC={};Object.defineProperty(jC,"__esModule",{value:!0});var As={},Iu={},Tu={},Vd={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MessageDataStreamType=t.ActivityPayloadResponse=void 0;class e{constructor(n){this.privActivityResponse=JSON.parse(n)}static fromJSON(n){return new e(n)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}t.ActivityPayloadResponse=e,function(r){r[r.None=0]="None",r[r.TextToSpeechAudio=1]="TextToSpeechAudio"}(t.MessageDataStreamType||(t.MessageDataStreamType={}))})(Vd);Object.defineProperty(Tu,"__esModule",{value:!0});Tu.DialogServiceTurnState=void 0;const j_=Er,x_=me,B_=Vd;class F_{constructor(e,r){this.privRequestId=r,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=e,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(e,r){return e.messageDataStreamType===B_.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=x_.AudioOutputStream.createPullStream(),this.privAudioStream.format=r!==void 0?r:j_.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){this.privAudioStream!==null&&!this.privAudioStream.isClosed&&this.privAudioStream.close()}complete(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}}Tu.DialogServiceTurnState=F_;Object.defineProperty(Iu,"__esModule",{value:!0});Iu.DialogServiceTurnStateManager=void 0;const kg=ye,q_=Tu;class U_{constructor(){this.privTurnMap=new Map}StartTurn(e){if(this.privTurnMap.has(e))throw new kg.InvalidOperationError("Service error: There is already a turn with id:"+e);const r=new q_.DialogServiceTurnState(this,e);return this.privTurnMap.set(e,r),this.privTurnMap.get(e)}GetTurn(e){return this.privTurnMap.get(e)}CompleteTurn(e){if(!this.privTurnMap.has(e))throw new kg.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+e);const r=this.privTurnMap.get(e);return r.complete(),this.privTurnMap.delete(e),r}}Iu.DialogServiceTurnStateManager=U_;var Og;function $_(){if(Og)return As;Og=1,Object.defineProperty(As,"__esModule",{value:!0}),As.DialogServiceAdapter=void 0;const t=fe(),e=Zr,r=M(),n=Er,i=I(),s=Iu,a=k(),o=Vd,c=Kt;let u=class extends a.ServiceRecognizerBase{constructor(p,d,h,f,m){super(p,d,h,f,m),this.privEvents=new r.EventSource,this.privDialogServiceConnector=m,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new s.DialogServiceTurnStateManager,this.recognizeOverride=(y,v,g)=>this.listenOnce(y,v,g),this.postConnectImplOverride=y=>this.dialogConnectImpl(y),this.configConnectionOverride=y=>this.configConnection(y),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=h,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(y=>{y.name==="ConnectionClosedEvent"&&(this.terminateMessageLoop=!0)})}async sendMessage(p){const d=r.createGuid(),h=r.createNoDashGuid(),f={context:{interactionId:d},messagePayload:JSON.parse(p),version:.5},m=JSON.stringify(f);await(await this.fetchConnection()).send(new c.SpeechConnectionMessage(r.MessageType.Text,"agent",h,"application/json",m))}async privDisconnect(){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}processTypeSpecificMessages(p){const d=new i.PropertyCollection;p.messageType===r.MessageType.Text&&d.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,p.textBody);let h,f;switch(p.path.toLowerCase()){case"speech.phrase":const y=a.SimpleSpeechPhrase.fromJSON(p.textBody);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+y.Offset+y.Duration),y.RecognitionStatus!==a.RecognitionStatus.TooManyRequests&&y.RecognitionStatus!==a.RecognitionStatus.Error){const R=this.fireEventForResult(y,d);if(this.privLastResult=R.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,R)}catch{}}f=!0;break;case"speech.hypothesis":const v=a.SpeechHypothesis.fromJSON(p.textBody),g=v.Offset+this.privRequestSession.currentTurnAudioOffset;h=new i.SpeechRecognitionResult(this.privRequestSession.requestId,i.ResultReason.RecognizingSpeech,v.Text,v.Duration,g,v.Language,v.LanguageDetectionConfidence,void 0,void 0,p.textBody,d),this.privRequestSession.onHypothesis(g);const S=new i.SpeechRecognitionEventArgs(h,v.Duration,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,S)}catch{}f=!0;break;case"speech.keyword":const C=a.SpeechKeyword.fromJSON(p.textBody);h=new i.SpeechRecognitionResult(this.privRequestSession.requestId,C.Status==="Accepted"?i.ResultReason.RecognizedKeyword:i.ResultReason.NoMatch,C.Text,C.Duration,C.Offset,void 0,void 0,void 0,void 0,p.textBody,d),C.Status!=="Accepted"&&(this.privLastResult=h);const P=new i.SpeechRecognitionEventArgs(h,h.duration,h.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,P)}catch{}f=!0;break;case"audio":{const R=p.requestId.toUpperCase(),w=this.privTurnStateManager.GetTurn(R);try{p.binaryBody?w.audioStream.write(p.binaryBody):w.endAudioStream()}catch{}}f=!0;break;case"response":this.handleResponseMessage(p),f=!0;break}const m=new r.Deferred;return m.resolve(f),m.promise}async cancelRecognition(p,d,h,f,m){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&await this.privRequestSession.onStopRecognizing(),this.privDialogServiceConnector.canceled){const y=new i.PropertyCollection;y.setProperty(a.CancellationErrorCodePropertyName,i.CancellationErrorCode[f]);const v=new i.SpeechRecognitionCanceledEventArgs(h,m,f,void 0,p);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,v)}catch{}if(this.privSuccessCallback){const g=new i.SpeechRecognitionResult(void 0,i.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,m,void 0,y);try{this.privSuccessCallback(g),this.privSuccessCallback=void 0}catch{}}}}async listenOnce(p,d,h){this.privRecognizerConfig.recognitionMode=p,this.privSuccessCallback=d,this.privErrorCallback=h,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(i.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const f=this.connectImpl(),m=this.sendPreAudioMessages(),y=await this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),v=await this.privDialogAudioSource.format,g=await this.privDialogAudioSource.deviceInfo,S=new t.ReplayableAudioNode(y,v.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(S,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:g};try{await f,await m}catch(R){return await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.ConnectionFailure,R),Promise.resolve()}const C=new i.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,C),this.sendAudio(S).then(()=>{},async R=>{await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,R)})}dialogConnectImpl(p){return this.privConnectionLoop=this.startMessageLoop(),p}receiveDialogMessageOverride(){const p=new r.Deferred,d=async()=>{try{const h=this.isDisposed(),f=!this.isDisposed()&&this.terminateMessageLoop;if(h||f){p.resolve(void 0);return}const y=await(await this.fetchConnection()).read();if(!y)return d();const v=c.SpeechConnectionMessage.fromConnectionMessage(y);switch(v.path.toLowerCase()){case"turn.start":{const E=v.requestId.toUpperCase(),N=this.privRequestSession.requestId.toUpperCase();E!==N?this.privTurnStateManager.StartTurn(E):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const S=a.SpeechDetected.fromJSON(v.textBody),C=new i.RecognitionEventArgs(S.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,C);break;case"speech.enddetected":let P;v.textBody.length>0?P=v.textBody:P="{ Offset: 0 }";const R=a.SpeechDetected.fromJSON(P);this.privRequestSession.onServiceRecognized(R.Offset+this.privRequestSession.currentTurnAudioOffset);const w=new i.RecognitionEventArgs(R.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,w);break;case"turn.end":{const E=v.requestId.toUpperCase(),N=this.privRequestSession.requestId.toUpperCase();if(E!==N)this.privTurnStateManager.CompleteTurn(E);else{const O=new i.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(!1),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,O),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(W){this.privErrorCallback&&this.privErrorCallback(W)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{await this.processTypeSpecificMessages(v)||this.serviceEvents&&this.serviceEvents.onEvent(new r.ServiceEvent(v.path.toLowerCase(),v.textBody))}catch{}}return d()}catch{this.terminateMessageLoop=!0,p.resolve()}};return d().catch(h=>{r.Events.instance.onEvent(new r.BackgroundEvent(h))}),p.promise}async startMessageLoop(){this.terminateMessageLoop=!1;try{await this.receiveDialogMessageOverride()}catch(p){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,p)}return Promise.resolve()}async configConnection(p){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(await this.sendSpeechServiceConfig(p,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendAgentConfig(p),p)}async sendPreAudioMessages(){const p=await this.fetchConnection();this.addKeywordContextData(),await this.sendSpeechContext(p,!0),await this.sendAgentContext(p),await this.sendWaveHeader(p)}sendAgentConfig(p){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(i.PropertyId.Conversation_DialogType)===i.DialogServiceConfig.DialogTypes.CustomCommands){const h=this.agentConfig.get();h.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(h)}this.onEvent(new e.SendingAgentContextMessageEvent(this.agentConfig));const d=this.agentConfig.toJsonString();return this.agentConfigSent=!0,p.send(new c.SpeechConnectionMessage(r.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",d))}}sendAgentContext(p){const d=r.createGuid(),h=this.privDialogServiceConnector.properties.getProperty(i.PropertyId.Conversation_Speech_Activity_Template),m=JSON.stringify({channelData:"",context:{interactionId:d},messagePayload:typeof h===void 0?void 0:h,version:.5});return p.send(new c.SpeechConnectionMessage(r.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",m))}fireEventForResult(p,d){const h=a.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus),f=p.Offset+this.privRequestSession.currentTurnAudioOffset,m=new i.SpeechRecognitionResult(this.privRequestSession.requestId,h,p.DisplayText,p.Duration,f,p.Language,p.LanguageDetectionConfidence,void 0,void 0,JSON.stringify(p),d);return new i.SpeechRecognitionEventArgs(m,f,this.privRequestSession.sessionId)}handleResponseMessage(p){const d=JSON.parse(p.textBody);switch(d.messageType.toLowerCase()){case"message":const h=p.requestId.toUpperCase(),f=o.ActivityPayloadResponse.fromJSON(p.textBody),m=this.privTurnStateManager.GetTurn(h);if(f.conversationId){const g=this.agentConfig.get();g.botInfo.conversationId=f.conversationId,this.agentConfig.set(g)}const y=m.processActivityPayload(f,n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(i.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),v=new i.ActivityReceivedEventArgs(f.messagePayload,y);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,v)}catch{}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new i.TurnStatusReceivedEventArgs(p.textBody))}catch{}break;default:r.Events.instance.onEvent(new r.BackgroundEvent(`Unexpected response of type ${d.messageType}. Ignoring.`));break}}onEvent(p){this.privEvents.onEvent(p),r.Events.instance.onEvent(p)}addKeywordContextData(){const p=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(p===void 0)return;const d=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),h=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),f=p.split(";"),m=d===void 0?[]:d.split(";"),y=h===void 0?[]:h.split(";"),v=[];for(let g=0;g<f.length;g++){const S={};S.text=f[g],g<m.length&&(S.offset=Number(m[g])),g<y.length&&(S.duration=Number(y[g])),v.push(S)}this.speechContext.setSection("invocationSource","VoiceActivationWithKeyword"),this.speechContext.setSection("keywordDetection",[{clientDetectedKeywords:v,onReject:{action:"EndOfTurn"},type:"startTrigger"}])}};return As.DialogServiceAdapter=u,As}var _u={};Object.defineProperty(_u,"__esModule",{value:!0});_u.AgentConfig=void 0;class V_{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(e){this.iPrivConfig=e}}_u.AgentConfig=V_;var Il={},ks={},Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.ConversationConnectionConfig=void 0;const W_=qo;class Oe extends W_.RestConfigBase{static get host(){return Oe.privHost}static get apiVersion(){return Oe.privApiVersion}static get clientAppId(){return Oe.privClientAppId}static get defaultLanguageCode(){return Oe.privDefaultLanguageCode}static get restPath(){return Oe.privRestPath}static get webSocketPath(){return Oe.privWebSocketPath}static get transcriptionEventKeys(){return Oe.privTranscriptionEventKeys}}Kn.ConversationConnectionConfig=Oe;Oe.privHost="dev.microsofttranslator.com";Oe.privRestPath="/capito/room";Oe.privApiVersion="2.0";Oe.privDefaultLanguageCode="en-US";Oe.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15";Oe.privWebSocketPath="/capito/translate";Oe.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"];var Mg;function H_(){if(Mg)return ks;Mg=1,Object.defineProperty(ks,"__esModule",{value:!0}),ks.ConversationManager=void 0;const t=fe(),e=z,r=I(),n=Kn;let i=class{constructor(){this.privRequestParams=n.ConversationConnectionConfig.configParams,this.privErrors=n.ConversationConnectionConfig.restErrors,this.privHost=n.ConversationConnectionConfig.host,this.privApiVersion=n.ConversationConnectionConfig.apiVersion,this.privRestPath=n.ConversationConnectionConfig.restPath,this.privRestAdapter=new t.RestMessageAdapter({})}createOrJoin(a,o,c,u){try{e.Contracts.throwIfNullOrUndefined(a,"args");const l=a.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,n.ConversationConnectionConfig.defaultLanguageCode),p=a.getProperty(r.PropertyId.ConversationTranslator_Name,"conversation_host"),d=a.getProperty(r.PropertyId.ConversationTranslator_Host,this.privHost),h=a.getProperty(r.PropertyId.ConversationTranslator_CorrelationId),f=a.getProperty(r.PropertyId.SpeechServiceConnection_Key),m=a.getProperty(r.PropertyId.SpeechServiceConnection_Region),y=a.getProperty(r.PropertyId.SpeechServiceAuthorization_Token);e.Contracts.throwIfNullOrWhitespace(l,"languageCode"),e.Contracts.throwIfNullOrWhitespace(p,"nickname"),e.Contracts.throwIfNullOrWhitespace(d,"endpointHost");const v={};v[this.privRequestParams.apiVersion]=this.privApiVersion,v[this.privRequestParams.languageCode]=l,v[this.privRequestParams.nickname]=p;const g={};h&&(g[this.privRequestParams.correlationId]=h),g[this.privRequestParams.clientAppId]=n.ConversationConnectionConfig.clientAppId,o!==void 0?v[this.privRequestParams.roomId]=o:(e.Contracts.throwIfNullOrUndefined(m,this.privErrors.authInvalidSubscriptionRegion),g[this.privRequestParams.subscriptionRegion]=m,f?g[this.privRequestParams.subscriptionKey]=f:y?g[this.privRequestParams.authorization]=`Bearer ${y}`:e.Contracts.throwIfNullOrUndefined(f,this.privErrors.authInvalidSubscriptionKey));const S={};S.headers=g,this.privRestAdapter.options=S;const C=`https://${d}${this.privRestPath}`;this.privRestAdapter.request(t.RestRequestType.Post,C,v,null).then(P=>{const R=t.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,P.headers);if(!P.ok){if(u){let E=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",P.status.toString()),N;try{N=JSON.parse(P.data),E+=` [${N.error.code}: ${N.error.message}]`}catch{E+=` [${P.data}]`}R&&(E+=` ${R}`),u(E)}return}const w=JSON.parse(P.data);if(w&&(w.requestId=R),c){try{c(w)}catch(E){u&&u(E)}c=void 0}}).catch(()=>{})}catch(l){if(u)if(l instanceof Error){const p=l;u(p.name+": "+p.message)}else u(l)}}leave(a,o){return new Promise((c,u)=>{try{e.Contracts.throwIfNullOrUndefined(a,this.privErrors.invalidArgs.replace("{arg}","config")),e.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","token"));const l=a.getProperty(r.PropertyId.ConversationTranslator_Host,this.privHost),p=a.getProperty(r.PropertyId.ConversationTranslator_CorrelationId),d={};d[this.privRequestParams.apiVersion]=this.privApiVersion,d[this.privRequestParams.sessionToken]=o;const h={};p&&(h[this.privRequestParams.correlationId]=p);const f={};f.headers=h,this.privRestAdapter.options=f;const m=`https://${l}${this.privRestPath}`;this.privRestAdapter.request(t.RestRequestType.Delete,m,d,null).then(y=>{y.ok,c()}).catch(()=>{})}catch(l){if(l instanceof Error){const p=l;u(p.name+": "+p.message)}else u(l)}})}};return ks.ConversationManager=i,ks}var jr={},Os={},Au={},Uo={};Object.defineProperty(Uo,"__esModule",{value:!0});Uo.ConversationConnectionMessage=void 0;const K_=M();class J_ extends K_.ConnectionMessage{constructor(e,r,n,i){super(e,r,n,i);const s=JSON.parse(this.textBody);s.type!==void 0&&(this.privConversationMessageType=s.type)}get conversationMessageType(){return this.privConversationMessageType}}Uo.ConversationConnectionMessage=J_;Object.defineProperty(Au,"__esModule",{value:!0});Au.ConversationWebsocketMessageFormatter=void 0;const xr=M(),bg=Uo;class G_{toConnectionMessage(e){const r=new xr.Deferred;try{if(e.messageType===xr.MessageType.Text){const n=new bg.ConversationConnectionMessage(e.messageType,e.textContent,{},e.id);r.resolve(n)}else e.messageType===xr.MessageType.Binary&&r.resolve(new bg.ConversationConnectionMessage(e.messageType,e.binaryContent,void 0,e.id))}catch(n){r.reject(`Error formatting the message. Error: ${n}`)}return r.promise}fromConnectionMessage(e){const r=new xr.Deferred;try{if(e.messageType===xr.MessageType.Text){const n=`${e.textBody?e.textBody:""}`;r.resolve(new xr.RawWebsocketMessage(xr.MessageType.Text,n,e.id))}}catch(n){r.reject(`Error formatting the message. ${n}`)}return r.promise}}Au.ConversationWebsocketMessageFormatter=G_;var Dg;function Q_(){if(Dg)return Os;Dg=1,Object.defineProperty(Os,"__esModule",{value:!0}),Os.ConversationConnectionFactory=void 0;const t=fe(),e=M(),r=z,n=I(),i=yt(),s=Kn,a=Au;let o=class extends i.ConnectionFactoryBase{create(u,l,p){const d=u.parameters.getProperty(n.PropertyId.ConversationTranslator_Host,s.ConversationConnectionConfig.host),h=u.parameters.getProperty(n.PropertyId.ConversationTranslator_CorrelationId,e.createGuid()),f=`wss://${d}${s.ConversationConnectionConfig.webSocketPath}`,m=u.parameters.getProperty(n.PropertyId.ConversationTranslator_Token,void 0);r.Contracts.throwIfNullOrUndefined(m,"token");const y={};y[s.ConversationConnectionConfig.configParams.apiVersion]=s.ConversationConnectionConfig.apiVersion,y[s.ConversationConnectionConfig.configParams.token]=m,y[s.ConversationConnectionConfig.configParams.correlationId]=h;const v=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(f,y,{},new a.ConversationWebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),v,p)}};return Os.ConversationConnectionFactory=o,Os}var Ms={},ku={};Object.defineProperty(ku,"__esModule",{value:!0});ku.ConversationRequestSession=void 0;const Tl=M();class Y_{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=e,this.privRequestId=Tl.createNoDashGuid(),this.privRequestCompletionDeferral=new Tl.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(e,r){this.privSessionId=r}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){e!==200&&e===403&&this.onComplete()}onServiceTurnEndResponse(e){e?this.privRequestId=Tl.createNoDashGuid():this.onComplete()}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)await e.detach()}}onComplete(){}}ku.ConversationRequestSession=Y_;var Ne={},Ng;function xC(){if(Ng)return Ne;Ng=1,Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.ConversationReceivedTranslationEventArgs=Ne.ParticipantsListEventArgs=Ne.ParticipantAttributeEventArgs=Ne.ParticipantEventArgs=Ne.LockRoomEventArgs=Ne.MuteAllEventArgs=void 0;const t=I();class e extends t.SessionEventArgs{constructor(c,u){super(u),this.privIsMuted=c}get isMuted(){return this.privIsMuted}}Ne.MuteAllEventArgs=e;class r extends t.SessionEventArgs{constructor(c,u){super(u),this.privIsLocked=c}get isMuted(){return this.privIsLocked}}Ne.LockRoomEventArgs=r;class n extends t.SessionEventArgs{constructor(c,u){super(u),this.privParticipant=c}get participant(){return this.privParticipant}}Ne.ParticipantEventArgs=n;class i extends t.SessionEventArgs{constructor(c,u,l,p){super(p),this.privKey=u,this.privValue=l,this.privParticipantId=c}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}Ne.ParticipantAttributeEventArgs=i;class s extends t.SessionEventArgs{constructor(c,u,l,p,d,h,f,m,y){super(y),this.privRoomId=c,this.privSessionToken=u,this.privTranslateTo=l,this.privProfanityFilter=p,this.privRoomProfanityFilter=d,this.privIsRoomLocked=h,this.privIsRoomLocked=f,this.privParticipants=m}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}Ne.ParticipantsListEventArgs=s;class a{constructor(c,u,l){this.privPayload=u,this.privCommand=c,this.privSessionId=l}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}return Ne.ConversationReceivedTranslationEventArgs=a,Ne}var qt={};Object.defineProperty(qt,"__esModule",{value:!0});qt.ConversationTranslatorCommandTypes=qt.ConversationTranslatorMessageTypes=qt.InternalParticipants=void 0;class X_{constructor(e=[],r){this.participants=e,this.meId=r}addOrUpdateParticipant(e){if(e===void 0)return;const r=this.getParticipantIndex(e.id);return r>-1?this.participants.splice(r,1,e):this.participants.push(e),this.getParticipant(e.id)}getParticipantIndex(e){return this.participants.findIndex(r=>r.id===e)}getParticipant(e){return this.participants.find(r=>r.id===e)}deleteParticipant(e){this.participants=this.participants.filter(r=>r.id!==e)}get host(){return this.participants.find(e=>e.isHost===!0)}get me(){return this.getParticipant(this.meId)}}qt.InternalParticipants=X_;qt.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"};qt.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"};var BC={},Ou={};Object.defineProperty(Ou,"__esModule",{value:!0});Ou.CommandResponsePayload=void 0;const Z_=t=>JSON.parse(t);class Wd{constructor(e){this.privCommandResponse=Z_(e)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(e){return new Wd(e)}}Ou.CommandResponsePayload=Wd;var Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.ParticipantPayloadResponse=Bn.ParticipantsListPayloadResponse=void 0;const eA=t=>JSON.parse(t),tA=t=>JSON.parse(t);class Hd{constructor(e){this.privParticipantsPayloadResponse=eA(e)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(e){return new Hd(e)}}Bn.ParticipantsListPayloadResponse=Hd;class Kd{constructor(e){this.privParticipantPayloadResponse=tA(e)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(e){return new Kd(e)}}Bn.ParticipantPayloadResponse=Kd;var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.TextResponsePayload=Fn.SpeechResponsePayload=void 0;const rA=t=>JSON.parse(t),nA=t=>JSON.parse(t);class Jd{constructor(e){this.privSpeechResponse=rA(e)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return this.privSpeechResponse.type==="final"}static fromJSON(e){return new Jd(e)}}Fn.SpeechResponsePayload=Jd;class Gd{constructor(e){this.privTextResponse=nA(e)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(e){return new Gd(e)}}Fn.TextResponsePayload=Gd;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Ou;Object.defineProperty(t,"CommandResponsePayload",{enumerable:!0,get:function(){return e.CommandResponsePayload}});var r=Bn;Object.defineProperty(t,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return r.ParticipantsListPayloadResponse}}),Object.defineProperty(t,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return r.ParticipantPayloadResponse}});var n=Fn;Object.defineProperty(t,"SpeechResponsePayload",{enumerable:!0,get:function(){return n.SpeechResponsePayload}}),Object.defineProperty(t,"TextResponsePayload",{enumerable:!0,get:function(){return n.TextResponsePayload}})})(BC);var zg;function iA(){if(zg)return Ms;zg=1,Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.ConversationServiceAdapter=void 0;const t=M(),e=I(),r=k(),n=Uo,i=ku,s=xC(),a=qt,o=BC;let c=class extends r.ServiceRecognizerBase{constructor(l,p,d,h,f){super(l,p,d,h,f),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=f,this.privConversationAuthentication=l,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=m=>this.conversationConnectImpl(m),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new i.ConversationRequestSession(t.createNoDashGuid()),this.privConversationConnectionFactory=p,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}async dispose(l){this.privConversationIsDisposed=!0,this.privConnectionConfigPromise!==void 0&&await(await this.privConnectionConfigPromise).dispose(l),await super.dispose(l)}async sendMessage(l){return(await this.fetchConnection()).send(new n.ConversationConnectionMessage(t.MessageType.Text,l))}async sendMessageAsync(l){await(await this.fetchConnection()).send(new n.ConversationConnectionMessage(t.MessageType.Text,l))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,e.CancellationReason.Error,e.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}async processTypeSpecificMessages(){return!0}cancelRecognition(l,p,d,h,f){this.terminateMessageLoop=!0;const m=new e.ConversationTranslationCanceledEventArgs(d,f,h,void 0,l);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,m)}catch{}}async conversationConnectImpl(l){return this.privConnectionLoop=this.startMessageLoop(),l}async receiveConversationMessageOverride(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const l=new t.Deferred;try{const d=await(await this.fetchConnection()).read();if(this.isDisposed()||this.terminateMessageLoop)return l.resolve(),Promise.resolve();if(!d)return this.receiveConversationMessageOverride();const h=this.privConversationRequestSession.sessionId,f=d.conversationMessageType.toLowerCase();let m=!1;try{switch(f){case"info":case"participant_command":case"command":const y=o.CommandResponsePayload.fromJSON(d.textBody);switch(y.command.toLowerCase()){case"participantlist":const R=o.ParticipantsListPayloadResponse.fromJSON(d.textBody),w=R.participants.map(ie=>({avatar:ie.avatar,displayName:ie.nickname,id:ie.participantId,isHost:ie.ishost,isMuted:ie.ismuted,isUsingTts:ie.usetts,preferredLanguage:ie.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new s.ParticipantsListEventArgs(R.roomid,R.token,R.translateTo,R.profanityFilter,R.roomProfanityFilter,R.roomLocked,R.muteAll,w,h));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.setTranslateToLanguages,y.value,h));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.setProfanityFiltering,y.value,h));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.setMute,y.value,h));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new s.MuteAllEventArgs(y.value,h));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new e.ConversationExpirationEventArgs(y.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.setUseTTS,y.value,h));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new s.LockRoomEventArgs(y.value,h));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.changeNickname,y.value,h));break;case"joinsession":const E=o.ParticipantPayloadResponse.fromJSON(d.textBody),N={avatar:E.avatar,displayName:E.nickname,id:E.participantId,isHost:E.ishost,isMuted:E.ismuted,isUsingTts:E.usetts,preferredLanguage:E.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new s.ParticipantEventArgs(N,h));break;case"leavesession":const O={id:y.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new s.ParticipantEventArgs(O,h));break;case"disconnectsession":const W={id:y.participantId};break;case"token":const ct=new r.CognitiveTokenAuthentication(()=>{const ie=y.token;return Promise.resolve(ie)},()=>{const ie=y.token;return Promise.resolve(ie)});this.authentication=ct,this.privConversationServiceConnector.onToken(ct);break;default:break}break;case"partial":case"final":const v=o.SpeechResponsePayload.fromJSON(d.textBody),g=f==="final"?e.ResultReason.TranslatedParticipantSpeech:e.ResultReason.TranslatingParticipantSpeech,S=new e.ConversationTranslationResult(v.participantId,this.getTranslations(v.translations),v.language,v.id,g,v.recognition,void 0,void 0,d.textBody,void 0);v.isFinal?((S.text!==void 0&&S.text.length>0||v.id===this.privLastPartialUtteranceId)&&(m=!0),m&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.final,S,h))):S.text!==void 0&&(this.privLastPartialUtteranceId=v.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.partial,S,h)));break;case"translated_message":const C=o.TextResponsePayload.fromJSON(d.textBody),P=new e.ConversationTranslationResult(C.participantId,this.getTranslations(C.translations),C.language,void 0,void 0,C.originalText,void 0,void 0,void 0,d.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.instantMessage,P,h));break;default:break}}catch{}return this.receiveConversationMessageOverride()}catch{this.terminateMessageLoop=!0}return l.promise}async startMessageLoop(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const l=this.receiveConversationMessageOverride();try{return await l}catch(p){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",e.CancellationReason.Error,e.CancellationErrorCode.RuntimeError,p),null}}configConnection(){return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise!==void 0?this.privConnectionConfigPromise.then(l=>l.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(l=>l),this.privConnectionConfigPromise)}getTranslations(l){let p;if(l!==void 0){p=new e.Translations;for(const d of l)p.set(d.lang,d.translation)}return p}};return Ms.ConversationServiceAdapter=c,Ms}var Lg;function sA(){if(Lg)return jr;Lg=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.ConversationTranslatorRecognizer=jr.ConversationRecognizerFactory=void 0;const t=k(),e=M(),r=z,n=I(),i=Q_(),s=iA();class a{static fromConfig(u,l,p){return new o(u,l,p)}}jr.ConversationRecognizerFactory=a;let o=class extends n.Recognizer{constructor(u,l,p){const d=l;r.Contracts.throwIfNull(d,"speechConfig");const h=u;r.Contracts.throwIfNull(h,"conversationImpl"),super(p,d.properties,new i.ConversationConnectionFactory),this.privConversation=h,this.privIsDisposed=!1,this.privProperties=d.properties.clone(),this.privConnection=n.Connection.fromRecognizer(this),this.privProperties.getProperty(n.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?(this.privSetTimeout=e.Timeout.setTimeout,this.privClearTimeout=e.Timeout.clearTimeout):typeof window<"u"?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(u){this.privConnection.connected=u}set disconnected(u){this.privConnection.disconnected=u}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(u,l,p){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfNullOrWhitespace(u,"token"),this.privReco.conversationTranslatorToken=u,this.resetConversationTimeout(),this.privReco.connectAsync(l,p)}catch(d){if(p)if(d instanceof Error){const h=d;p(h.name+": "+h.message)}else p(d)}}disconnect(u,l){try{r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{u&&u()},p=>{l&&l(p)})}catch(p){if(l)if(p instanceof Error){const d=p;l(d.name+": "+d.message)}else l(p);this.dispose(!0).catch(d=>{e.Events.instance.onEvent(new e.BackgroundEvent(d))})}}sendRequest(u,l,p){try{r.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(u,l,p)}catch(d){if(p)if(d instanceof Error){const h=d;p(h.name+": "+h.message)}else p(d);this.dispose(!0).catch(h=>{e.Events.instance.onEvent(new e.BackgroundEvent(h))})}}onToken(u){this.privConversation.onToken(u)}async close(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,await this.dispose(!0))}async dispose(u){this.privIsDisposed||u&&(this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),await super.dispose(u))}createRecognizerConfig(u){return new t.RecognizerConfig(u,this.privProperties)}createServiceRecognizer(u,l,p,d){const h=p;return new s.ConversationServiceAdapter(u,l,h,d,this)}sendMessage(u,l,p){const d=this.privReco;((f,m,y)=>{f!==void 0?f.then(()=>{try{m&&m()}catch(v){y&&y(`'Unhandled error on promise callback: ${v}'`)}},v=>{try{y&&y(v)}catch{}}):y&&y("Null promise")})(d.sendMessageAsync(u),l,p),this.resetConversationTimeout()}resetConversationTimeout(){this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}};return jr.ConversationTranslatorRecognizer=o,jr}var bs={},jg;function oA(){if(jg)return bs;jg=1,Object.defineProperty(bs,"__esModule",{value:!0}),bs.TranscriberRecognizer=void 0;const t=M(),e=z,r=I(),n=k();let i=class extends r.Recognizer{constructor(a,o){const c=a;e.Contracts.throwIfNull(c,"speechTranslationConfig");const u=o;e.Contracts.throwIfNull(u,"audioConfigImpl"),e.Contracts.throwIfNullOrWhitespace(c.speechRecognitionLanguage,r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),super(o,c.properties,new n.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return e.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){e.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}set conversation(a){e.Contracts.throwIfNullOrUndefined(a,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=a}getConversationInfo(){return e.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(a){e.Contracts.throwIfNullOrUndefined(a,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=a}getMeetingInfo(){return e.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(a,o){t.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(n.RecognitionMode.Conversation),a,o)}stopContinuousRecognitionAsync(a,o){t.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,o)}async close(){this.privDisposedRecognizer||await this.dispose(!0)}async pushConversationEvent(a,o){const c=this.privReco;e.Contracts.throwIfNullOrUndefined(c,"serviceRecognizer"),await c.sendSpeechEventAsync(a,o)}async pushMeetingEvent(a,o){const c=this.privReco;e.Contracts.throwIfNullOrUndefined(c,"serviceRecognizer"),await c.sendMeetingSpeechEventAsync(a,o)}async enforceAudioGating(){const c=(await this.audioConfig.format).channels;if(c===1){if(this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()!=="true")throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(c!==8)throw new Error(`Unsupported audio configuration: Detected ${c}-channel audio`)}connectMeetingCallbacks(a){this.isMeetingRecognizer=!0,this.canceled=(o,c)=>{a.canceled&&a.canceled(a,c)},this.recognizing=(o,c)=>{a.transcribing&&a.transcribing(a,c)},this.recognized=(o,c)=>{a.transcribed&&a.transcribed(a,c)},this.sessionStarted=(o,c)=>{a.sessionStarted&&a.sessionStarted(a,c)},this.sessionStopped=(o,c)=>{a.sessionStopped&&a.sessionStopped(a,c)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}async dispose(a){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(a))}createRecognizerConfig(a){return new n.RecognizerConfig(a,this.properties)}createServiceRecognizer(a,o,c,u){const l=c;return new n.TranscriptionServiceRecognizer(a,o,l,u,this)}};return bs.TranscriberRecognizer=i,bs}var xg;function aA(){return xg||(xg=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=H_();Object.defineProperty(t,"ConversationManager",{enumerable:!0,get:function(){return e.ConversationManager}});var r=Kn;Object.defineProperty(t,"ConversationConnectionConfig",{enumerable:!0,get:function(){return r.ConversationConnectionConfig}});var n=sA();Object.defineProperty(t,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return n.ConversationRecognizerFactory}});var i=oA();Object.defineProperty(t,"TranscriberRecognizer",{enumerable:!0,get:function(){return i.TranscriberRecognizer}});var s=xC();Object.defineProperty(t,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return s.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(t,"LockRoomEventArgs",{enumerable:!0,get:function(){return s.LockRoomEventArgs}}),Object.defineProperty(t,"MuteAllEventArgs",{enumerable:!0,get:function(){return s.MuteAllEventArgs}}),Object.defineProperty(t,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return s.ParticipantAttributeEventArgs}}),Object.defineProperty(t,"ParticipantEventArgs",{enumerable:!0,get:function(){return s.ParticipantEventArgs}}),Object.defineProperty(t,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return s.ParticipantsListEventArgs}});var a=qt;Object.defineProperty(t,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorCommandTypes}}),Object.defineProperty(t,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorMessageTypes}}),Object.defineProperty(t,"InternalParticipants",{enumerable:!0,get:function(){return a.InternalParticipants}})}(Il)),Il}var Qd={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisAudioMetadata=t.MetadataType=void 0,function(r){r.WordBoundary="WordBoundary",r.Bookmark="Bookmark",r.Viseme="Viseme",r.SentenceBoundary="SentenceBoundary",r.SessionEnd="SessionEnd",r.AvatarSignal="TalkingAvatarSignal"}(t.MetadataType||(t.MetadataType={}));class e{constructor(n){this.privSynthesisAudioMetadata=JSON.parse(n)}static fromJSON(n){return new e(n)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}t.SynthesisAudioMetadata=e})(Qd);var Ds={},It={};Object.defineProperty(It,"__esModule",{value:!0});It.SynthesisStartedEvent=It.ConnectingToSynthesisServiceEvent=It.SynthesisTriggeredEvent=It.SpeechSynthesisEvent=void 0;const Bg=M();class Mu extends Bg.PlatformEvent{constructor(e,r,n=Bg.EventType.Info){super(e,n),this.privRequestId=r}get requestId(){return this.privRequestId}}It.SpeechSynthesisEvent=Mu;class cA extends Mu{constructor(e,r,n){super("SynthesisTriggeredEvent",e),this.privSessionAudioDestinationId=r,this.privTurnAudioDestinationId=n}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}It.SynthesisTriggeredEvent=cA;class uA extends Mu{constructor(e,r){super("ConnectingToSynthesisServiceEvent",e),this.privAuthFetchEventId=r}get authFetchEventId(){return this.privAuthFetchEventId}}It.ConnectingToSynthesisServiceEvent=uA;class lA extends Mu{constructor(e,r){super("SynthesisStartedEvent",e),this.privAuthFetchEventId=r}get authFetchEventId(){return this.privAuthFetchEventId}}It.SynthesisStartedEvent=lA;var Fg;function pA(){if(Fg)return Ds;Fg=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.SynthesisTurn=void 0;const t=M(),e=me,r=I(),n=Qd,i=It;let s=class Ap{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=t.createNoDashGuid(),this.privTurnDeferral=new t.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(o){this.privStreamId=o}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(o){this.privAudioOutputFormat=o}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){const o=new r.PropertyCollection;return o.setProperty(r.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),o}}async getAllReceivedAudio(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(await this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}async getAllReceivedAudioWithHeader(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const o=await this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(o),this.privReceivedAudioWithHeader}else return this.getAllReceivedAudio()}startNewSynthesis(o,c,u,l){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=o,this.privRawText=c,this.privIsSSML=u,this.privAudioOutputStream=new e.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",l!==void 0&&(this.privTurnAudioDestination=l,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new i.SynthesisTriggeredEvent(this.requestId,void 0,l===void 0?void 0:l.id()))}onPreConnectionStart(o){this.privAuthFetchEventId=o,this.onEvent(new i.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(o){o&&this.onComplete()}onConnectionEstablishCompleted(o){if(o===200){this.onEvent(new i.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),this.privBytesReceived=0;return}else o===403&&this.onComplete()}onServiceResponseMessage(o){const c=JSON.parse(o);this.streamId=c.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(o){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new t.Deferred;const c=JSON.parse(o);c.webrtc&&(this.privWebRTCSDP=c.webrtc.connectionString)}onAudioChunkReceived(o){this.isSynthesizing&&(this.privAudioOutputStream.write(o),this.privBytesReceived+=o.byteLength,this.privTurnAudioDestination!==void 0&&this.privTurnAudioDestination.write(o))}onTextBoundaryEvent(o){this.updateTextOffset(o.Data.text.Text,o.Type)}onVisemeMetadataReceived(o){o.Data.AnimationChunk!==void 0&&(this.privPartialVisemeAnimation+=o.Data.AnimationChunk)}onSessionEnd(o){this.privAudioDuration=o.Data.Offset}async constructSynthesisResult(){const o=await this.getAllReceivedAudioWithHeader();return new r.SpeechSynthesisResult(this.requestId,r.ResultReason.SynthesizingAudioCompleted,o,void 0,this.extraProperties,this.audioDuration)}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const o=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",o}onEvent(o){t.Events.instance.onEvent(o)}static isXmlTag(o){return o.length>=2&&o[0]==="<"&&o[o.length-1]===">"}updateTextOffset(o,c){c===n.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(o,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+o.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!Ap.isXmlTag(o)&&this.updateTextOffset(o,c))):(this.privSentenceOffset=this.privRawText.indexOf(o,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+o.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!Ap.isXmlTag(o)&&this.updateTextOffset(o,c)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,this.privTurnAudioDestination!==void 0&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}async readAllAudioFromStream(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{await this.privAudioOutputStream.read(this.privReceivedAudio)}catch{this.privReceivedAudio=new ArrayBuffer(0)}}}withinXmlTag(o){return this.privRawText.indexOf("<",o+1)>this.privRawText.indexOf(">",o+1)}};return Ds.SynthesisTurn=s,Ds}var Ns={},qg;function dA(){if(qg)return Ns;qg=1,Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.SynthesisAdapterBase=void 0;const t=M(),e=I(),r=k(),n=Kt;let i=class{constructor(a,o,c,u){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!a)throw new t.ArgumentNullError("authentication");if(!o)throw new t.ArgumentNullError("connectionFactory");if(!c)throw new t.ArgumentNullError("synthesizerConfig");this.privAuthentication=a,this.privConnectionFactory=o,this.privSynthesizerConfig=c,this.privIsDisposed=!1,this.privSessionAudioDestination=u,this.privSynthesisTurn=new r.SynthesisTurn,this.privConnectionEvents=new t.EventSource,this.privServiceEvents=new t.EventSource,this.privSynthesisContext=new r.SynthesisContext,this.privAgentConfig=new r.AgentConfig,this.connectionEvents.attach(l=>{if(l.name==="ConnectionClosedEvent"){const p=l;p.statusCode!==1e3&&this.cancelSynthesisLocal(e.CancellationReason.Error,p.statusCode===1007?e.CancellationErrorCode.BadRequestParameters:e.CancellationErrorCode.ConnectionFailure,`${p.reason} websocket error code: ${p.statusCode}`)}})}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(a){this.privActivityTemplate=a}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(a){this.privAudioOutputFormat=a,this.privSynthesisTurn.audioOutputFormat=a,this.privSessionAudioDestination!==void 0&&(this.privSessionAudioDestination.format=a),this.synthesisContext!==void 0&&(this.synthesisContext.audioOutputFormat=a)}isDisposed(){return this.privIsDisposed}async dispose(a){this.privIsDisposed=!0,this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise!==void 0&&await(await this.privConnectionConfigurationPromise).dispose(a)}async connect(){await this.connectImpl()}async sendNetworkMessage(a,o){const c=typeof o=="string"?t.MessageType.Text:t.MessageType.Binary,u=typeof o=="string"?"application/json":"";return(await this.fetchConnection()).send(new n.SpeechConnectionMessage(c,a,this.privSynthesisTurn.requestId,u,o))}async Speak(a,o,c,u,l,p){let d;if(o?d=a:d=this.privSynthesizer.buildSsml(a),this.speakOverride!==void 0)return this.speakOverride(d,c,u,l);this.privSuccessCallback=u,this.privErrorCallback=l,this.privSynthesisTurn.startNewSynthesis(c,a,o,p);try{await this.connectImpl();const h=await this.fetchConnection();await this.sendSynthesisContext(h),await this.sendSsmlMessage(h,d,c),this.onSynthesisStarted(c),this.receiveMessage()}catch(h){return this.cancelSynthesisLocal(e.CancellationReason.Error,e.CancellationErrorCode.ConnectionFailure,h),Promise.reject(h)}}async stopSpeaking(){return await this.connectImpl(),(await this.fetchConnection()).send(new n.SpeechConnectionMessage(t.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))}cancelSynthesis(a,o,c,u){const l=new e.PropertyCollection;l.setProperty(r.CancellationErrorCodePropertyName,e.CancellationErrorCode[c]);const p=new e.SpeechSynthesisResult(a,e.ResultReason.Canceled,void 0,u,l);if(this.onSynthesisCancelled(p),this.privSuccessCallback)try{this.privSuccessCallback(p)}catch{}}cancelSynthesisLocal(a,o,c){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,a,o,c))}processTypeSpecificMessages(a){return!0}async receiveMessage(){try{const o=await(await this.fetchConnection()).read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!o)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const c=n.SpeechConnectionMessage.fromConnectionMessage(o);if(c.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(c.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(c.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(c.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===c.streamId.toLowerCase()&&c.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(c.binaryBody),this.onSynthesizing(c.binaryBody),this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.write(c.binaryBody));break;case"audio.metadata":const u=r.SynthesisAudioMetadata.fromJSON(c.textBody).Metadata;for(const p of u)switch(p.Type){case r.MetadataType.WordBoundary:case r.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(p);const d=new e.SpeechSynthesisWordBoundaryEventArgs(p.Data.Offset,p.Data.Duration,p.Data.text.Text,p.Data.text.Length,p.Type===r.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,p.Data.text.BoundaryType);this.onWordBoundary(d);break;case r.MetadataType.Bookmark:const h=new e.SpeechSynthesisBookmarkEventArgs(p.Data.Offset,p.Data.Bookmark);this.onBookmarkReached(h);break;case r.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(p),p.Data.IsLastAnimation){const f=new e.SpeechSynthesisVisemeEventArgs(p.Data.Offset,p.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(f)}break;case r.MetadataType.AvatarSignal:this.onAvatarEvent(p);break;case r.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(p);break}break;case"turn.end":this.privSynthesisTurn.onServiceTurnEndResponse();let l;try{l=await this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(l)}catch(p){this.privErrorCallback&&this.privErrorCallback(p)}this.onSynthesisCompleted(l);break;default:this.processTypeSpecificMessages(c)||this.privServiceEvents&&this.serviceEvents.onEvent(new t.ServiceEvent(c.path.toLowerCase(),c.textBody))}return this.receiveMessage()}catch{}}sendSynthesisContext(a){this.setSynthesisContextSynthesisSection();const o=this.synthesisContext.toJSON();if(o)return a.send(new n.SpeechConnectionMessage(t.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",o))}setSpeechConfigSynthesisSection(){}connectImpl(a=!1){if(this.privConnectionPromise!=null)return this.privConnectionPromise.then(c=>c.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=t.createNoDashGuid(),this.privConnectionId=t.createNoDashGuid(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const o=a?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=o.then(async c=>{this.privSynthesisTurn.onAuthCompleted(!1);const u=this.privConnectionFactory.create(this.privSynthesizerConfig,c,this.privConnectionId);u.events.attach(p=>{this.connectionEvents.onEvent(p)});const l=await u.open();return l.statusCode===200?(this.privSynthesisTurn.onConnectionEstablishCompleted(l.statusCode),Promise.resolve(u)):l.statusCode===403&&!a?this.connectImpl(!0):(this.privSynthesisTurn.onConnectionEstablishCompleted(l.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${l.statusCode},
                    ${this.privSynthesizerConfig.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Url)} Reason: ${l.reason}`))},c=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(c)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(a,o){if(o)return a.send(new n.SpeechConnectionMessage(t.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",o))}sendSsmlMessage(a,o,c){return a.send(new n.SpeechConnectionMessage(t.MessageType.Text,"ssml",c,"application/ssml+xml",o))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(a=>a.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async configureConnection(){const a=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(a):(this.setSpeechConfigSynthesisSection(),await this.sendSpeechServiceConfig(a,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),a)}onAvatarEvent(a){}onSynthesisStarted(a){}onSynthesizing(a){}onSynthesisCancelled(a){}onSynthesisCompleted(a){}onWordBoundary(a){}onVisemeReceived(a){}onBookmarkReached(a){}};return Ns.SynthesisAdapterBase=i,i.telemetryDataEnabled=!0,Ns}var zs={},Ug;function hA(){if(Ug)return zs;Ug=1,Object.defineProperty(zs,"__esModule",{value:!0}),zs.AvatarSynthesisAdapter=void 0;const t=I(),e=k();let r=class extends e.SynthesisAdapterBase{constructor(i,s,a,o,c){super(i,s,a,void 0),this.privAvatarSynthesizer=o,this.privSynthesizer=o,this.privAvatarConfig=c}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){var i,s,a,o,c,u,l,p,d,h,f,m,y,v,g,S,C;this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:(i=this.privAvatarConfig.videoFormat)==null?void 0:i.bitrate,codec:(s=this.privAvatarConfig.videoFormat)==null?void 0:s.codec,crop:{bottomRight:{x:(c=(o=(a=this.privAvatarConfig.videoFormat)==null?void 0:a.cropRange)==null?void 0:o.bottomRight)==null?void 0:c.x,y:(p=(l=(u=this.privAvatarConfig.videoFormat)==null?void 0:u.cropRange)==null?void 0:l.bottomRight)==null?void 0:p.y},topLeft:{x:(f=(h=(d=this.privAvatarConfig.videoFormat)==null?void 0:d.cropRange)==null?void 0:h.topLeft)==null?void 0:f.x,y:(v=(y=(m=this.privAvatarConfig.videoFormat)==null?void 0:m.cropRange)==null?void 0:y.topLeft)==null?void 0:v.y}},resolution:{height:(g=this.privAvatarConfig.videoFormat)==null?void 0:g.height,width:(S=this.privAvatarConfig.videoFormat)==null?void 0:S.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(t.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarConfig.remoteIceServers??this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor,image:{url:(C=this.privAvatarConfig.backgroundImage)==null?void 0:C.toString()}},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style}}}onAvatarEvent(i){if(this.privAvatarSynthesizer.avatarEventReceived){const s=new t.AvatarEventArgs(i.Data.Offset,i.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,s)}catch{}}}};return zs.AvatarSynthesisAdapter=r,zs}var Ls={},$g;function fA(){if($g)return Ls;$g=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.SpeechSynthesisAdapter=void 0;const t=I(),e=k();let r=class extends e.SynthesisAdapterBase{constructor(i,s,a,o,c){super(i,s,a,c),this.privSpeechSynthesizer=o,this.privSynthesizer=o}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(i){const s=new t.SpeechSynthesisEventArgs(new t.SpeechSynthesisResult(i,t.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,s)}onSynthesizing(i){if(this.privSpeechSynthesizer.synthesizing)try{const s=this.privSynthesisTurn.audioOutputFormat.addHeader(i),a=new t.SpeechSynthesisEventArgs(new t.SpeechSynthesisResult(this.privSynthesisTurn.requestId,t.ResultReason.SynthesizingAudio,s));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,a)}catch{}}onSynthesisCancelled(i){if(this.privSpeechSynthesizer.SynthesisCanceled){const s=new t.SpeechSynthesisEventArgs(i);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,s)}catch{}}}onSynthesisCompleted(i){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new t.SpeechSynthesisEventArgs(i))}catch{}}onWordBoundary(i){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,i)}catch{}}onVisemeReceived(i){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,i)}catch{}}onBookmarkReached(i){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,i)}catch{}}};return Ls.SpeechSynthesisAdapter=r,Ls}var js={},Vg;function vA(){if(Vg)return js;Vg=1,Object.defineProperty(js,"__esModule",{value:!0}),js.SynthesisRestAdapter=void 0;const t=fe(),e=I(),r=yt(),n=he;let i=class{constructor(a,o){let c=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!c){const l=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,"westus"),p=r.ConnectionFactoryBase.getHostSuffix(l);c=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,`https://${l}.tts.speech${p}`)}this.privUri=`${c}/cognitiveservices/voices/list`;const u=t.RestConfigBase.requestOptions;this.privRestAdapter=new t.RestMessageAdapter(u),this.privAuthentication=o}getVoicesList(a){return this.privRestAdapter.setHeaders(n.HeaderNames.ConnectionId,a),this.privAuthentication.fetch(a).then(o=>(this.privRestAdapter.setHeaders(o.headerName,o.token),this.privRestAdapter.request(t.RestRequestType.Get,this.privUri)))}};return js.SynthesisRestAdapter=i,js}var _l={},Wg;function gA(){return Wg||(Wg=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesizerConfig=t.SynthesisServiceType=void 0;const e=k();var r;(function(i){i[i.Standard=0]="Standard",i[i.Custom=1]="Custom"})(r=t.SynthesisServiceType||(t.SynthesisServiceType={}));class n{constructor(s,a){this.privSynthesisServiceType=r.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=s||new e.SpeechServiceConfig(new e.Context(null)),this.privParameters=a}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(s){this.privSynthesisServiceType=s}set synthesisVideoSection(s){this.privSpeechServiceConfig.Context.synthesis={video:s}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}}t.SynthesizerConfig=n}(_l)),_l}var xs={},Hg;function mA(){if(Hg)return xs;Hg=1,Object.defineProperty(xs,"__esModule",{value:!0}),xs.SynthesisContext=void 0;const t=I();let e=class{constructor(){this.privContext={}}setSection(n,i){this.privContext[n]=i}set audioOutputFormat(n){this.privAudioOutputFormat=n}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(n){const i=this.buildSynthesisContext(n);this.setSection("synthesis",i)}buildSynthesisContext(n){return{audio:{metadataOptions:{bookmarkEnabled:!!(n!=null&&n.bookmarkReached),punctuationBoundaryEnabled:n==null?void 0:n.properties.getProperty(t.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!(n!=null&&n.wordBoundary)),sentenceBoundaryEnabled:n==null?void 0:n.properties.getProperty(t.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!(n!=null&&n.visemeReceived),wordBoundaryEnabled:n==null?void 0:n.properties.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!(n!=null&&n.wordBoundary))},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:n==null?void 0:n.autoDetectSourceLanguage}}}};return xs.SynthesisContext=e,xs}var Bs={},Kg;function SA(){if(Kg)return Bs;Kg=1,Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.SpeakerRecognitionConfig=void 0;const t=k();let e=class{constructor(n,i){this.privContext=n||new t.Context(null),this.privParameters=i}get parameters(){return this.privParameters}get Context(){return this.privContext}};return Bs.SpeakerRecognitionConfig=e,Bs}var Fs={},Jg;function yA(){if(Jg)return Fs;Jg=1,Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.SpeakerServiceRecognizer=void 0;const t=fe(),e=M(),r=I(),n=k(),i=Kt;let s=class extends n.ServiceRecognizerBase{constructor(o,c,u,l,p){super(o,c,u,l,p),this.privSpeakerRecognizer=p,this.privSpeakerAudioSource=u,this.recognizeSpeaker=d=>this.recognizeSpeakerOnce(d),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(o){let c=!1;const u=new r.PropertyCollection;switch(o.messageType===e.MessageType.Text&&u.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,o.textBody),o.path.toLowerCase()){case"speaker.response":const p=JSON.parse(o.textBody);let d;p.status.statusCode.toLowerCase()!=="success"?d=new r.SpeakerRecognitionResult(p,r.ResultReason.Canceled,r.CancellationErrorCode.ServiceError,p.status.reason):d=new r.SpeakerRecognitionResult(p,r.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(d),c=!0;break}const l=new e.Deferred;return l.resolve(c),l.promise}cancelRecognition(o,c,u,l,p){if(new r.PropertyCollection().setProperty(n.CancellationErrorCodePropertyName,r.CancellationErrorCode[l]),this.privResultDeferral){const h=new r.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:p,reason:p}},r.ResultReason.Canceled,l,p);try{this.privResultDeferral.resolve(h)}catch(f){this.privResultDeferral.reject(f)}}}async recognizeSpeakerOnce(o){this.privSpeakerModel=o,this.voiceProfileType=o.scenario,this.privResultDeferral||(this.privResultDeferral=new e.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(r.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const c=this.connectImpl(),u=this.sendPreAudioMessages(this.extractSpeakerContext(o)),l=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),p=await this.privSpeakerAudioSource.format,d=await this.privSpeakerAudioSource.deviceInfo,h=new t.ReplayableAudioNode(l,p.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(h,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:d};try{await c,await u}catch(y){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,y)}const f=new r.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,f),this.receiveMessage(),this.sendAudio(h).then(()=>{},y=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,y)}),this.privResultDeferral.promise}async sendPreAudioMessages(o){const c=await this.fetchConnection();await this.sendSpeakerRecognition(c,o)}async sendSpeakerRecognition(o,c){const u=JSON.stringify(c);return o.send(new i.SpeechConnectionMessage(e.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",u))}extractSpeakerContext(o){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:o.profileIds,scenario:o.scenario}}};return Fs.SpeakerServiceRecognizer=s,Fs}var qs={},Gg;function CA(){if(Gg)return qs;Gg=1,Object.defineProperty(qs,"__esModule",{value:!0}),qs.VoiceServiceRecognizer=void 0;const t=fe(),e=M(),r=I(),n=k(),i=Kt;let s=class extends n.ServiceRecognizerBase{constructor(o,c,u,l,p){super(o,c,u,l,p),this.privDeferralMap=new e.DeferralMap,this.privSpeakerAudioSource=u,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(o){this.privSpeakerAudioSource=o}processTypeSpecificMessages(o){let c=!1;const u=new r.PropertyCollection;switch(o.messageType===e.MessageType.Text&&u.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,o.textBody),o.path.toLowerCase()){case"speaker.profiles":const p=JSON.parse(o.textBody);switch(p.operation.toLowerCase()){case"create":this.handleCreateResponse(p,o.requestId);break;case"delete":case"reset":this.handleResultResponse(p,o.requestId);break;case"fetch":const m=JSON.parse(o.textBody);this.handleFetchResponse(m,o.requestId);break}c=!0;break;case"speaker.phrases":const d=JSON.parse(o.textBody);this.handlePhrasesResponse(d,o.requestId),c=!0;break;case"speaker.profile.enrollment":const h=JSON.parse(o.textBody),f=new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(h.enrollment?h.enrollment.enrollmentStatus:h.status.statusCode),h.enrollment?JSON.stringify(h.enrollment):void 0,h.status.reason);this.privDeferralMap.getId(o.requestId)&&this.privDeferralMap.complete(o.requestId,f),this.privRequestSession.onSpeechEnded(),c=!0;break}const l=new e.Deferred;return l.resolve(c),l.promise}cancelRecognition(o,c,u,l,p){new r.PropertyCollection().setProperty(n.CancellationErrorCodePropertyName,r.CancellationErrorCode[l]);const h=new r.VoiceProfileEnrollmentResult(r.ResultReason.Canceled,p,p);this.privDeferralMap.getId(c)&&this.privDeferralMap.complete(c,h)}async createProfile(o,c){this.voiceProfileType=o.toString();const u=this.connectImpl();try{const l=new e.Deferred;return await u,await this.sendCreateProfile(l,o,c),this.receiveMessage(),l.promise}catch(l){throw l}}async resetProfile(o){return this.voiceProfileType=o.profileType.toString(),this.sendCommonRequest("reset",o.profileType,o)}async deleteProfile(o){return this.voiceProfileType=o.profileType.toString(),this.sendCommonRequest("delete",o.profileType,o)}async retrieveEnrollmentResult(o){return this.voiceProfileType=o.profileType.toString(),this.privExpectedProfileId=o.profileId,this.sendCommonRequest("fetch",o.profileType,o)}async getAllProfiles(o){return this.voiceProfileType=o.toString(),this.sendCommonRequest("fetch",o)}async getActivationPhrases(o,c){this.voiceProfileType=o.toString();const u=this.connectImpl();try{const l=new e.Deferred;return await u,await this.sendPhrasesRequest(l,o,c),this.receiveMessage(),l.promise}catch(l){throw l}}async enrollProfile(o){this.voiceProfileType=o.profileType.toString();const c=new e.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(r.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const u=this.connectImpl(),l=this.sendPreAudioMessages(o,c),p=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),d=await this.privSpeakerAudioSource.format,h=await this.privSpeakerAudioSource.deviceInfo,f=new t.ReplayableAudioNode(p,d.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(f,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:h};try{await u,await l}catch(v){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,v)}const m=new r.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,m),this.receiveMessage(),this.sendAudio(f).then(()=>{},v=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,v)}),c.promise}async sendPreAudioMessages(o,c){const u=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,c),await this.sendBaseRequest(u,"enroll",this.scenarioFrom(o.profileType),o)}async sendPhrasesRequest(o,c,u){const l=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,o);const p=this.scenarioFrom(c),d={locale:u,scenario:p};return l.send(new i.SpeechConnectionMessage(e.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(d)))}async sendCreateProfile(o,c,u){const l=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,o);const p=c===r.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":c===r.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification",d={locale:u,number:"1",scenario:p};return l.send(new i.SpeechConnectionMessage(e.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(d)))}async sendCommonRequest(o,c,u=void 0){const l=this.connectImpl();try{const p=new e.Deferred;this.privRequestSession.onSpeechContext(),await l;const d=await this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,p),await this.sendBaseRequest(d,o,this.scenarioFrom(c),u),this.receiveMessage(),p.promise}catch(p){throw p}}async sendBaseRequest(o,c,u,l){const p={scenario:u};return l?p.profileIds=[l.profileId]:p.maxPageSize=-1,o.send(new i.SpeechConnectionMessage(e.MessageType.Text,`speaker.profile.${c}`,this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(p)))}extractSpeakerContext(o){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:o.profileIds,scenario:o.scenario}}handlePhrasesResponse(o,c){if(this.privDeferralMap.getId(c))if(o.status.statusCode.toLowerCase()!=="success"){const u=r.ResultReason.Canceled,l=new r.VoiceProfilePhraseResult(u,o.status.statusCode,o.passPhraseType,[]);this.privDeferralMap.complete(c,l)}else if(o.phrases&&o.phrases.length>0){const u=r.ResultReason.EnrollingVoiceProfile,l=new r.VoiceProfilePhraseResult(u,o.status.statusCode,o.passPhraseType,o.phrases);this.privDeferralMap.complete(c,l)}else throw new Error("Voice Profile get activation phrases failed, no phrases received");else throw new Error(`Voice Profile get activation phrases request for requestID ${c} not found`)}handleCreateResponse(o,c){if(o.profiles&&o.profiles.length>0)if(this.privDeferralMap.getId(c)){const u=o.profiles.map(l=>l.profileId);this.privDeferralMap.complete(c,u)}else throw new Error(`Voice Profile create request for requestID ${c} not found`);else throw new Error("Voice Profile create failed, no profile id received")}handleResultResponse(o,c){if(this.privDeferralMap.getId(c)){const u=o.operation.toLowerCase()==="delete"?r.ResultReason.DeletedVoiceProfile:r.ResultReason.ResetVoiceProfile,l=o.status.statusCode.toLowerCase()==="success"?u:r.ResultReason.Canceled,p=new r.VoiceProfileResult(l,`statusCode: ${o.status.statusCode}, errorDetails: ${o.status.reason}`);this.privDeferralMap.complete(c,p)}else throw new Error(`Voice Profile create request for requestID ${c} not found`)}handleFetchResponse(o,c){if(this.privDeferralMap.getId(c)&&o.profiles[0]){if(this.privExpectedProfileId&&o.profiles.length===1&&o.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;const u=o.profiles[0],l=new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(u.enrollmentStatus),JSON.stringify(u),o.status.reason);this.privDeferralMap.complete(c,l)}else if(o.profiles.length>0){const u=o.profiles,l=[];for(const p of u)l.push(new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(p.enrollmentStatus),JSON.stringify(p),o.status.reason));this.privDeferralMap.complete(c,l)}}else throw new Error(`Voice Profile fetch request for requestID ${c} not found`)}enrollmentReasonFrom(o){switch(o.toLowerCase()){case"enrolled":return r.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return r.ResultReason.Canceled;default:return r.ResultReason.EnrollingVoiceProfile}}scenarioFrom(o){return o===r.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":o===r.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}};return qs.VoiceServiceRecognizer=s,qs}var FC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.type=t.connectivity=t.Device=t.OS=t.System=t.Context=t.SpeechServiceConfig=void 0;class e{constructor(o){this.context=o}serialize(){return JSON.stringify(this,(o,c)=>{if(c&&typeof c=="object"&&!Array.isArray(c)){const u={};for(const l in c)Object.hasOwnProperty.call(c,l)&&(u[l&&l.charAt(0).toLowerCase()+l.substring(1)]=c[l]);return u}return c})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(o){this.recognition=o.toLowerCase()}}t.SpeechServiceConfig=e;class r{constructor(o){this.system=new n,this.os=o}}t.Context=r;class n{constructor(){const o="1.41.0";this.name="SpeechSDK",this.version=o,this.build="JavaScript",this.lang="JavaScript"}}t.System=n;class i{constructor(o,c,u){this.platform=o,this.name=c,this.version=u}}t.OS=i;class s{constructor(o,c,u){this.manufacturer=o,this.model=c,this.version=u}}t.Device=s,function(a){a.Bluetooth="Bluetooth",a.Wired="Wired",a.WiFi="WiFi",a.Cellular="Cellular",a.InBuilt="InBuilt",a.Unknown="Unknown"}(t.connectivity||(t.connectivity={})),function(a){a.Phone="Phone",a.Speaker="Speaker",a.Car="Car",a.Headset="Headset",a.Thermostat="Thermostat",a.Microphones="Microphones",a.Deskphone="Deskphone",a.RemoteControl="RemoteControl",a.Unknown="Unknown",a.File="File",a.Stream="Stream"}(t.type||(t.type={}))})(FC);var Qg;function k(){return Qg||(Qg=1,function(t){var e=q&&q.__createBinding||(Object.create?function(s,a,o,c){c===void 0&&(c=o),Object.defineProperty(s,c,{enumerable:!0,get:function(){return a[o]}})}:function(s,a,o,c){c===void 0&&(c=o),s[c]=a[o]}),r=q&&q.__exportStar||function(s,a){for(var o in s)o!=="default"&&!a.hasOwnProperty(o)&&e(a,s,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDetectSourceLanguagesOpenRangeOptionName=t.ForceDictationPropertyName=t.ServicePropertiesPropertyName=t.CancellationErrorCodePropertyName=t.OutputFormatPropertyName=void 0,r(Sc,t),r(Bc,t),r(Hn,t),r(jy,t),r(xy,t),r(u_(),t),r(l_(),t),r(hu,t),r(p_(),t),r(d_(),t),r(h_(),t),r(MC,t),r(fu,t),r(v_(),t),r(g_(),t),r(m_(),t),r(S_(),t),r(AC(),t),r(y_(),t),r(bC,t),r(C_(),t),r(vu,t),r(E_(),t),r(w_(),t),r(gu,t),r(mu,t),r(Su,t),r(I_(),t),r(T_(),t),r(__(),t),r(A_(),t),r(k_(),t),r(yu,t),r(M_(),t),r(Cu,t),r(LC,t),r(Pu,t),r(Eu,t),r(wu,t),r(jC,t),r($_(),t),r(_u,t),r(aA(),t),r(Qd,t),r(pA(),t),r(dA(),t);var n=hA();Object.defineProperty(t,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return n.AvatarSynthesisAdapter}});var i=fA();Object.defineProperty(t,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return i.SpeechSynthesisAdapter}}),r(vA(),t),r(gA(),t),r(mA(),t),r(SA(),t),r(yA(),t),r(CA(),t),r(FC,t),t.OutputFormatPropertyName="OutputFormat",t.CancellationErrorCodePropertyName="CancellationErrorCode",t.ServicePropertiesPropertyName="ServiceProperties",t.ForceDictationPropertyName="ForceDictation",t.AutoDetectSourceLanguagesOpenRangeOptionName="OpenRange"}(al)),al}(function(t){var e=q&&q.__createBinding||(Object.create?function(i,s,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return s[a]}})}:function(i,s,a,o){o===void 0&&(o=a),i[o]=s[a]}),r=q&&q.__exportStar||function(i,s){for(var a in i)a!=="default"&&!s.hasOwnProperty(a)&&e(s,i,a)};Object.defineProperty(t,"__esModule",{value:!0});const n=k();new n.AgentConfig,r(I(),t)})(Ra);var PA={};const Yg=t=>{const e=PA[t];return e||null};function RA(){async function t(){const r=Ra.SpeechConfig.fromSubscription(Yg("AzureSpeech")??"1UFKL0cnbN2D6Fu5ZyLatbJLvpkZmG2DLrqotnVWGkmedKUcbie4JQQJ99AJAC5RqLJXJ3w3AAAYACOG9cwP",Yg("AzureSpeechRegion")??"westeurope");console.log("AzureSpeech"),r.speechRecognitionLanguage="en-US";const n=Ra.AudioConfig.fromDefaultMicrophoneInput();new Ra.SpeechRecognizer(r,n).recognizeOnceAsync(s=>{const a=document.getElementById("query-field");a&&s.text!=null&&(a.value=s.text.replace(".",""))},s=>{console.error(`Error recognizing speech: ${s}`)})}const e={"--button-hover-background":"var(--example-color-alt)","--button-color":"var(--white)","--button-background":"var(--example-color-alt)","--button-margin-bottom":"0"};return jt.jsx("button",{class:"flat",onClick:()=>t(),style:e,children:jt.jsx("i",{class:"fas fa-microphone fa-fw fa-xl"})})}function EA(){const{t}=E1(),[e,r]=Ue.useState({totalItems:0,totalValue:"$0.00"}),n=(a,o)=>{r({totalItems:parseInt(a,10),totalValue:o})},[i,s]=Ue.useState("");return Ue.useEffect(()=>{window.updateCart=n;const a=window.location.href;s(a);const o=document.querySelector("#cart-button"),c=o.getAttribute("data-cart-items"),u=o.getAttribute("data-cart-total");r({totalItems:parseInt(c,10),totalValue:u})},[]),jt.jsxs("div",{className:"",children:[jt.jsxs("small",{className:"navbar-text",children:[jt.jsxs("b",{children:[t("Your cart"),":"]})," ",e.totalItems," ",t("item(s)")," ",e.totalValue]}),jt.jsx("a",{className:"btn btn-md btn-secondary navbar-btn mt-2",href:`/Cart/Cart?returnUrl=${encodeURIComponent(i)}`,children:jt.jsx("i",{className:"fa fa-shopping-cart"})})]})}const Xg=document.querySelector("#cart-button");Xg&&Ed(Xg).render(jt.jsx(EA,{}));const wA=document.getElementById("speech-to-text-react");Ed(wA).render(jt.jsx(RA,{}));
